import{t as R,a as j,c as xt,d as yt}from"../chunks/CZEFGGc-.js";import"../chunks/DZfdO4qV.js";import{h as tt,am as zt,a8 as _t,a3 as lt,u as y,ae as fe,af as pe,a4 as rt,aG as wt,ac as c,ag as l,l as me,k as e,ad as n,ai as v,ah as St,ay as $,n as at}from"../chunks/BrV-5lYI.js";import{s as z}from"../chunks/DZOBZeg2.js";import{i as st}from"../chunks/CUoOXVxe.js";import{e as it,i as ot}from"../chunks/C6IhlGiS.js";import{h as Dt}from"../chunks/_PKCcF-j.js";import{s as S,r as W}from"../chunks/BvJrSnkU.js";import{t as Ct,b as K,s as De}from"../chunks/gzJMTSJo.js";import{e as _}from"../chunks/iP9WQjfF.js";import{p as Y,b as Q}from"../chunks/DiRVYxju.js";import{i as nt}from"../chunks/CmR_tGdU.js";import{o as kt}from"../chunks/kuPnARuz.js";import{b as M}from"../chunks/B-vJpelS.js";function Tt(p,r,u,d){var m=p.__style;if(tt||m!==r){var a=Ct(r);(!tt||a!==p.getAttribute("style"))&&(a==null?p.removeAttribute("style"):p.style.cssText=a),p.__style=r}return d}function Ft(p,r,u){var d=zt(p,r);d&&d.set&&(p[r]=u,_t(()=>{p[r]=null}))}const At=!0,ea=Object.freeze(Object.defineProperty({__proto__:null,prerender:At},Symbol.toStringTag,{value:"Module"}));var Lt=R('<div class="dropdown-item svelte-g9tlcb"> </div>'),$t=R('<label> </label> <div class="custom-dropdown svelte-g9tlcb"><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="svelte-g9tlcb"> <div></div></div>',1);function ve(p,r){lt(r,!1);let u=Y(r,"id",8,""),d=Y(r,"label",8,""),m=Y(r,"placeholder",8,"Select or type"),a=Y(r,"options",24,()=>[]),U=Y(r,"value",12,""),ee=Y(r,"onChange",8,()=>{});const O=!0;let D=y(!1),E=y(),Z=y([...a()]);function te(){v(D,!e(D))}function ae(b){U(b),ee()(b),v(D,!1)}function se(){const b=U().toLowerCase();v(Z,a().filter(B=>B.toLowerCase().includes(b))),v(D,!0)}function he(b){e(E)&&!e(E).contains(b.target)&&v(D,!1)}nt();var le=$t();_("click",wt,he);var N=fe(le),re=c(N,!0);n(N);var P=l(N,2),C=c(P);W(C);var H=l(C,2);let V;return it(H,5,()=>e(Z),ot,(b,B)=>{var L=Lt(),ie=c(L,!0);n(L),pe(G=>{Tt(L,`display: ${G??""}`),z(ie,e(B))},[()=>e(B).toLowerCase().includes(U().toLowerCase())?"block":"none"],me),_("click",L,()=>ae(e(B))),j(b,L)}),n(H),n(P),Q(P,b=>v(E,b),()=>e(E)),pe(b=>{S(N,"for",u()),z(re,d()),S(C,"id",u()),S(C,"placeholder",m()),V=De(H,1,"dropdown-content svelte-g9tlcb",null,V,b)},[()=>({show:e(D)})],me),K(C,U),_("input",C,se),_("focus",C,()=>v(D,!0)),_("click",C,te),j(p,le),Ft(r,"prerender",O),rt({prerender:O})}let ue=[];async function Mt(){if(ue.length>0)return ue;try{const p=await fetch("/table_data/site_data.json");if(!p.ok)throw new Error(`HTTP error! status: ${p.status}`);const r=await p.json();return ue=r,r}catch(p){return console.error("Error fetching site data:",p),new Promise((r,u)=>{const d=new XMLHttpRequest;d.open("GET","table_data/site_data.json",!0),d.onload=function(){if(d.status===200)try{const m=JSON.parse(d.responseText);ue=m,r(m)}catch(m){console.error("Error parsing JSON:",m),u(m)}else console.error("XHR error:",d.status),u(new Error(`XHR error: ${d.status}`))},d.onerror=function(){console.error("XHR error occurred"),u(new Error("XHR error occurred"))},d.send()})}}function jt(){document.querySelectorAll(".search-fields input").forEach(r=>{r.setAttribute("autocomplete","off"),r.setAttribute("autocorrect","off"),r.setAttribute("autocapitalize","off"),r.setAttribute("spellcheck","false");const u=r.id+"_"+Math.random().toString(36).substring(2,9);r.setAttribute("name",u),(r.id==="State"||r.id==="Zip"||r.id==="Business-unit"||r.id==="ST-address"||r.id==="City")&&(r.setAttribute("autocomplete","new-password"),r.setAttribute("data-lpignore","true"),r.setAttribute("data-form-type","other"))})}var Ut=xt('<meta charset="UTF-8" class="svelte-az49xd"> <meta name="viewport" content="width=device-width, initial-scale=1.0" class="svelte-az49xd"> <link href="https://fonts.googleapis.com/css?family=Mulish" rel="stylesheet" class="svelte-az49xd"> <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet" class="svelte-az49xd"> <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js" class="svelte-az49xd"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" class="svelte-az49xd"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js" class="svelte-az49xd"><\/script>',1),Et=R('<tr><td colspan="4" class="details-cell svelte-az49xd"><div class="details-header svelte-az49xd">Details:</div> <div class="details-content svelte-az49xd"> <br class="svelte-az49xd"> <span class="label svelte-az49xd">Site code:</span> <span class="label svelte-az49xd">Business Unit:</span> <br class="svelte-az49xd"> <span class="label svelte-az49xd">Full Address:</span> <br class="svelte-az49xd"> <span class="label svelte-az49xd">Fuel dropped:</span> <span class="label svelte-az49xd">Tank:</span> </div></td></tr>'),Bt=R('<tr><td class="svelte-az49xd"> </td><td class="svelte-az49xd"> </td><td class="svelte-az49xd"> </td><td class="svelte-az49xd"> </td></tr> <!>',1),It=R('<tr class="svelte-az49xd"><td colspan="4" style="text-align: center; padding: 20px;" class="svelte-az49xd">No results found</td></tr>'),Nt=R('<header class="svelte-az49xd"><div class="header-container svelte-az49xd"><div class="top-header svelte-az49xd"><a class="top-header-link svelte-az49xd" href="https://berrys.com">berrys.com</a> <a class="top-header-link svelte-az49xd" href=" ">Contact Us</a></div> <div class="header svelte-az49xd"><div class="header-background svelte-az49xd"></div> <a class="svelte-az49xd">Home</a> <a class="svelte-az49xd">Inventory</a> <a class="svelte-az49xd">Cross-drop</a> <a class="svelte-az49xd">Vehicle Logging</a> <a class="svelte-az49xd">Analytics</a> <input type="text" placeholder="Search..." class="svelte-az49xd"> <img alt="Berrys Logo" class="svelte-az49xd"></div></div></header> <div class="sub-header-container svelte-az49xd"><div class="sub-header svelte-az49xd"><h1 class="svelte-az49xd">Site Data</h1> <span class="svelte-az49xd">Gather insight into your deliveries by site location. You can dive into delivery information by State, Zip code, Street Address and City. This <br class="svelte-az49xd">will offer you vital information on drop frequency, scheduling and billing reports.</span></div> <div class="breadcrumb svelte-az49xd"><a class="svelte-az49xd">Home</a> / <span class="svelte-az49xd">Site Data</span></div></div> <main class="svelte-az49xd"><div class="main-container svelte-az49xd"><label class="search-label svelte-az49xd" for="search-fields">Search</label> <div class="search-fields svelte-az49xd"><!> <label for="ST-address" class="svelte-az49xd">Address</label> <input type="text" id="ST-address" name="ST-address" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="svelte-az49xd"> <!> <!> <!> <label for="Zip" class="svelte-az49xd">Zip</label> <input type="text" id="Zip" name="Zip" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="svelte-az49xd"> <label for="Date" class="svelte-az49xd">Date</label> <input type="text" id="Date" name="Date" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="DD/MM/YYYY" class="svelte-az49xd"> <label for="Fuel" class="svelte-az49xd">Fuel</label> <input type="text" id="Fuel" name="Fuel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="svelte-az49xd"></div> <div class="button-container svelte-az49xd"><button class="search-button svelte-az49xd">Search</button> <button class="clear-button svelte-az49xd">Clear</button></div> <div class="table-header svelte-az49xd"><div class="live-status svelte-az49xd"><div class="toggle-live svelte-az49xd"><label for="table-type" class="table-type svelte-az49xd">LIVE <span class="live-indicator svelte-az49xd"></span></label></div> <label for="table-type" class="table-type svelte-az49xd"><span id="current-datetime" class="current-time svelte-az49xd"></span></label></div> <div class="export-dropdown svelte-az49xd"><button class="export-button svelte-az49xd">Export As â–¼</button> <div class="dropdown-content svelte-az49xd" id="exportDropdown"><a href=" " class="svelte-az49xd">CSV</a> <a href=" " class="svelte-az49xd">PDF</a></div></div></div> <table class="svelte-az49xd"><thead class="svelte-az49xd"><tr class="svelte-az49xd"><th class="svelte-az49xd">Date</th><th class="svelte-az49xd">Delivered at</th><th class="svelte-az49xd">Site Code</th><th class="svelte-az49xd">Fuel dropped</th></tr></thead><tbody class="svelte-az49xd"><!></tbody></table></div></main> <footer class="svelte-az49xd"><div style="display: flex; justify-content: space-between; align-items: center; padding: 0 20px;" class="svelte-az49xd"><span style="font-size: 1rem; font-family: Mulish;" class="svelte-az49xd">@copyrights Berrys Global Innovations</span> <img alt="Berrys Logo" class="svelte-az49xd"></div></footer>',1);function ta(p,r){lt(r,!1);let u=[],d=y([]),m=y([]),a=y({businessUnit:"",address:"",state:"",city:"",site:"",zip:"",date:"",fuel:""}),U=y([]),ee=y([]),O=y([]),D=y([]),E=y(),Z=y(),te=y(),ae=y();function se(t){return t%2===0?"row-even":"row-odd"}function he(){v(d,u.filter(t=>{const s=!e(a).businessUnit||t.BusinessUnitName&&t.BusinessUnitName.toLowerCase().includes(e(a).businessUnit.toLowerCase()),o=!e(a).address||t.Address&&t.Address.toLowerCase().includes(e(a).address.toLowerCase()),k=!e(a).state||t.State&&t.State.toLowerCase().includes(e(a).state.toLowerCase()),i=!e(a).city||t.City&&t.City.toLowerCase().includes(e(a).city.toLowerCase()),f=!e(a).site||t.SiteCode&&t.SiteCode.toLowerCase().includes(e(a).site.toLowerCase()),T=!e(a).zip||t.Zip&&t.Zip.toString().includes(e(a).zip),h=!e(a).date||t.Date&&t.Date.includes(e(a).date),x=!e(a).fuel||t.Delivered&&t.Delivered.toLowerCase().includes(e(a).fuel.toLowerCase());return s&&o&&k&&i&&f&&T&&h&&x})),v(m,Array(e(d).length).fill(!1)),V()}function le(){v(a,{businessUnit:"",address:"",state:"",city:"",site:"",zip:"",date:"",fuel:""}),v(d,[...u]),v(m,Array(e(d).length).fill(!1)),V(!0)}function N(t){if(!t)return"";const[s,o,k]=t.split("/"),i=new Date(k,o-1,s);if(isNaN(i.getTime()))return t;const f=new Date;if((f-i)/(1e3*60)<=30)return"Just now";if(i.getDate()===f.getDate()&&i.getMonth()===f.getMonth()&&i.getFullYear()===f.getFullYear())return"Today";const x=new Date(f);if(x.setDate(f.getDate()-1),i.getDate()===x.getDate()&&i.getMonth()===x.getMonth()&&i.getFullYear()===x.getFullYear())return"Yesterday";const w=new Date(f);if(w.setDate(f.getDate()-2),i.getDate()===w.getDate()&&i.getMonth()===w.getMonth()&&i.getFullYear()===w.getFullYear())return"Two days ago";const F={year:"numeric",month:"long",day:"numeric"};return i.toLocaleDateString("en-US",F)}function re(t){let s=[...e(m)];s[t]=!s[t],v(m,s)}function P(){const t=new Date,s={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};document.getElementById("current-datetime").textContent=t.toLocaleDateString("en-US",s)}function C(){const s=document.querySelector("table").querySelectorAll("tr");let o=[];const k=[];s[0].querySelectorAll("th").forEach(g=>{k.push(g.textContent.trim())}),o.push(k.join(","));for(let g=1;g<s.length;g++){const A=[];s[g].querySelectorAll("td").forEach(we=>{let Se=we.textContent.trim().replace(/"/g,'""');A.push(`"${Se}"`)}),A.length>0&&o.push(A.join(","))}const f=o.join(`
`),T=new Blob([f],{type:"text/csv;charset=utf-8;"}),h=new Date,x=h.toISOString().split("T")[0],w=h.toTimeString().split(" ")[0].replace(/:/g,"-"),de=`${document.location.pathname.includes("vehicle-logging")?"vehicle_logging":"site_data"}_${x}_${w}.csv`;if("showSaveFilePicker"in window){async function g(){try{const X=await(await window.showSaveFilePicker({suggestedName:de,types:[{description:"CSV File",accept:{"text/csv":[".csv"]}}]})).createWritable();await X.write(T),await X.close()}catch(A){A.name!=="AbortError"&&q()}}g()}else q();function q(){const g=document.createElement("a");g.href=URL.createObjectURL(T),g.setAttribute("download",de),document.body.appendChild(g),g.click(),document.body.removeChild(g)}}function H(){return e(a).businessUnit.trim()!==""||e(a).address.trim()!==""||e(a).state.trim()!==""||e(a).city.trim()!==""||e(a).site.trim()!==""||e(a).zip.trim()!==""||e(a).date.trim()!==""||e(a).fuel.trim()!==""}function V(t=!1){const s=document.querySelector(".toggle-live");s&&(!t&&H()?s.style.display="none":s.style.display="block")}kt(async()=>{P(),jt(),console.log("Starting data fetch");try{const s=await Mt();console.log("Data fetched:",s),u=s,v(d,[...u]),v(m,Array(u.length).fill(!1)),v(ee,[...new Set(u.map(o=>o.BusinessUnitName).filter(o=>o&&o.trim()!==""))]),v(U,[...new Set(u.map(o=>o.City).filter(o=>o&&o.trim()!==""))]),v(O,[...new Set(u.map(o=>o.State).filter(o=>o&&o.trim()!==""))]),v(D,[...new Set(u.map(o=>o.SiteCode).filter(o=>o&&o.trim()!==""))])}catch(s){console.error("Failed to load data:",s)}const t=setInterval(P,1e3);return()=>{clearInterval(t)}});function b(){document.getElementById("exportDropdown").classList.toggle("show")}async function B(){const{jsPDF:t}=window.jspdf,s=new t,o=document.querySelector("table");s.setFont("helvetica","bold"),s.setFontSize(16),s.text("Cross Drop Prevention Data",14,15);const k=new Date().toLocaleString();s.setFontSize(10),s.setFont("helvetica","normal"),s.text(`Generated: ${k}`,14,25),s.autoTable({html:o,startY:30,styles:{fontSize:8,cellPadding:2,overflow:"linebreak",halign:"center"},headStyles:{fillColor:[1,75,150],textColor:255,fontSize:8,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:[234,243,252]},margin:{top:30}});const i=new Date,f=i.toISOString().split("T")[0],T=i.toTimeString().split(" ")[0].replace(/:/g,"-"),h=`cross_drop_data_${f}_${T}.pdf`,x=new Blob([s.output("blob")],{type:"application/pdf"});if("showSaveFilePicker"in window)try{const F=await(await window.showSaveFilePicker({suggestedName:h,types:[{description:"PDF File",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await F.write(x),await F.close()}catch(w){w.name!=="AbortError"&&L(s,h)}else L(s,h)}function L(t,s){t.save(s)}nt();var ie=Nt();Dt(t=>{var s=Ut();St.title="Site Data",at(12),j(t,s)});var G=fe(ie),Ce=c(G),ke=l(c(Ce),2),Te=l(c(ke),2);S(Te,"href",`${M??""}/home`);var Fe=l(Te,2);S(Fe,"href",`${M??""}/inventory`);var Ae=l(Fe,2);S(Ae,"href",`${M??""}/cross-drops`);var Le=l(Ae,2);S(Le,"href",`${M??""}/vehicle-logging`);var $e=l(Le,2);S($e,"href",`${M??""}/analytics`);var ct=l($e,4);S(ct,"src",`${M??""}/images/Midas_Link_logo.png`),n(ke),n(Ce),n(G);var ge=l(G,2),Me=l(c(ge),2),dt=c(Me);S(dt,"href",`${M??""}/home`),at(2),n(Me),n(ge);var be=l(ge,2),je=c(be),xe=l(c(je),2),Ue=c(xe);ve(Ue,{id:"Business-unit",label:"Business Unit",get options(){return e(ee)},get value(){return e(a).businessUnit},set value(t){$(a,e(a).businessUnit=t)},$$legacy:!0});var oe=l(Ue,4);W(oe),Q(oe,t=>v(E,t),()=>e(E));var Ee=l(oe,2);ve(Ee,{id:"State",label:"State",get options(){return e(O)},get value(){return e(a).state},set value(t){$(a,e(a).state=t)},$$legacy:!0});var Be=l(Ee,2);ve(Be,{id:"City",label:"City",get options(){return e(U)},get value(){return e(a).city},set value(t){$(a,e(a).city=t)},$$legacy:!0});var Ie=l(Be,2);ve(Ie,{id:"Site",label:"Site",get options(){return e(D)},get value(){return e(a).site},set value(t){$(a,e(a).site=t)},$$legacy:!0});var ne=l(Ie,4);W(ne),Q(ne,t=>v(Z,t),()=>e(Z));var ce=l(ne,4);W(ce),Q(ce,t=>v(te,t),()=>e(te));var ye=l(ce,4);W(ye),Q(ye,t=>v(ae,t),()=>e(ae)),n(xe);var ze=l(xe,2),Ne=c(ze),vt=l(Ne,2);n(ze);var _e=l(ze,2),Pe=l(c(_e),2),qe=c(Pe),Ye=l(qe,2),Re=c(Ye),ut=l(Re,2);n(Ye),n(Pe),n(_e);var Oe=l(_e,2),Ze=l(c(Oe)),ft=c(Ze);{var pt=t=>{var s=yt(),o=fe(s);it(o,1,()=>e(d),ot,(k,i,f)=>{var T=Bt(),h=fe(T),x=c(h),w=c(x,!0);n(x);var F=l(x),de=c(F,!0);n(F);var q=l(F),g=c(q,!0);n(q);var A=l(q),X=c(A,!0);n(A),n(h);var we=l(h,2);{var Se=J=>{var I=Et(),Ge=c(I),Xe=l(c(Ge),2),Je=c(Xe),We=l(Je,4),Ke=l(We,2),Qe=l(Ke,4),et=l(Qe,4),gt=l(et,2);n(Xe),n(Ge),n(I),pe(bt=>{De(I,1,`details-row ${bt??""}`,"svelte-az49xd"),z(Je,`${e(i).Date??""} | ${(e(i)["Delivery Start "]||"")??""}  to ${(e(i)["Delivery End"]||"")??""} `),z(We,` ${(e(i).SiteCode||"")??""} | `),z(Ke,` ${(e(i).BusinessUnitName||"")??""} `),z(Qe,` ${(e(i).Address||"")??""} , ${e(i).City??""} ${e(i).State??""} | ${e(i).Zip??""} `),z(et,` ${(e(i).Delivered||"")??""} | `),z(gt,` T${(e(i).TankNumber||"")??""}`)},[()=>se(f)],me),_("click",I,()=>re(f)),j(J,I)};st(we,J=>{e(m)[f]&&J(Se)})}pe((J,I)=>{De(h,1,`main-row ${J??""} ${e(m)[f]?"hover-row":""}`,"svelte-az49xd"),z(w,I),z(de,e(i)["Delivery End"]),z(g,e(i).SiteCode),z(X,e(i).Delivered)},[()=>se(f),()=>N(e(i).Date)],me),_("click",h,()=>re(f)),j(k,T)}),j(t,s)},mt=t=>{var s=It();j(t,s)};st(ft,t=>{e(d).length>0?t(pt):t(mt,!1)})}n(Ze),n(Oe),n(je),n(be);var He=l(be,2),Ve=c(He),ht=l(c(Ve),2);S(ht,"src",`${M??""}/images/logo.png`),n(Ve),n(He),K(oe,()=>e(a).address,t=>$(a,e(a).address=t)),K(ne,()=>e(a).zip,t=>$(a,e(a).zip=t)),K(ce,()=>e(a).date,t=>$(a,e(a).date=t)),K(ye,()=>e(a).fuel,t=>$(a,e(a).fuel=t)),_("click",Ne,he),_("click",vt,le),_("click",qe,b),_("click",Re,C),_("click",ut,B),j(p,ie),rt()}export{ta as component,ea as universal};
