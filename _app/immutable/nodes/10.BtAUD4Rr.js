import{t as P,a as M,b as rt,d as it}from"../chunks/BiT46uWI.js";import"../chunks/BW1c3hla.js";import{h as Re,Y as Oe,u as y,_ as ue,a4 as ve,$ as Ve,aC as ot,Z as o,a1 as v,l as fe,k as e,a2 as u,a3 as n,a0 as nt,ao as L,n as Ze}from"../chunks/97xlgdzH.js";import{s as w}from"../chunks/DGDGhjdl.js";import{i as He}from"../chunks/D6c4gEQW.js";import{e as Xe,i as Ge}from"../chunks/Lzn-j-3Q.js";import{h as ct}from"../chunks/8eL0ySbc.js";import{t as dt,b as V,a as ze,s as we,r as X}from"../chunks/Bo_DpCPm.js";import{e as _}from"../chunks/Ys9-zu1u.js";import{b as Je}from"../chunks/6nXt2AF3.js";import{p as q,b as G}from"../chunks/B97ZAlxN.js";import{i as We}from"../chunks/BOGA1OAU.js";import{o as ut}from"../chunks/DIsGDWuq.js";function vt(p,l,z,c){var f=p.__style;if(Re||f!==l){var b=dt(l);(!Re||b!==p.getAttribute("style"))&&(b==null?p.removeAttribute("style"):p.style.cssText=b),p.__style=l}return c}var ft=P('<div class="dropdown-item svelte-g9tlcb"> </div>'),pt=P('<label> </label> <div class="custom-dropdown svelte-g9tlcb"><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="svelte-g9tlcb"> <div></div></div>',1);function ce(p,l){Oe(l,!1);let z=q(l,"id",8,""),c=q(l,"label",8,""),f=q(l,"placeholder",8,"Select or type"),b=q(l,"options",24,()=>[]),a=q(l,"value",12,""),J=q(l,"onChange",8,()=>{});const Y=!0;let C=y(!1),U=y(),R=y([...b()]);function W(){n(C,!e(C))}function K(h){a(h),J()(h),n(C,!1)}function Q(){const h=a().toLowerCase();n(R,b().filter(j=>j.toLowerCase().includes(h))),n(C,!0)}function ee(h){e(U)&&!e(U).contains(h.target)&&n(C,!1)}We();var te=pt();_("click",ot,ee);var B=ue(te),pe=v(B,!0);u(B);var I=o(B,2),S=v(I);X(S);var Z=o(S,2);let ae;return Xe(Z,5,()=>e(R),Ge,(h,j)=>{var E=ft(),se=v(E,!0);u(E),ve(le=>{vt(E,`display: ${le??""}`),w(se,e(j))},[()=>e(j).toLowerCase().includes(a().toLowerCase())?"block":"none"],fe),_("click",E,()=>K(e(j))),M(h,E)}),u(Z),u(I),G(I,h=>n(U,h),()=>e(U)),ve(h=>{ze(B,"for",z()),w(pe,c()),ze(S,"id",z()),ze(S,"placeholder",f()),ae=we(Z,1,"dropdown-content svelte-g9tlcb",null,ae,h)},[()=>({show:e(C)})],fe),V(S,a),_("input",S,Q),_("focus",S,()=>n(C,!0)),_("click",S,W),M(p,te),Je(l,"prerender",Y),Ve({prerender:Y})}let de=[];async function ht(){if(de.length>0)return de;try{const p=await fetch("/table_data/site_data.json");if(!p.ok)throw new Error(`HTTP error! status: ${p.status}`);const l=await p.json();return de=l,l}catch(p){return console.error("Error fetching site data:",p),new Promise((l,z)=>{const c=new XMLHttpRequest;c.open("GET","table_data/site_data.json",!0),c.onload=function(){if(c.status===200)try{const f=JSON.parse(c.responseText);de=f,l(f)}catch(f){console.error("Error parsing JSON:",f),z(f)}else console.error("XHR error:",c.status),z(new Error(`XHR error: ${c.status}`))},c.onerror=function(){console.error("XHR error occurred"),z(new Error("XHR error occurred"))},c.send()})}}function mt(){document.querySelectorAll(".search-fields input").forEach(l=>{l.setAttribute("autocomplete","off"),l.setAttribute("autocorrect","off"),l.setAttribute("autocapitalize","off"),l.setAttribute("spellcheck","false");const z=l.id+"_"+Math.random().toString(36).substring(2,9);l.setAttribute("name",z),(l.id==="State"||l.id==="Zip"||l.id==="Business-unit"||l.id==="ST-address"||l.id==="City")&&(l.setAttribute("autocomplete","new-password"),l.setAttribute("data-lpignore","true"),l.setAttribute("data-form-type","other"))})}var gt=rt('<meta charset="UTF-8" class="svelte-az49xd"> <meta name="viewport" content="width=device-width, initial-scale=1.0" class="svelte-az49xd"> <link href="https://fonts.googleapis.com/css?family=Mulish" rel="stylesheet" class="svelte-az49xd"> <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet" class="svelte-az49xd"> <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js" class="svelte-az49xd"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" class="svelte-az49xd"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js" class="svelte-az49xd"><\/script>',1),bt=P('<tr><td colspan="4" class="details-cell svelte-az49xd"><div class="details-header svelte-az49xd">Details:</div> <div class="details-content svelte-az49xd"> <br class="svelte-az49xd"> <span class="label svelte-az49xd">Site code:</span> <span class="label svelte-az49xd">Business Unit:</span> <br class="svelte-az49xd"> <span class="label svelte-az49xd">Full Address:</span> <br class="svelte-az49xd"> <span class="label svelte-az49xd">Fuel dropped:</span> <span class="label svelte-az49xd">Tank:</span> </div></td></tr>'),xt=P('<tr><td class="svelte-az49xd"> </td><td class="svelte-az49xd"> </td><td class="svelte-az49xd"> </td><td class="svelte-az49xd"> </td></tr> <!>',1),yt=P('<tr class="svelte-az49xd"><td colspan="4" style="text-align: center; padding: 20px;" class="svelte-az49xd">No results found</td></tr>'),zt=P('<header class="svelte-az49xd"><div class="header-container svelte-az49xd"><div class="top-header svelte-az49xd"><a class="top-header-link svelte-az49xd" href="https://berrys.com">berrys.com</a> <a class="top-header-link svelte-az49xd" href="contact.html">Contact Us</a></div> <div class="header svelte-az49xd"><div class="header-background svelte-az49xd"></div> <a href="/home" class="svelte-az49xd">Home</a> <a href="/inventory" class="svelte-az49xd">Inventory</a> <a href="/cross-drops" class="svelte-az49xd">Cross-drop</a> <a href="/vehicle-logging" class="svelte-az49xd">Vehicle Logging</a> <a href="/analytics" class="svelte-az49xd">Analytics</a> <input type="text" placeholder="Search..." class="svelte-az49xd"> <img src="images/Midas_Link_logo.png" alt="Berrys Logo" class="svelte-az49xd"></div></div></header> <div class="sub-header-container svelte-az49xd"><div class="sub-header svelte-az49xd"><h1 class="svelte-az49xd">Site Data</h1> <span class="svelte-az49xd">Gather insight into your deliveries by site location. You can dive into delivery information by State, Zip code, Street Address and City. This <br class="svelte-az49xd">will offer you vital information on drop frequency, scheduling and billing reports.</span></div> <div class="breadcrumb svelte-az49xd"><a href="home.html" class="svelte-az49xd">Home</a> / <span class="svelte-az49xd">Site Data</span></div></div> <main class="svelte-az49xd"><div class="main-container svelte-az49xd"><label class="search-label svelte-az49xd" for="search-fields">Search</label> <div class="search-fields svelte-az49xd"><!> <label for="ST-address" class="svelte-az49xd">Address</label> <input type="text" id="ST-address" name="ST-address" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="svelte-az49xd"> <!> <!> <!> <label for="Zip" class="svelte-az49xd">Zip</label> <input type="text" id="Zip" name="Zip" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="svelte-az49xd"> <label for="Date" class="svelte-az49xd">Date</label> <input type="text" id="Date" name="Date" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="DD/MM/YYYY" class="svelte-az49xd"> <label for="Fuel" class="svelte-az49xd">Fuel</label> <input type="text" id="Fuel" name="Fuel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="svelte-az49xd"></div> <div class="button-container svelte-az49xd"><button class="search-button svelte-az49xd">Search</button> <button class="clear-button svelte-az49xd">Clear</button></div> <div class="table-header svelte-az49xd"><div class="live-status svelte-az49xd"><div class="toggle-live svelte-az49xd"><label for="table-type" class="table-type svelte-az49xd">LIVE <span class="live-indicator svelte-az49xd"></span></label></div> <label for="table-type" class="table-type svelte-az49xd"><span id="current-datetime" class="current-time svelte-az49xd"></span></label></div> <div class="export-dropdown svelte-az49xd"><button class="export-button svelte-az49xd">Export As â–¼</button> <div class="dropdown-content svelte-az49xd" id="exportDropdown"><a href=" " class="svelte-az49xd">CSV</a> <a href=" " class="svelte-az49xd">PDF</a></div></div></div> <table class="svelte-az49xd"><thead class="svelte-az49xd"><tr class="svelte-az49xd"><th class="svelte-az49xd">Date</th><th class="svelte-az49xd">Delivered at</th><th class="svelte-az49xd">Site Code</th><th class="svelte-az49xd">Fuel dropped</th></tr></thead><tbody class="svelte-az49xd"><!></tbody></table></div></main> <footer class="svelte-az49xd"><div style="display: flex; justify-content: space-between; align-items: center; padding: 0 20px;" class="svelte-az49xd"><span style="font-size: 1rem; font-family: Mulish;" class="svelte-az49xd">@copyrights Berrys Global Innovations</span> <img src="images/logo.png" alt="Berrys Logo" class="svelte-az49xd"></div></footer>',1);function Et(p,l){Oe(l,!1);const z=!0;let c=[],f=y([]),b=y([]),a=y({businessUnit:"",address:"",state:"",city:"",site:"",zip:"",date:"",fuel:""}),J=y([]),Y=y([]),C=y([]),U=y([]),R=y(),W=y(),K=y(),Q=y();function ee(t){return t%2===0?"row-even":"row-odd"}function te(){n(f,c.filter(t=>{const s=!e(a).businessUnit||t.BusinessUnitName&&t.BusinessUnitName.toLowerCase().includes(e(a).businessUnit.toLowerCase()),i=!e(a).address||t.Address&&t.Address.toLowerCase().includes(e(a).address.toLowerCase()),k=!e(a).state||t.State&&t.State.toLowerCase().includes(e(a).state.toLowerCase()),r=!e(a).city||t.City&&t.City.toLowerCase().includes(e(a).city.toLowerCase()),d=!e(a).site||t.SiteCode&&t.SiteCode.toLowerCase().includes(e(a).site.toLowerCase()),T=!e(a).zip||t.Zip&&t.Zip.toString().includes(e(a).zip),m=!e(a).date||t.Date&&t.Date.includes(e(a).date),x=!e(a).fuel||t.Delivered&&t.Delivered.toLowerCase().includes(e(a).fuel.toLowerCase());return s&&i&&k&&r&&d&&T&&m&&x})),n(b,Array(e(f).length).fill(!1)),h()}function B(){n(a,{businessUnit:"",address:"",state:"",city:"",site:"",zip:"",date:"",fuel:""}),n(f,[...c]),n(b,Array(e(f).length).fill(!1)),h(!0)}function pe(t){if(!t)return"";const[s,i,k]=t.split("/"),r=new Date(k,i-1,s);if(isNaN(r.getTime()))return t;const d=new Date;if((d-r)/(1e3*60)<=30)return"Just now";if(r.getDate()===d.getDate()&&r.getMonth()===d.getMonth()&&r.getFullYear()===d.getFullYear())return"Today";const x=new Date(d);if(x.setDate(d.getDate()-1),r.getDate()===x.getDate()&&r.getMonth()===x.getMonth()&&r.getFullYear()===x.getFullYear())return"Yesterday";const D=new Date(d);if(D.setDate(d.getDate()-2),r.getDate()===D.getDate()&&r.getMonth()===D.getMonth()&&r.getFullYear()===D.getFullYear())return"Two days ago";const F={year:"numeric",month:"long",day:"numeric"};return r.toLocaleDateString("en-US",F)}function I(t){let s=[...e(b)];s[t]=!s[t],n(b,s)}function S(){const t=new Date,s={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};document.getElementById("current-datetime").textContent=t.toLocaleDateString("en-US",s)}function Z(){const s=document.querySelector("table").querySelectorAll("tr");let i=[];const k=[];s[0].querySelectorAll("th").forEach(g=>{k.push(g.textContent.trim())}),i.push(k.join(","));for(let g=1;g<s.length;g++){const A=[];s[g].querySelectorAll("td").forEach(xe=>{let ye=xe.textContent.trim().replace(/"/g,'""');A.push(`"${ye}"`)}),A.length>0&&i.push(A.join(","))}const d=i.join(`
`),T=new Blob([d],{type:"text/csv;charset=utf-8;"}),m=new Date,x=m.toISOString().split("T")[0],D=m.toTimeString().split(" ")[0].replace(/:/g,"-"),ne=`${document.location.pathname.includes("vehicle-logging")?"vehicle_logging":"site_data"}_${x}_${D}.csv`;if("showSaveFilePicker"in window){async function g(){try{const H=await(await window.showSaveFilePicker({suggestedName:ne,types:[{description:"CSV File",accept:{"text/csv":[".csv"]}}]})).createWritable();await H.write(T),await H.close()}catch(A){A.name!=="AbortError"&&N()}}g()}else N();function N(){const g=document.createElement("a");g.href=URL.createObjectURL(T),g.setAttribute("download",ne),document.body.appendChild(g),g.click(),document.body.removeChild(g)}}function ae(){return e(a).businessUnit.trim()!==""||e(a).address.trim()!==""||e(a).state.trim()!==""||e(a).city.trim()!==""||e(a).site.trim()!==""||e(a).zip.trim()!==""||e(a).date.trim()!==""||e(a).fuel.trim()!==""}function h(t=!1){const s=document.querySelector(".toggle-live");s&&(!t&&ae()?s.style.display="none":s.style.display="block")}ut(async()=>{S(),mt(),console.log("Starting data fetch");try{const s=await ht();console.log("Data fetched:",s),c=s,n(f,[...c]),n(b,Array(c.length).fill(!1)),n(Y,[...new Set(c.map(i=>i.BusinessUnitName).filter(i=>i&&i.trim()!==""))]),n(J,[...new Set(c.map(i=>i.City).filter(i=>i&&i.trim()!==""))]),n(C,[...new Set(c.map(i=>i.State).filter(i=>i&&i.trim()!==""))]),n(U,[...new Set(c.map(i=>i.SiteCode).filter(i=>i&&i.trim()!==""))])}catch(s){console.error("Failed to load data:",s)}const t=setInterval(S,1e3);return()=>{clearInterval(t)}});function j(){document.getElementById("exportDropdown").classList.toggle("show")}async function E(){const{jsPDF:t}=window.jspdf,s=new t,i=document.querySelector("table");s.setFont("helvetica","bold"),s.setFontSize(16),s.text("Cross Drop Prevention Data",14,15);const k=new Date().toLocaleString();s.setFontSize(10),s.setFont("helvetica","normal"),s.text(`Generated: ${k}`,14,25),s.autoTable({html:i,startY:30,styles:{fontSize:8,cellPadding:2,overflow:"linebreak",halign:"center"},headStyles:{fillColor:[1,75,150],textColor:255,fontSize:8,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:[234,243,252]},margin:{top:30}});const r=new Date,d=r.toISOString().split("T")[0],T=r.toTimeString().split(" ")[0].replace(/:/g,"-"),m=`cross_drop_data_${d}_${T}.pdf`,x=new Blob([s.output("blob")],{type:"application/pdf"});if("showSaveFilePicker"in window)try{const F=await(await window.showSaveFilePicker({suggestedName:m,types:[{description:"PDF File",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await F.write(x),await F.close()}catch(D){D.name!=="AbortError"&&se(s,m)}else se(s,m)}function se(t,s){t.save(s)}We();var le=zt();ct(t=>{var s=gt();nt.title="Site Data",Ze(12),M(t,s)});var _e=o(ue(le),4),Se=v(_e),he=o(v(Se),2),De=v(he);ce(De,{id:"Business-unit",label:"Business Unit",get options(){return e(Y)},get value(){return e(a).businessUnit},set value(t){L(a,e(a).businessUnit=t)},$$legacy:!0});var re=o(De,4);X(re),G(re,t=>n(R,t),()=>e(R));var Ce=o(re,2);ce(Ce,{id:"State",label:"State",get options(){return e(C)},get value(){return e(a).state},set value(t){L(a,e(a).state=t)},$$legacy:!0});var ke=o(Ce,2);ce(ke,{id:"City",label:"City",get options(){return e(J)},get value(){return e(a).city},set value(t){L(a,e(a).city=t)},$$legacy:!0});var Te=o(ke,2);ce(Te,{id:"Site",label:"Site",get options(){return e(U)},get value(){return e(a).site},set value(t){L(a,e(a).site=t)},$$legacy:!0});var ie=o(Te,4);X(ie),G(ie,t=>n(W,t),()=>e(W));var oe=o(ie,4);X(oe),G(oe,t=>n(K,t),()=>e(K));var me=o(oe,4);X(me),G(me,t=>n(Q,t),()=>e(Q)),u(he);var ge=o(he,2),Fe=v(ge),Ke=o(Fe,2);u(ge);var be=o(ge,2),Ae=o(v(be),2),Le=v(Ae),Me=o(Le,2),Ue=v(Me),Qe=o(Ue,2);u(Me),u(Ae),u(be);var je=o(be,2),Ee=o(v(je)),et=v(Ee);{var tt=t=>{var s=it(),i=ue(s);Xe(i,1,()=>e(f),Ge,(k,r,d)=>{var T=xt(),m=ue(T),x=v(m),D=v(x,!0);u(x);var F=o(x),ne=v(F,!0);u(F);var N=o(F),g=v(N,!0);u(N);var A=o(N),H=v(A,!0);u(A),u(m);var xe=o(m,2);{var ye=O=>{var $=bt(),$e=v($),Be=o(v($e),2),Ie=v(Be),Ne=o(Ie,4),qe=o(Ne,2),Pe=o(qe,4),Ye=o(Pe,4),st=o(Ye,2);u(Be),u($e),u($),ve(lt=>{we($,1,`details-row ${lt??""}`,"svelte-az49xd"),w(Ie,`${e(r).Date??""} | ${(e(r)["Delivery Start "]||"")??""}  to ${(e(r)["Delivery End"]||"")??""} `),w(Ne,` ${(e(r).SiteCode||"")??""} | `),w(qe,` ${(e(r).BusinessUnitName||"")??""} `),w(Pe,` ${(e(r).Address||"")??""} , ${e(r).City??""} ${e(r).State??""} | ${e(r).Zip??""} `),w(Ye,` ${(e(r).Delivered||"")??""} | `),w(st,` T${(e(r).TankNumber||"")??""}`)},[()=>ee(d)],fe),_("click",$,()=>I(d)),M(O,$)};He(xe,O=>{e(b)[d]&&O(ye)})}ve((O,$)=>{we(m,1,`main-row ${O??""} ${e(b)[d]?"hover-row":""}`,"svelte-az49xd"),w(D,$),w(ne,e(r)["Delivery End"]),w(g,e(r).SiteCode),w(H,e(r).Delivered)},[()=>ee(d),()=>pe(e(r).Date)],fe),_("click",m,()=>I(d)),M(k,T)}),M(t,s)},at=t=>{var s=yt();M(t,s)};He(et,t=>{e(f).length>0?t(tt):t(at,!1)})}return u(Ee),u(je),u(Se),u(_e),Ze(2),V(re,()=>e(a).address,t=>L(a,e(a).address=t)),V(ie,()=>e(a).zip,t=>L(a,e(a).zip=t)),V(oe,()=>e(a).date,t=>L(a,e(a).date=t)),V(me,()=>e(a).fuel,t=>L(a,e(a).fuel=t)),_("click",Fe,te),_("click",Ke,B),_("click",Le,j),_("click",Ue,Z),_("click",Qe,E),M(p,le),Je(l,"prerender",z),Ve({prerender:z})}export{Et as component};
