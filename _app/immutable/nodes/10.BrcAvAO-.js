import{t as P,a as L,b as st,d as lt}from"../chunks/dn5T25_G.js";import"../chunks/BrwEUfhY.js";import{h as Ye,W as He,u as y,Y as de,a2 as ue,Z as Oe,aC as rt,X as o,_ as v,l as ve,k as e,a0 as d,a1 as n,$ as it,an as A,n as Re}from"../chunks/m7Aisenh.js";import{s as z}from"../chunks/CR2Ppqz4.js";import{i as Ze}from"../chunks/B9vwRuT6.js";import{e as Ve,i as Xe}from"../chunks/CjbzqF3s.js";import{h as ot}from"../chunks/bHaCq9Ot.js";import{t as nt,b as O,a as ye,s as ze,r as V}from"../chunks/DcMbkdSC.js";import{e as w}from"../chunks/BmGaIGZ7.js";import{p as q,b as X}from"../chunks/gMEVYYUE.js";import{i as Ge}from"../chunks/DWJkSJoG.js";import{o as ct}from"../chunks/zvaxEu6J.js";function dt(h,r,f,u){var p=h.__style;if(Ye||p!==r){var a=nt(r);(!Ye||a!==h.getAttribute("style"))&&(a==null?h.removeAttribute("style"):h.style.cssText=a),h.__style=r}return u}var ut=P('<div class="dropdown-item svelte-g9tlcb"> </div>'),vt=P('<label> </label> <div class="custom-dropdown svelte-g9tlcb"><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="svelte-g9tlcb"> <div></div></div>',1);function ne(h,r){He(r,!1);let f=q(r,"id",8,""),u=q(r,"label",8,""),p=q(r,"placeholder",8,"Select or type"),a=q(r,"options",24,()=>[]),$=q(r,"value",12,""),G=q(r,"onChange",8,()=>{}),D=y(!1),M=y(),Y=y([...a()]);function J(){n(D,!e(D))}function W(m){$(m),G()(m),n(D,!1)}function K(){const m=$().toLowerCase();n(Y,a().filter(U=>U.toLowerCase().includes(m))),n(D,!0)}function Q(m){e(M)&&!e(M).contains(m.target)&&n(D,!1)}Ge();var ee=vt();w("click",rt,Q);var B=de(ee),fe=v(B,!0);d(B);var I=o(B,2),_=v(I);V(_);var R=o(_,2);let te;Ve(R,5,()=>e(Y),Xe,(m,U)=>{var j=ut(),ae=v(j,!0);d(j),ue(se=>{dt(j,`display: ${se??""}`),z(ae,e(U))},[()=>e(U).toLowerCase().includes($().toLowerCase())?"block":"none"],ve),w("click",j,()=>W(e(U))),L(m,j)}),d(R),d(I),X(I,m=>n(M,m),()=>e(M)),ue(m=>{ye(B,"for",f()),z(fe,u()),ye(_,"id",f()),ye(_,"placeholder",p()),te=ze(R,1,"dropdown-content svelte-g9tlcb",null,te,m)},[()=>({show:e(D)})],ve),O(_,$),w("input",_,K),w("focus",_,()=>n(D,!0)),w("click",_,J),L(h,ee),Oe()}let ce=[];async function ft(){if(ce.length>0)return ce;try{const h=await fetch("/table_data/site_data.json");if(!h.ok)throw new Error(`HTTP error! status: ${h.status}`);const r=await h.json();return ce=r,r}catch(h){return console.error("Error fetching site data:",h),new Promise((r,f)=>{const u=new XMLHttpRequest;u.open("GET","table_data/site_data.json",!0),u.onload=function(){if(u.status===200)try{const p=JSON.parse(u.responseText);ce=p,r(p)}catch(p){console.error("Error parsing JSON:",p),f(p)}else console.error("XHR error:",u.status),f(new Error(`XHR error: ${u.status}`))},u.onerror=function(){console.error("XHR error occurred"),f(new Error("XHR error occurred"))},u.send()})}}function pt(){document.querySelectorAll(".search-fields input").forEach(r=>{r.setAttribute("autocomplete","off"),r.setAttribute("autocorrect","off"),r.setAttribute("autocapitalize","off"),r.setAttribute("spellcheck","false");const f=r.id+"_"+Math.random().toString(36).substring(2,9);r.setAttribute("name",f),(r.id==="State"||r.id==="Zip"||r.id==="Business-unit"||r.id==="ST-address"||r.id==="City")&&(r.setAttribute("autocomplete","new-password"),r.setAttribute("data-lpignore","true"),r.setAttribute("data-form-type","other"))})}var ht=st('<meta charset="UTF-8" class="svelte-az49xd"> <meta name="viewport" content="width=device-width, initial-scale=1.0" class="svelte-az49xd"> <link href="https://fonts.googleapis.com/css?family=Mulish" rel="stylesheet" class="svelte-az49xd"> <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet" class="svelte-az49xd"> <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js" class="svelte-az49xd"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" class="svelte-az49xd"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js" class="svelte-az49xd"><\/script>',1),mt=P('<tr><td colspan="4" class="details-cell svelte-az49xd"><div class="details-header svelte-az49xd">Details:</div> <div class="details-content svelte-az49xd"> <br class="svelte-az49xd"> <span class="label svelte-az49xd">Site code:</span> <span class="label svelte-az49xd">Business Unit:</span> <br class="svelte-az49xd"> <span class="label svelte-az49xd">Full Address:</span> <br class="svelte-az49xd"> <span class="label svelte-az49xd">Fuel dropped:</span> <span class="label svelte-az49xd">Tank:</span> </div></td></tr>'),gt=P('<tr><td class="svelte-az49xd"> </td><td class="svelte-az49xd"> </td><td class="svelte-az49xd"> </td><td class="svelte-az49xd"> </td></tr> <!>',1),bt=P('<tr class="svelte-az49xd"><td colspan="4" style="text-align: center; padding: 20px;" class="svelte-az49xd">No results found</td></tr>'),xt=P('<header class="svelte-az49xd"><div class="header-container svelte-az49xd"><div class="top-header svelte-az49xd"><a class="top-header-link svelte-az49xd" href="https://berrys.com">berrys.com</a> <a class="top-header-link svelte-az49xd" href="contact.html">Contact Us</a></div> <div class="header svelte-az49xd"><div class="header-background svelte-az49xd"></div> <a href="/home" class="svelte-az49xd">Home</a> <a href="/inventory" class="svelte-az49xd">Inventory</a> <a href="/cross-drops" class="svelte-az49xd">Cross-drop</a> <a href="/vehicle-logging" class="svelte-az49xd">Vehicle Logging</a> <a href="/analytics" class="svelte-az49xd">Analytics</a> <input type="text" placeholder="Search..." class="svelte-az49xd"> <img src="images/Midas_Link_logo.png" alt="Berrys Logo" class="svelte-az49xd"></div></div></header> <div class="sub-header-container svelte-az49xd"><div class="sub-header svelte-az49xd"><h1 class="svelte-az49xd">Site Data</h1> <span class="svelte-az49xd">Gather insight into your deliveries by site location. You can dive into delivery information by State, Zip code, Street Address and City. This <br class="svelte-az49xd">will offer you vital information on drop frequency, scheduling and billing reports.</span></div> <div class="breadcrumb svelte-az49xd"><a href="home.html" class="svelte-az49xd">Home</a> / <span class="svelte-az49xd">Site Data</span></div></div> <main class="svelte-az49xd"><div class="main-container svelte-az49xd"><label class="search-label svelte-az49xd" for="search-fields">Search</label> <div class="search-fields svelte-az49xd"><!> <label for="ST-address" class="svelte-az49xd">Address</label> <input type="text" id="ST-address" name="ST-address" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="svelte-az49xd"> <!> <!> <!> <label for="Zip" class="svelte-az49xd">Zip</label> <input type="text" id="Zip" name="Zip" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="svelte-az49xd"> <label for="Date" class="svelte-az49xd">Date</label> <input type="text" id="Date" name="Date" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="DD/MM/YYYY" class="svelte-az49xd"> <label for="Fuel" class="svelte-az49xd">Fuel</label> <input type="text" id="Fuel" name="Fuel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="svelte-az49xd"></div> <div class="button-container svelte-az49xd"><button class="search-button svelte-az49xd">Search</button> <button class="clear-button svelte-az49xd">Clear</button></div> <div class="table-header svelte-az49xd"><div class="live-status svelte-az49xd"><div class="toggle-live svelte-az49xd"><label for="table-type" class="table-type svelte-az49xd">LIVE <span class="live-indicator svelte-az49xd"></span></label></div> <label for="table-type" class="table-type svelte-az49xd"><span id="current-datetime" class="current-time svelte-az49xd"></span></label></div> <div class="export-dropdown svelte-az49xd"><button class="export-button svelte-az49xd">Export As â–¼</button> <div class="dropdown-content svelte-az49xd" id="exportDropdown"><a href=" " class="svelte-az49xd">CSV</a> <a href=" " class="svelte-az49xd">PDF</a></div></div></div> <table class="svelte-az49xd"><thead class="svelte-az49xd"><tr class="svelte-az49xd"><th class="svelte-az49xd">Date</th><th class="svelte-az49xd">Delivered at</th><th class="svelte-az49xd">Site Code</th><th class="svelte-az49xd">Fuel dropped</th></tr></thead><tbody class="svelte-az49xd"><!></tbody></table></div></main> <footer class="svelte-az49xd"><div style="display: flex; justify-content: space-between; align-items: center; padding: 0 20px;" class="svelte-az49xd"><span style="font-size: 1rem; font-family: Mulish;" class="svelte-az49xd">@copyrights Berrys Global Innovations</span> <img src="images/logo.png" alt="Berrys Logo" class="svelte-az49xd"></div></footer>',1);function $t(h,r){He(r,!1);let f=[],u=y([]),p=y([]),a=y({businessUnit:"",address:"",state:"",city:"",site:"",zip:"",date:"",fuel:""}),$=y([]),G=y([]),D=y([]),M=y([]),Y=y(),J=y(),W=y(),K=y();function Q(t){return t%2===0?"row-even":"row-odd"}function ee(){n(u,f.filter(t=>{const s=!e(a).businessUnit||t.BusinessUnitName&&t.BusinessUnitName.toLowerCase().includes(e(a).businessUnit.toLowerCase()),i=!e(a).address||t.Address&&t.Address.toLowerCase().includes(e(a).address.toLowerCase()),C=!e(a).state||t.State&&t.State.toLowerCase().includes(e(a).state.toLowerCase()),l=!e(a).city||t.City&&t.City.toLowerCase().includes(e(a).city.toLowerCase()),c=!e(a).site||t.SiteCode&&t.SiteCode.toLowerCase().includes(e(a).site.toLowerCase()),k=!e(a).zip||t.Zip&&t.Zip.toString().includes(e(a).zip),g=!e(a).date||t.Date&&t.Date.includes(e(a).date),x=!e(a).fuel||t.Delivered&&t.Delivered.toLowerCase().includes(e(a).fuel.toLowerCase());return s&&i&&C&&l&&c&&k&&g&&x})),n(p,Array(e(u).length).fill(!1)),m()}function B(){n(a,{businessUnit:"",address:"",state:"",city:"",site:"",zip:"",date:"",fuel:""}),n(u,[...f]),n(p,Array(e(u).length).fill(!1)),m(!0)}function fe(t){if(!t)return"";const[s,i,C]=t.split("/"),l=new Date(C,i-1,s);if(isNaN(l.getTime()))return t;const c=new Date;if((c-l)/(1e3*60)<=30)return"Just now";if(l.getDate()===c.getDate()&&l.getMonth()===c.getMonth()&&l.getFullYear()===c.getFullYear())return"Today";const x=new Date(c);if(x.setDate(c.getDate()-1),l.getDate()===x.getDate()&&l.getMonth()===x.getMonth()&&l.getFullYear()===x.getFullYear())return"Yesterday";const S=new Date(c);if(S.setDate(c.getDate()-2),l.getDate()===S.getDate()&&l.getMonth()===S.getMonth()&&l.getFullYear()===S.getFullYear())return"Two days ago";const T={year:"numeric",month:"long",day:"numeric"};return l.toLocaleDateString("en-US",T)}function I(t){let s=[...e(p)];s[t]=!s[t],n(p,s)}function _(){const t=new Date,s={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};document.getElementById("current-datetime").textContent=t.toLocaleDateString("en-US",s)}function R(){const s=document.querySelector("table").querySelectorAll("tr");let i=[];const C=[];s[0].querySelectorAll("th").forEach(b=>{C.push(b.textContent.trim())}),i.push(C.join(","));for(let b=1;b<s.length;b++){const F=[];s[b].querySelectorAll("td").forEach(be=>{let xe=be.textContent.trim().replace(/"/g,'""');F.push(`"${xe}"`)}),F.length>0&&i.push(F.join(","))}const c=i.join(`
`),k=new Blob([c],{type:"text/csv;charset=utf-8;"}),g=new Date,x=g.toISOString().split("T")[0],S=g.toTimeString().split(" ")[0].replace(/:/g,"-"),oe=`${document.location.pathname.includes("vehicle-logging")?"vehicle_logging":"site_data"}_${x}_${S}.csv`;if("showSaveFilePicker"in window){async function b(){try{const Z=await(await window.showSaveFilePicker({suggestedName:oe,types:[{description:"CSV File",accept:{"text/csv":[".csv"]}}]})).createWritable();await Z.write(k),await Z.close()}catch(F){F.name!=="AbortError"&&N()}}b()}else N();function N(){const b=document.createElement("a");b.href=URL.createObjectURL(k),b.setAttribute("download",oe),document.body.appendChild(b),b.click(),document.body.removeChild(b)}}function te(){return e(a).businessUnit.trim()!==""||e(a).address.trim()!==""||e(a).state.trim()!==""||e(a).city.trim()!==""||e(a).site.trim()!==""||e(a).zip.trim()!==""||e(a).date.trim()!==""||e(a).fuel.trim()!==""}function m(t=!1){const s=document.querySelector(".toggle-live");s&&(!t&&te()?s.style.display="none":s.style.display="block")}ct(async()=>{_(),pt(),console.log("Starting data fetch");try{const s=await ft();console.log("Data fetched:",s),f=s,n(u,[...f]),n(p,Array(f.length).fill(!1)),n(G,[...new Set(f.map(i=>i.BusinessUnitName).filter(i=>i&&i.trim()!==""))]),n($,[...new Set(f.map(i=>i.City).filter(i=>i&&i.trim()!==""))]),n(D,[...new Set(f.map(i=>i.State).filter(i=>i&&i.trim()!==""))]),n(M,[...new Set(f.map(i=>i.SiteCode).filter(i=>i&&i.trim()!==""))])}catch(s){console.error("Failed to load data:",s)}const t=setInterval(_,1e3);return()=>{clearInterval(t)}});function U(){document.getElementById("exportDropdown").classList.toggle("show")}async function j(){const{jsPDF:t}=window.jspdf,s=new t,i=document.querySelector("table");s.setFont("helvetica","bold"),s.setFontSize(16),s.text("Cross Drop Prevention Data",14,15);const C=new Date().toLocaleString();s.setFontSize(10),s.setFont("helvetica","normal"),s.text(`Generated: ${C}`,14,25),s.autoTable({html:i,startY:30,styles:{fontSize:8,cellPadding:2,overflow:"linebreak",halign:"center"},headStyles:{fillColor:[1,75,150],textColor:255,fontSize:8,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:[234,243,252]},margin:{top:30}});const l=new Date,c=l.toISOString().split("T")[0],k=l.toTimeString().split(" ")[0].replace(/:/g,"-"),g=`cross_drop_data_${c}_${k}.pdf`,x=new Blob([s.output("blob")],{type:"application/pdf"});if("showSaveFilePicker"in window)try{const T=await(await window.showSaveFilePicker({suggestedName:g,types:[{description:"PDF File",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await T.write(x),await T.close()}catch(S){S.name!=="AbortError"&&ae(s,g)}else ae(s,g)}function ae(t,s){t.save(s)}Ge();var se=xt();ot(t=>{var s=ht();it.title="Site Data",Re(12),L(t,s)});var we=o(de(se),4),_e=v(we),pe=o(v(_e),2),Se=v(pe);ne(Se,{id:"Business-unit",label:"Business Unit",get options(){return e(G)},get value(){return e(a).businessUnit},set value(t){A(a,e(a).businessUnit=t)},$$legacy:!0});var le=o(Se,4);V(le),X(le,t=>n(Y,t),()=>e(Y));var De=o(le,2);ne(De,{id:"State",label:"State",get options(){return e(D)},get value(){return e(a).state},set value(t){A(a,e(a).state=t)},$$legacy:!0});var Ce=o(De,2);ne(Ce,{id:"City",label:"City",get options(){return e($)},get value(){return e(a).city},set value(t){A(a,e(a).city=t)},$$legacy:!0});var ke=o(Ce,2);ne(ke,{id:"Site",label:"Site",get options(){return e(M)},get value(){return e(a).site},set value(t){A(a,e(a).site=t)},$$legacy:!0});var re=o(ke,4);V(re),X(re,t=>n(J,t),()=>e(J));var ie=o(re,4);V(ie),X(ie,t=>n(W,t),()=>e(W));var he=o(ie,4);V(he),X(he,t=>n(K,t),()=>e(K)),d(pe);var me=o(pe,2),Te=v(me),Je=o(Te,2);d(me);var ge=o(me,2),Fe=o(v(ge),2),Ae=v(Fe),Le=o(Ae,2),$e=v(Le),We=o($e,2);d(Le),d(Fe),d(ge);var Me=o(ge,2),Ue=o(v(Me)),Ke=v(Ue);{var Qe=t=>{var s=lt(),i=de(s);Ve(i,1,()=>e(u),Xe,(C,l,c)=>{var k=gt(),g=de(k),x=v(g),S=v(x,!0);d(x);var T=o(x),oe=v(T,!0);d(T);var N=o(T),b=v(N,!0);d(N);var F=o(N),Z=v(F,!0);d(F),d(g);var be=o(g,2);{var xe=H=>{var E=mt(),je=v(E),Ee=o(v(je),2),Be=v(Ee),Ie=o(Be,4),Ne=o(Ie,2),qe=o(Ne,4),Pe=o(qe,4),tt=o(Pe,2);d(Ee),d(je),d(E),ue(at=>{ze(E,1,`details-row ${at??""}`,"svelte-az49xd"),z(Be,`${e(l).Date??""} | ${(e(l)["Delivery Start "]||"")??""}  to ${(e(l)["Delivery End"]||"")??""} `),z(Ie,` ${(e(l).SiteCode||"")??""} | `),z(Ne,` ${(e(l).BusinessUnitName||"")??""} `),z(qe,` ${(e(l).Address||"")??""} , ${e(l).City??""} ${e(l).State??""} | ${e(l).Zip??""} `),z(Pe,` ${(e(l).Delivered||"")??""} | `),z(tt,` T${(e(l).TankNumber||"")??""}`)},[()=>Q(c)],ve),w("click",E,()=>I(c)),L(H,E)};Ze(be,H=>{e(p)[c]&&H(xe)})}ue((H,E)=>{ze(g,1,`main-row ${H??""} ${e(p)[c]?"hover-row":""}`,"svelte-az49xd"),z(S,E),z(oe,e(l)["Delivery End"]),z(b,e(l).SiteCode),z(Z,e(l).Delivered)},[()=>Q(c),()=>fe(e(l).Date)],ve),w("click",g,()=>I(c)),L(C,k)}),L(t,s)},et=t=>{var s=bt();L(t,s)};Ze(Ke,t=>{e(u).length>0?t(Qe):t(et,!1)})}d(Ue),d(Me),d(_e),d(we),Re(2),O(le,()=>e(a).address,t=>A(a,e(a).address=t)),O(re,()=>e(a).zip,t=>A(a,e(a).zip=t)),O(ie,()=>e(a).date,t=>A(a,e(a).date=t)),O(he,()=>e(a).fuel,t=>A(a,e(a).fuel=t)),w("click",Te,ee),w("click",Je,B),w("click",Ae,U),w("click",$e,R),w("click",We,j),L(h,se),Oe()}export{$t as component};
