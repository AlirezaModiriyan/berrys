import{t as q,a as j,c as lt,d as rt}from"../chunks/BwztU-1H.js";import"../chunks/D2pFnvA9.js";import{ar as ot,aw as le,g as t,as as it,aB as nt,ay as a,c as o,aF as N,m as re,s as D,aC as Pe,r as i,ax as Ee,z as Ve}from"../chunks/Q_JE9wk7.js";import{s as b}from"../chunks/CGIuDC5k.js";import{i as Ie}from"../chunks/fcqInBS4.js";import{e as ct,i as dt}from"../chunks/C-8BU0ik.js";import{h as vt}from"../chunks/BF0kYyXs.js";import{s as S,r as M}from"../chunks/D-A7z8Ve.js";import{s as Ye}from"../chunks/CP8x4jAK.js";import{e as T}from"../chunks/0TwUz20N.js";import{s as ft}from"../chunks/BikELij-.js";import{b as P}from"../chunks/73bLff4_.js";import{i as gt}from"../chunks/BHF4M39u.js";import{o as ut}from"../chunks/D73C-MN7.js";import{b as h}from"../chunks/CcTokVOa.js";import{g as pt}from"../chunks/BthRGV7V.js";const ht=!0,Rt=Object.freeze(Object.defineProperty({__proto__:null,prerender:ht},Symbol.toStringTag,{value:"Module"}));let R=[];async function mt(){if(R.length>0)return R;try{const g=await fetch("/table_data/vehicle_logging.json");if(!g.ok)throw new Error(`HTTP error! status: ${g.status}`);const n=await g.json();return R=n,n}catch(g){return console.error("Error fetching vehicleData data:",g),new Promise((n,y)=>{const d=new XMLHttpRequest;d.open("GET","table_data/vehicle_logging.json",!0),d.onload=function(){if(d.status===200)try{const r=JSON.parse(d.responseText);R=r,n(r)}catch(r){console.error("Error parsing JSON:",r),y(r)}else console.error("XHR error:",d.status),y(new Error(`XHR error: ${d.status}`))},d.onerror=function(){console.error("XHR error occurred"),y(new Error("XHR error occurred"))},d.send()})}}function bt(g){if(!g)return"";const[n,y,d]=g.split("."),r=new Date(d,n-1,y);if(isNaN(r.getTime()))return g;const v=new Date;if((v-r)/(1e3*60)<=30)return"Just now";if(r.getDate()===v.getDate()&&r.getMonth()===v.getMonth()&&r.getFullYear()===v.getFullYear())return"Today";const $=new Date(v);if($.setDate(v.getDate()-1),r.getDate()===$.getDate()&&r.getMonth()===$.getMonth()&&r.getFullYear()===$.getFullYear())return"Yesterday";const F=new Date(v);if(F.setDate(v.getDate()-2),r.getDate()===F.getDate()&&r.getMonth()===F.getMonth()&&r.getFullYear()===F.getFullYear())return"Two days ago";const H={year:"numeric",month:"long",day:"numeric"};return r.toLocaleDateString("en-US",H)}function Re(){const g=new Date,n={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};document.getElementById("current-datetime").textContent=g.toLocaleDateString("en-US",n)}function yt(){document.querySelectorAll(".search-fields input").forEach(n=>{const y=n.id+"_"+Math.random().toString(36).substring(2,9);n.setAttribute("name",y),(n.id==="State"||n.id==="Zip"||n.id==="Date"||n.id==="ST-address"||n.id==="City"||n.id==="Fuel")&&(n.setAttribute("autocomplete","new-password"),n.setAttribute("data-lpignore","true"),n.setAttribute("data-form-type","other"))})}var zt=lt('<meta charset="UTF-8" class="svelte-13s4fzg"> <meta name="viewport" content="width=device-width, initial-scale=1.0" class="svelte-13s4fzg"> <link href="https://fonts.googleapis.com/css?family=Mulish" rel="stylesheet" class="svelte-13s4fzg"> <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet" class="svelte-13s4fzg"> <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js" class="svelte-13s4fzg"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" class="svelte-13s4fzg"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js" class="svelte-13s4fzg"><\/script>',1),_t=q('<tr><td colspan="4" class="details-cell svelte-13s4fzg"><div class="details-header svelte-13s4fzg">Details:</div> <div class="details-content svelte-13s4fzg"> <br class="svelte-13s4fzg"> <span class="label svelte-13s4fzg">Trailer No.:</span> <br class="svelte-13s4fzg"> <span class="label svelte-13s4fzg">Full Address:</span> <br class="svelte-13s4fzg"> <span class="label svelte-13s4fzg">Delivered:</span> <span class="label svelte-13s4fzg">Tank:</span> </div></td><td class="svelte-13s4fzg"><button class="more-details svelte-13s4fzg">Expand details</button></td></tr>'),wt=q('<tr><td class="svelte-13s4fzg"> </td><td class="svelte-13s4fzg"> </td><td class="svelte-13s4fzg"> </td><td class="svelte-13s4fzg"> </td><td class="svelte-13s4fzg"> </td></tr> <!>',1),Dt=q('<tr class="svelte-13s4fzg"><td colspan="4" style="text-align: center; padding: 20px;" class="svelte-13s4fzg">No results found</td></tr>'),St=q('<header class="svelte-13s4fzg"><div class="header-container svelte-13s4fzg"><div class="top-header svelte-13s4fzg"><a class="top-header-link svelte-13s4fzg" href="https://berrys.com">berrys.com</a> <a class="top-header-link svelte-13s4fzg" href=" ">Contact Us</a></div> <div class="header svelte-13s4fzg"><div class="header-background svelte-13s4fzg"></div> <a class="svelte-13s4fzg">Home</a> <a class="svelte-13s4fzg">Inventory</a> <a class="svelte-13s4fzg">Cross-drop</a> <a class="svelte-13s4fzg">Site Data</a> <a class="svelte-13s4fzg">Analytics</a> <input type="text" placeholder="Search..." class="svelte-13s4fzg"> <img alt="Berrys Logo" class="svelte-13s4fzg"></div></div></header> <div class="sub-header-container svelte-13s4fzg"><div class="sub-header svelte-13s4fzg"><h1 class="svelte-13s4fzg">Vehicle Logging</h1> <span class="svelte-13s4fzg">Access key information on each trailer, with real-time access to deliveries,  focusing on trailer ID. See where trailers are located, what they are <br class="svelte-13s4fzg">delivering or a full log on delivery history.</span></div> <div class="breadcrumb svelte-13s4fzg"><a class="svelte-13s4fzg">Home</a> / <span class="svelte-13s4fzg">Vehicle Logging</span></div></div> <main class="svelte-13s4fzg"><div class="main-container svelte-13s4fzg"><label for="search-fields" class="search-label svelte-13s4fzg">Search</label> <div class="search-fields svelte-13s4fzg"><label for="ST-address" class="svelte-13s4fzg">Address</label> <input type="text" id="ST-address" name="ST-address" class="svelte-13s4fzg"> <label for="State" class="svelte-13s4fzg">State</label> <input type="text" id="State" name="State" class="svelte-13s4fzg"> <label for="City" class="svelte-13s4fzg">City</label> <input type="text" id="City" name="City" class="svelte-13s4fzg"> <label for="Trailer_No" class="svelte-13s4fzg">Trailer No</label> <input type="text" id="Trailer_No" name="Trailer_No" class="svelte-13s4fzg"> <label for="Date" class="svelte-13s4fzg">Date</label> <input type="text" id="Date" name="Date" placeholder="DD/MM/YYYY" class="svelte-13s4fzg"> <label for="Fuel" class="svelte-13s4fzg">Fuel</label> <input type="text" id="Fuel" name="Fuel" class="svelte-13s4fzg"></div> <div class="button-container svelte-13s4fzg"><button class="search-button svelte-13s4fzg">Search</button> <button class="clear-button svelte-13s4fzg">Clear</button></div> <div class="table-header svelte-13s4fzg"><div class="live-status svelte-13s4fzg"><div class="toggle-live svelte-13s4fzg"><label for="table-type" class="table-type svelte-13s4fzg">LIVE <span class="live-indicator svelte-13s4fzg"></span></label></div> <label for="table-type" class="table-type svelte-13s4fzg"><span id="current-datetime" class="current-time svelte-13s4fzg"></span></label></div> <div class="export-dropdown svelte-13s4fzg"><button class="export-button svelte-13s4fzg">Export As â–¼</button> <div class="dropdown-content svelte-13s4fzg" id="exportDropdown"><a href=" " class="svelte-13s4fzg">CSV</a> <a href=" " class="svelte-13s4fzg">PDF</a></div></div></div> <table class="svelte-13s4fzg"><thead class="svelte-13s4fzg"><tr class="svelte-13s4fzg"><th class="svelte-13s4fzg">Date</th><th class="svelte-13s4fzg">Time</th><th class="svelte-13s4fzg">City</th><th class="svelte-13s4fzg">Vehicle ID</th><th class="svelte-13s4fzg">Prevented Delivery</th></tr></thead><tbody class="svelte-13s4fzg"><!></tbody></table></div></main> <footer class="svelte-13s4fzg"><div style="display: flex; justify-content: space-between; align-items: center; padding: 0 20px;" class="svelte-13s4fzg"><span style="font-size: 1rem; font-family: Mulish;" class="svelte-13s4fzg">@copyrights Berrys Global Innovations</span> <img alt="Berrys Logo" class="svelte-13s4fzg"></div></footer>',1);function qt(g,n){ot(n,!1);function y(e){pt(`${h}/vehicle/${e["Trailer No."]}`,{state:{trailer:e["Trailer No."]}})}let d=[],r=re([]),v=re([]),l=re({address:"",state:"",city:"",trailer:"",date:"",fuel:""});function B(e){return e%2===0?"row-even":"row-odd"}function $(){D(r,d.filter(e=>{const s=!t(l).address||e.Address&&e.Address.toLowerCase().includes(t(l).address.toLowerCase()),z=!t(l).state||e.State&&e.State.toLowerCase().includes(t(l).state.toLowerCase()),w=!t(l).city||e.City&&e.City.toLowerCase().includes(t(l).city.toLowerCase()),c=!t(l).trailer||e["Trailer No."]&&e["Trailer No."].toLowerCase().includes(t(l).trailer.toLowerCase()),u=!t(l).date||e.Date&&e.Date.includes(t(l).date),_=!t(l).fuel||e["Prevented Delivery "]&&e["Prevented Delivery "].toLowerCase().includes(t(l).fuel.toLowerCase());return s&&z&&w&&c&&u&&_})),D(v,Array(t(r).length).fill(!1)),ne()}function F(){console.log("clearing"),D(l,{address:"",state:"",city:"",trailer:"",date:"",fuel:""}),console.log(t(l)),D(r,[...d]),D(v,Array(t(r).length).fill(!1)),ne(!0)}function H(){showDropdown=!showDropdown}function qe(){const e=document.querySelectorAll(".search-fields input");return Array.from(e).some(s=>s.value.trim()!=="")}function oe(e){let s=[...t(v)];s[e]=!s[e],D(v,s)}function Be(){const s=document.querySelector("table").querySelectorAll("tr");let z=[];const w=[];s[0].querySelectorAll("th").forEach(f=>{w.push(f.textContent.trim())}),z.push(w.join(","));for(let f=1;f<s.length;f++){const m=[];s[f].querySelectorAll("td").forEach(Y=>{let se=Y.textContent.trim().replace(/"/g,'""');m.push(`"${se}"`)}),m.length>0&&z.push(m.join(","))}const u=z.join(`
`),_=new Blob([u],{type:"text/csv;charset=utf-8;"}),p=new Date,x=p.toISOString().split("T")[0],A=p.toTimeString().split(" ")[0].replace(/:/g,"-"),I=`${document.location.pathname.includes("vehicle-logging")?"vehicle_logging":"site_data"}_${x}_${A}.csv`;if("showSaveFilePicker"in window){async function f(){try{const E=await(await window.showSaveFilePicker({suggestedName:I,types:[{description:"CSV File",accept:{"text/csv":[".csv"]}}]})).createWritable();await E.write(_),await E.close()}catch(m){m.name!=="AbortError"&&L()}}f()}else L();function L(){const f=document.createElement("a");f.href=URL.createObjectURL(_),f.setAttribute("download",I),document.body.appendChild(f),f.click(),document.body.removeChild(f)}}async function He(){const{jsPDF:e}=window.jspdf,s=new e,z=document.querySelector("table");s.setFont("helvetica","bold"),s.setFontSize(16),s.text("Cross Drop Prevention Data",14,15);const w=new Date().toLocaleString();s.setFontSize(10),s.setFont("helvetica","normal"),s.text(`Generated: ${w}`,14,25),s.autoTable({html:z,startY:30,styles:{fontSize:8,cellPadding:2,overflow:"linebreak",halign:"center"},headStyles:{fillColor:[1,75,150],textColor:255,fontSize:8,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:[234,243,252]},margin:{top:30}});const c=new Date,u=c.toISOString().split("T")[0],_=c.toTimeString().split(" ")[0].replace(/:/g,"-"),p=`cross_drop_data_${u}_${_}.pdf`,x=new Blob([s.output("blob")],{type:"application/pdf"});if("showSaveFilePicker"in window)try{const C=await(await window.showSaveFilePicker({suggestedName:p,types:[{description:"PDF File",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await C.write(x),await C.close()}catch(A){A.name!=="AbortError"&&ie(s,p)}else ie(s,p)}function ie(e,s){e.save(s)}function ne(e=!1){const s=document.querySelector(".toggle-live");s&&(!e&&qe()?s.style.display="none":s.style.display="block")}ut(async()=>{Re(),yt(),console.log("Starting data fetch");try{const s=await mt();console.log("Data fetched:",s),d=s,D(r,[...d]),D(v,Array(d.length).fill(!1))}catch(s){console.error("Failed to load data:",s)}const e=setInterval(Re,1e3);return()=>{clearInterval(e)}}),gt();var ce=St();vt(e=>{var s=zt();nt.title="Vehicle Logging",Pe(12),j(e,s)});var O=le(ce),de=o(O),ve=a(o(de),2),fe=o(ve);ft(fe,`      background: url(${h??""}/svg/Vector_1.svg) no-repeat left center; mask-image: url(${h??""}/svg/Vector_1.svg'); -webkit-mask-image: url(${h??""}/svg/Vector_1.svg);`);var ge=a(fe,2);S(ge,"href",`${h??""}/home`);var ue=a(ge,2);S(ue,"href",`${h??""}/inventory`);var pe=a(ue,2);S(pe,"href",`${h??""}/cross-drops`);var he=a(pe,2);S(he,"href",`${h??""}/site-data`);var me=a(he,2);S(me,"href",`${h??""}/analytics`);var Oe=a(me,4);S(Oe,"src",`${h??""}/images/Midas_Link_logo.png`),i(ve),i(de),i(O);var U=a(O,2),be=a(o(U),2),Ue=o(be);S(Ue,"href",`${h??""}/home`),Pe(2),i(be),i(U);var X=a(U,2),ye=o(X),G=a(o(ye),2),J=a(o(G),2);M(J);var W=a(J,4);M(W);var Z=a(W,4);M(Z);var K=a(Z,4);M(K);var Q=a(K,4);M(Q);var ze=a(Q,4);M(ze),i(G);var ee=a(G,2),_e=o(ee),Xe=a(_e,2);i(ee);var te=a(ee,2),we=a(o(te),2),De=o(we),Se=a(De,2),Te=o(Se),Ge=a(Te,2);i(Se),i(we),i(te);var xe=a(te,2),Ce=a(o(xe)),Je=o(Ce);{var We=e=>{var s=rt(),z=le(s);ct(z,1,()=>t(r),dt,(w,c,u)=>{var _=wt(),p=le(_),x=o(p),A=o(x,!0);i(x);var C=a(x),I=o(C,!0);i(C);var L=a(C),f=o(L,!0);i(L);var m=a(L),E=o(m,!0);i(m);var Y=a(m),se=o(Y,!0);i(Y),i(p);var Qe=a(p,2);{var et=V=>{var k=_t(),ae=o(k),Fe=a(o(ae),2),Ae=o(Fe),Le=a(Ae,4),je=a(Le,4),Ne=a(je,4),tt=a(Ne,2);i(Fe),i(ae);var Me=a(ae),st=o(Me);i(Me),i(k),Ee(at=>{Ye(k,1,`details-row ${at??""}`,"svelte-13s4fzg"),b(Ae,`${t(c).Date??""} | ${(t(c).Time||"")??""} `),b(Le,` ${(t(c)["Trailer No."]||"")??""} `),b(je,` ${(t(c).Address||"")??""} , ${t(c).City??""} ${t(c).State??""} `),b(Ne,` ${(t(c)["Prevented Delivery "]||"")??""} | `),b(tt,` T${(t(c)["Tank No. "]||"")??""}`)},[()=>B(u)],Ve),T("click",st,()=>y(t(c))),T("click",k,()=>oe(u)),j(V,k)};Ie(Qe,V=>{t(v)[u]&&V(et)})}Ee((V,k)=>{Ye(p,1,`main-row ${V??""} ${t(v)[u]?"hover-row":""}`,"svelte-13s4fzg"),b(A,k),b(I,t(c).Time),b(f,t(c).City),b(E,t(c)["Trailer No."]),b(se,t(c)["Prevented Delivery "])},[()=>B(u),()=>bt(t(c).Date)],Ve),T("click",p,()=>oe(u)),j(w,_)}),j(e,s)},Ze=e=>{var s=Dt();j(e,s)};Ie(Je,e=>{t(r).length>0?e(We):e(Ze,!1)})}i(Ce),i(xe),i(ye),i(X);var ke=a(X,2),$e=o(ke),Ke=a(o($e),2);S(Ke,"src",`${h??""}/images/logo.png`),i($e),i(ke),P(J,()=>t(l).address,e=>N(l,t(l).address=e)),P(W,()=>t(l).state,e=>N(l,t(l).state=e)),P(Z,()=>t(l).city,e=>N(l,t(l).city=e)),P(K,()=>t(l).trailer,e=>N(l,t(l).trailer=e)),P(Q,()=>t(l).date,e=>N(l,t(l).date=e)),P(ze,()=>t(l).fuel,e=>N(l,t(l).fuel=e)),T("click",_e,$),T("click",Xe,F),T("click",De,H),T("click",Te,Be),T("click",Ge,He),j(g,ce),it()}export{qt as component,Rt as universal};
