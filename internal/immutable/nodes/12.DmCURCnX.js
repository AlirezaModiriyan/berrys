import{t as J,a as q,c as Dt,d as kt}from"../chunks/DbG2GV8L.js";import"../chunks/KBxhti__.js";import{aa as Ct,t as xt,L as $t,Z as it,m as y,ap as ge,aq as ye,$ as nt,aO as Tt,c as n,ar as a,z as Ae,g as t,r as i,s as d,au as Ft,aw as N,av as lt}from"../chunks/DUhx6xz-.js";import{s as $}from"../chunks/CVKJiU8T.js";import{i as rt}from"../chunks/BpTyA4Gh.js";import{e as ct,i as dt}from"../chunks/CnbdMh-E.js";import{h as At}from"../chunks/odfi5hCG.js";import{s as z,c as Et,b as Ee,r as re,a as Lt}from"../chunks/CcMhjV8R.js";import{e as p}from"../chunks/BsQXio-a.js";import{b as oe}from"../chunks/ClUY9fpE.js";import{l as ot,p as G,b as ie}from"../chunks/CyYJbHLO.js";import{i as vt}from"../chunks/CZPaWRoT.js";import{o as jt}from"../chunks/BaPp8yKz.js";import{b as x}from"../chunks/LADs444h.js";import{g as zt}from"../chunks/Qq4J4iLE.js";function Mt(w,r,h){var v=Ct(w,r);v&&v.set&&(w[r]=h,xt(()=>{w[r]=null}))}function Ut(w,r){var S;var h=(S=w.$$events)==null?void 0:S[r.type],v=$t(h)?h.slice():h==null?[]:[h];for(var b of v)b.call(this,r)}const Pt=!0,ns=Object.freeze(Object.defineProperty({__proto__:null,prerender:Pt},Symbol.toStringTag,{value:"Module"}));var Nt=J('<div class="dropdown-item svelte-1ki0mmx"> </div>'),qt=J('<label> </label> <div class="custom-dropdown svelte-1ki0mmx"><div class="input-wrapper svelte-1ki0mmx"><input> <div class="dropdown-arrow svelte-1ki0mmx"></div></div> <div></div></div>',1);function we(w,r){const h=ot(r,["children","$$slots","$$events","$$legacy"]),v=ot(h,["prerender","id","label","placeholder","options","value","onChange"]);it(r,!1);let b=G(r,"id",8,""),S=G(r,"label",8,""),s=G(r,"placeholder",8,"Select or type"),M=G(r,"options",24,()=>[]),V=G(r,"value",12,""),ne=G(r,"onChange",8,()=>{});const W=!0;let T=y(!1),B=y(),U=y([...M()]);function ce(){d(T,!t(T)),t(T)&&d(U,[...M()])}function de(f){V(f),ne()(f),d(T,!1)}function F(){const f=V().toLowerCase();d(U,M().filter(Y=>Y.toLowerCase().includes(f))),d(T,!0)}function _e(f){t(B)&&!t(B).contains(f.target)&&d(T,!1)}function Se(f){f.stopPropagation(),d(U,[...M()]),ce()}vt();var K=qt();p("click",Tt,_e);var I=ge(K),De=n(I,!0);i(I);var Z=a(I,2),Q=n(Z),A=n(Q);re(A);let ve;var ue=a(A,2);i(Q);var H=a(Q,2);let X;return ct(H,5,()=>t(U),dt,(f,Y)=>{var O=Nt(),fe=n(O,!0);i(O),ye(()=>$(fe,t(Y))),p("click",O,()=>de(t(Y))),q(f,O)}),i(H),i(Z),ie(Z,f=>d(B,f),()=>t(B)),ye(f=>{z(I,"for",b()),$(De,S()),ve=Et(A,ve,{id:b(),type:"text",placeholder:s(),autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",...v},"svelte-1ki0mmx"),X=Ee(H,1,"dropdown-content svelte-1ki0mmx",null,X,f)},[()=>({show:t(T)})],Ae),oe(A,V),p("input",A,F),p("focus",A,()=>{d(U,[...M()]),d(T,!0)}),p("keydown",A,function(f){Ut.call(this,r,f)}),p("click",ue,Se),q(w,K),Mt(r,"prerender",W),nt({prerender:W})}let he=[];async function Bt(){if(he.length>0)return he;try{const w=await fetch("/table_data/site_data.json");if(!w.ok)throw new Error(`HTTP error! status: ${w.status}`);const r=await w.json();return he=r,r}catch(w){return console.error("Error fetching site data:",w),new Promise((r,h)=>{const v=new XMLHttpRequest;v.open("GET","table_data/site_data.json",!0),v.onload=function(){if(v.status===200)try{const b=JSON.parse(v.responseText);he=b,r(b)}catch(b){console.error("Error parsing JSON:",b),h(b)}else console.error("XHR error:",v.status),h(new Error(`XHR error: ${v.status}`))},v.onerror=function(){console.error("XHR error occurred"),h(new Error("XHR error occurred"))},v.send()})}}function It(){document.querySelectorAll(".search-fields input").forEach(r=>{r.setAttribute("autocomplete","off"),r.setAttribute("autocorrect","off"),r.setAttribute("autocapitalize","off"),r.setAttribute("spellcheck","false");const h=r.id+"_"+Math.random().toString(36).substring(2,9);r.setAttribute("name",h),(r.id==="State"||r.id==="Zip"||r.id==="Business-unit"||r.id==="ST-address"||r.id==="City")&&(r.setAttribute("autocomplete","new-password"),r.setAttribute("data-lpignore","true"),r.setAttribute("data-form-type","other"))})}var Yt=Dt('<meta charset="UTF-8" class="svelte-13w8lbr"> <meta name="viewport" content="width=device-width, initial-scale=1.0" class="svelte-13w8lbr"> <link href="https://fonts.googleapis.com/css?family=Mulish" rel="stylesheet" class="svelte-13w8lbr"> <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet" class="svelte-13w8lbr"> <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js" class="svelte-13w8lbr"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" class="svelte-13w8lbr"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js" class="svelte-13w8lbr"><\/script>',1),Ot=J('<tr><td colspan="4" class="details-cell svelte-13w8lbr"><div class="details-header svelte-13w8lbr">Details:</div> <div class="details-content svelte-13w8lbr"> <br class="svelte-13w8lbr"> <span class="label svelte-13w8lbr">Site code:</span> <span class="label svelte-13w8lbr">Business Unit:</span> <br class="svelte-13w8lbr"> <span class="label svelte-13w8lbr">Full Address:</span> <br class="svelte-13w8lbr"> <span class="label svelte-13w8lbr">Fuel dropped:</span> <span class="label svelte-13w8lbr">Tank:</span> </div></td><td class="svelte-13w8lbr"><button class="more-details svelte-13w8lbr">See Delivery Details</button></td></tr>'),Rt=J('<tr><td class="svelte-13w8lbr"> </td><td class="svelte-13w8lbr"> </td><td class="svelte-13w8lbr"> </td><td class="svelte-13w8lbr"> </td></tr> <!>',1),Vt=J('<tr class="svelte-13w8lbr"><td colspan="4" style="text-align: center; padding: 20px;" class="svelte-13w8lbr">No results found</td></tr>'),Zt=J('<header class="svelte-13w8lbr"><div class="header-container svelte-13w8lbr"><div class="top-header svelte-13w8lbr"><a class="top-header-link svelte-13w8lbr" href="https://berrys.com">berrys.com</a> <a class="top-header-link svelte-13w8lbr" href=" ">Contact Us</a></div> <div class="header svelte-13w8lbr"><div class="header-background svelte-13w8lbr"></div> <a class="svelte-13w8lbr">Home</a> <a class="svelte-13w8lbr">Inventory</a> <a class="svelte-13w8lbr">Cross-Drop Prevention</a> <a class="svelte-13w8lbr">Vehicle Logging</a> <a class="svelte-13w8lbr">Analytics</a> <input type="text" placeholder="Search..." class="svelte-13w8lbr"> <img alt="Berrys Logo" class="svelte-13w8lbr"></div></div></header> <div class="sub-header-container svelte-13w8lbr"><div class="sub-header svelte-13w8lbr"><h1 class="svelte-13w8lbr">Site Data</h1> <span class="svelte-13w8lbr">Gather insight into your deliveries by site location. You can dive into delivery information by State, Zip code, Street Address and City. This <br class="svelte-13w8lbr">will offer you vital information on drop frequency, scheduling and billing reports.</span></div> <div class="breadcrumb svelte-13w8lbr"><a class="svelte-13w8lbr">Home</a> / <span class="svelte-13w8lbr">Site Data</span></div></div> <main class="svelte-13w8lbr"><div class="main-container svelte-13w8lbr"><label class="search-label svelte-13w8lbr" for="search-fields">Search</label> <div class="search-fields svelte-13w8lbr"><!> <label for="ST-address" class="svelte-13w8lbr">Address</label> <input type="text" id="ST-address" name="ST-address" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="svelte-13w8lbr"> <!> <!> <!> <label for="Zip" class="svelte-13w8lbr">Zip</label> <input type="text" id="Zip" name="Zip" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="svelte-13w8lbr"> <label for="Date" class="svelte-13w8lbr">Date</label> <input type="text" id="Date" name="Date" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="DD/MM/YYYY" class="svelte-13w8lbr"> <label for="Fuel" class="svelte-13w8lbr">Fuel</label> <input type="text" id="Fuel" name="Fuel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="svelte-13w8lbr"></div> <div class="button-container svelte-13w8lbr"><button class="search-button svelte-13w8lbr">Search</button> <button class="clear-button svelte-13w8lbr">Clear</button></div> <div class="table-header svelte-13w8lbr"><div class="live-status svelte-13w8lbr"><div class="toggle-live svelte-13w8lbr"><label for="table-type" class="table-type svelte-13w8lbr">LIVE <span class="live-indicator svelte-13w8lbr"></span></label></div> <label for="table-type" class="table-type svelte-13w8lbr"><span id="current-datetime" class="current-time svelte-13w8lbr"></span></label></div> <div class="export-dropdown svelte-13w8lbr"><button class="export-button svelte-13w8lbr">Export As â–¼</button> <div class="dropdown-content svelte-13w8lbr" id="exportDropdown"><a href=" " class="svelte-13w8lbr">CSV</a> <a href=" " class="svelte-13w8lbr">PDF</a></div></div></div> <table class="svelte-13w8lbr"><thead class="svelte-13w8lbr"><tr class="svelte-13w8lbr"><th class="svelte-13w8lbr">Date</th><th class="svelte-13w8lbr">Delivered at</th><th class="svelte-13w8lbr">Site Code</th><th class="svelte-13w8lbr">Fuel dropped</th></tr></thead><tbody class="svelte-13w8lbr"><!></tbody></table></div></main> <footer class="svelte-13w8lbr"><div style="display: flex; justify-content: space-between; align-items: center; padding: 0 20px;" class="svelte-13w8lbr"><span style="font-size: 1rem; font-family: Mulish;" class="svelte-13w8lbr">@copyrights Berrys Global Innovations</span> <img alt="Berrys Logo" class="svelte-13w8lbr"></div></footer>',1);function cs(w,r){it(r,!1);function h(e){zt(`${x}/deliveryDetail/${e.SiteCode}`,{state:{address:e.Address,city:e.City,state:e.State,date:e.Date}})}let v=[],b=y([]),S=y([]),s=y({businessUnit:"",address:"",state:"",city:"",site:"",zip:"",date:"",fuel:""}),M=y([]),V=y([]),ne=y([]),W=y([]),T=y(),B=y(),U=y(),ce=y();function de(e){return e%2===0?"row-even":"row-odd"}function F(){d(b,v.filter(e=>{const l=!t(s).businessUnit||e.BusinessUnitName&&e.BusinessUnitName.toLowerCase().includes(t(s).businessUnit.toLowerCase()),c=!t(s).address||e.Address&&e.Address.toLowerCase().includes(t(s).address.toLowerCase()),D=!t(s).state||e.State&&e.State.toLowerCase().includes(t(s).state.toLowerCase()),o=!t(s).city||e.City&&e.City.toLowerCase().includes(t(s).city.toLowerCase()),u=!t(s).site||e.SiteCode&&e.SiteCode.toLowerCase().includes(t(s).site.toLowerCase()),E=!t(s).zip||e.Zip&&e.Zip.toString().includes(t(s).zip),k=!t(s).date||e.Date&&e.Date.includes(t(s).date),g=!t(s).fuel||e.Delivered&&e.Delivered.toLowerCase().includes(t(s).fuel.toLowerCase());return l&&c&&D&&o&&u&&E&&k&&g})),d(S,Array(t(b).length).fill(!1)),Z()}function _e(){d(s,{businessUnit:"",address:"",state:"",city:"",site:"",zip:"",date:"",fuel:""}),d(b,[...v]),d(S,Array(t(b).length).fill(!1)),Z(!0)}function Se(e){if(!e)return"";const[l,c,D]=e.split("/"),o=new Date(D,c-1,l);if(isNaN(o.getTime()))return e;const u=new Date;if((u-o)/(1e3*60)<=30)return"Just now";if(o.getDate()===u.getDate()&&o.getMonth()===u.getMonth()&&o.getFullYear()===u.getFullYear())return"Today";const g=new Date(u);if(g.setDate(u.getDate()-1),o.getDate()===g.getDate()&&o.getMonth()===g.getMonth()&&o.getFullYear()===g.getFullYear())return"Yesterday";const _=new Date(u);if(_.setDate(u.getDate()-2),o.getDate()===_.getDate()&&o.getMonth()===_.getMonth()&&o.getFullYear()===_.getFullYear())return"Two days ago";const C={year:"numeric",month:"long",day:"numeric"};return o.toLocaleDateString("en-US",C)}function K(e){let l=[...t(S)];l[e]=!l[e],d(S,l)}function I(){const e=new Date,l={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};document.getElementById("current-datetime").textContent=e.toLocaleDateString("en-US",l)}function De(){return t(s).businessUnit.trim()!==""||t(s).address.trim()!==""||t(s).state.trim()!==""||t(s).city.trim()!==""||t(s).site.trim()!==""||t(s).zip.trim()!==""||t(s).date.trim()!==""||t(s).fuel.trim()!==""}function Z(e=!1){const l=document.querySelector(".toggle-live");l&&(!e&&De()?l.style.display="none":l.style.display="block")}jt(async()=>{I(),It(),console.log("Starting data fetch");try{const l=await Bt();console.log("Data fetched:",l),v=l,d(b,[...v]),d(S,Array(v.length).fill(!1)),d(V,[...new Set(v.map(c=>c.BusinessUnitName).filter(c=>c&&c.trim()!==""))]),d(M,[...new Set(v.map(c=>c.City).filter(c=>c&&c.trim()!==""))]),d(ne,[...new Set(v.map(c=>c.State).filter(c=>c&&c.trim()!==""))]),d(W,[...new Set(v.map(c=>c.SiteCode).filter(c=>c&&c.trim()!==""))])}catch(l){console.error("Failed to load data:",l)}const e=setInterval(I,1e3);return()=>{clearInterval(e)}});function Q(){document.getElementById("exportDropdown").classList.toggle("show")}function A(){const l=document.querySelector("table").cloneNode(!0);l.querySelectorAll(".more-details").forEach(m=>{m.parentNode.textContent=""});const D=l.querySelectorAll("tr");let o=[];const u=[];D[0].querySelectorAll("th").forEach(m=>{u.push(m.textContent.trim())}),o.push(u.join(","));for(let m=1;m<D.length;m++){const P=[];D[m].querySelectorAll("td").forEach(R=>{let j=R.textContent.trim().replace(/"/g,'""');P.push(`"${j}"`)}),P.length>0&&o.push(P.join(","))}const k=o.join(`
`),g=new Blob([k],{type:"text/csv;charset=utf-8;"}),_=new Date,C=_.toISOString().split("T")[0],L=_.toTimeString().split(" ")[0].replace(/:/g,"-"),me=`${document.location.pathname.includes("vehicle-logging")?"vehicle_logging":"site_data"}_${C}_${L}.csv`;if("showSaveFilePicker"in window){async function m(){try{const le=await(await window.showSaveFilePicker({suggestedName:me,types:[{description:"CSV File",accept:{"text/csv":[".csv"]}}]})).createWritable();await le.write(g),await le.close()}catch(P){P.name!=="AbortError"&&ae()}}m()}else ae();function ae(){const m=document.createElement("a");m.href=URL.createObjectURL(g),m.setAttribute("download",me),document.body.appendChild(m),m.click(),document.body.removeChild(m)}}async function ve(){try{const{jsPDF:e}=window.jspdf;if(!e)throw new Error("jsPDF library not found");const l=new e;l.setFont("helvetica","bold"),l.setFontSize(16),l.text("Site Data",14,15);const c=new Date().toLocaleString();l.setFontSize(10),l.setFont("helvetica","normal"),l.text(`Generated: ${c}`,14,25);const D=document.querySelector("table");if(!D)throw new Error("Table not found");const o=D.cloneNode(!0);o.querySelectorAll(".more-details").forEach(C=>{const L=C.closest("td, th");L&&(L.textContent="")}),l.autoTable({html:o,startY:30,styles:{fontSize:8,cellPadding:2,overflow:"linebreak",halign:"center"},headStyles:{fillColor:[1,75,150],textColor:255,fontSize:8,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:[234,243,252]},margin:{top:30}});const E=new Date,k=E.toISOString().split("T")[0],g=E.toTimeString().split(" ")[0].replace(/:/g,"-"),_=`site_data_${k}_${g}.pdf`;if("showSaveFilePicker"in window)try{const L=await(await window.showSaveFilePicker({suggestedName:_,types:[{description:"PDF File",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await L.write(l.output("blob")),await L.close()}catch(C){console.error("File save error:",C),ue(l,_)}else ue(l,_);return!0}catch(e){return console.error("PDF generation failed:",e),!1}}function ue(e,l){e.save(l)}vt();var H=Zt();At(e=>{var l=Yt();Ft.title="Site Data",lt(12),q(e,l)});var X=ge(H),f=n(X),Y=a(n(f),2),O=n(Y);Lt(O,`      background: url(${x??""}/svg/Vector_1.svg) no-repeat left center; mask-image: url(${x??""}/svg/Vector_1.svg'); -webkit-mask-image: url(${x??""}/svg/Vector_1.svg);`);var fe=a(O,2);z(fe,"href",`${x??""}/home`);var Le=a(fe,2);z(Le,"href",`${x??""}/inventory`);var je=a(Le,2);z(je,"href",`${x??""}/cross-drops`);var ze=a(je,2);z(ze,"href",`${x??""}/vehicle-logging`);var Me=a(ze,2);z(Me,"href",`${x??""}/analytics`);var ut=a(Me,4);z(ut,"src",`${x??""}/images/Midas_Link_logo.png`),i(Y),i(f),i(X);var ke=a(X,2),Ue=a(n(ke),2),ft=n(Ue);z(ft,"href",`${x??""}/home`),lt(2),i(Ue),i(ke);var Ce=a(ke,2),Pe=n(Ce),xe=a(n(Pe),2),Ne=n(xe);we(Ne,{id:"Business-unit",label:"Business Unit",get options(){return t(V)},get value(){return t(s).businessUnit},set value(e){N(s,t(s).businessUnit=e)},$$events:{keydown:e=>{e.key==="Enter"&&F()}},$$legacy:!0});var ee=a(Ne,4);re(ee),ie(ee,e=>d(T,e),()=>t(T));var qe=a(ee,2);we(qe,{id:"State",label:"State",get options(){return t(ne)},get value(){return t(s).state},set value(e){N(s,t(s).state=e)},$$events:{keydown:e=>{e.key==="Enter"&&F()}},$$legacy:!0});var Be=a(qe,2);we(Be,{id:"City",label:"City",get options(){return t(M)},get value(){return t(s).city},set value(e){N(s,t(s).city=e)},$$events:{keydown:e=>{e.key==="Enter"&&F()}},$$legacy:!0});var Ie=a(Be,2);we(Ie,{id:"Site",label:"Site",get options(){return t(W)},get value(){return t(s).site},set value(e){N(s,t(s).site=e)},$$events:{keydown:e=>{e.key==="Enter"&&F()}},$$legacy:!0});var te=a(Ie,4);re(te),ie(te,e=>d(B,e),()=>t(B));var se=a(te,4);re(se),ie(se,e=>d(U,e),()=>t(U));var be=a(se,4);re(be),ie(be,e=>d(ce,e),()=>t(ce)),i(xe);var $e=a(xe,2),Ye=n($e),bt=a(Ye,2);i($e);var Te=a($e,2),Oe=a(n(Te),2),Re=n(Oe),Ve=a(Re,2),Ze=n(Ve),pt=a(Ze,2);i(Ve),i(Oe),i(Te);var He=a(Te,2),Xe=a(n(He)),mt=n(Xe);{var wt=e=>{var l=kt(),c=ge(l);ct(c,1,()=>t(b),dt,(D,o,u)=>{var E=Rt(),k=ge(E),g=n(k),_=n(g,!0);i(g);var C=a(g),L=n(C,!0);i(C);var pe=a(C),me=n(pe,!0);i(pe);var ae=a(pe),m=n(ae,!0);i(ae),i(k);var P=a(k,2);{var le=R=>{var j=Ot(),Fe=n(j),We=a(n(Fe),2),Ke=n(We),Qe=a(Ke,4),et=a(Qe,2),tt=a(et,4),st=a(tt,4),yt=a(st,2);i(We),i(Fe);var at=a(Fe),_t=n(at);i(at),i(j),ye(St=>{Ee(j,1,`details-row ${St??""}`,"svelte-13w8lbr"),$(Ke,`${t(o).Date??""} | ${(t(o)["Delivery Start "]||"")??""}  to ${(t(o)["Delivery End"]||"")??""} `),$(Qe,` ${(t(o).SiteCode||"")??""} | `),$(et,` ${(t(o).BusinessUnitName||"")??""} `),$(tt,` ${(t(o).Address||"")??""} , ${t(o).City??""} ${t(o).State??""} | ${t(o).Zip??""} `),$(st,` ${(t(o).Delivered||"")??""} | `),$(yt,` T${(t(o).TankNumber||"")??""}`)},[()=>de(u)],Ae),p("click",_t,()=>h(t(o))),p("click",j,()=>K(u)),q(R,j)};rt(P,R=>{t(S)[u]&&R(le)})}ye((R,j)=>{Ee(k,1,`main-row ${R??""} ${t(S)[u]?"hover-row":""}`,"svelte-13w8lbr"),$(_,j),$(L,t(o)["Delivery End"]),$(me,t(o).SiteCode),$(m,t(o).Delivered)},[()=>de(u),()=>Se(t(o).Date)],Ae),p("click",k,()=>K(u)),q(D,E)}),q(e,l)},ht=e=>{var l=Vt();q(e,l)};rt(mt,e=>{t(b).length>0?e(wt):e(ht,!1)})}i(Xe),i(He),i(Pe),i(Ce);var Ge=a(Ce,2),Je=n(Ge),gt=a(n(Je),2);z(gt,"src",`${x??""}/images/logo.png`),i(Je),i(Ge),oe(ee,()=>t(s).address,e=>N(s,t(s).address=e)),p("keydown",ee,e=>{e.key==="Enter"&&F()}),oe(te,()=>t(s).zip,e=>N(s,t(s).zip=e)),p("keydown",te,e=>{e.key==="Enter"&&F()}),oe(se,()=>t(s).date,e=>N(s,t(s).date=e)),p("keydown",se,e=>{e.key==="Enter"&&F()}),oe(be,()=>t(s).fuel,e=>N(s,t(s).fuel=e)),p("keydown",be,e=>{e.key==="Enter"&&F()}),p("click",Ye,F),p("click",bt,_e),p("click",Re,Q),p("click",Ze,A),p("click",pt,ve),q(w,H),nt()}export{cs as component,ns as universal};
