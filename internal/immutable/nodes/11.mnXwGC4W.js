import{t as R,a as A,c as et,d as tt}from"../chunks/C4XabTBO.js";import"../chunks/gq36_m--.js";import{a9 as at,f as ae,o as t,aa as st,ai as lt,s as l,c as o,ay as L,x as se,ak as j,aj as Me,r as i,ah as Ne,q as Pe}from"../chunks/DiniuTc6.js";import{s as w}from"../chunks/BAPyS8wT.js";import{i as Ee}from"../chunks/BkPkjMix.js";import{e as rt,i as ot}from"../chunks/DO2HwEvT.js";import{h as it}from"../chunks/C50FTuje.js";import{s as y,r as M}from"../chunks/BWlCbUqV.js";import{b as N,s as Ie}from"../chunks/DtIEtmtG.js";import{e as T}from"../chunks/B5DXvJvt.js";import{i as nt}from"../chunks/DAvOP9A0.js";import{o as ct}from"../chunks/BFksb1Wo.js";import{b as q}from"../chunks/Br0UuklX.js";const dt=!0,At=Object.freeze(Object.defineProperty({__proto__:null,prerender:dt},Symbol.toStringTag,{value:"Module"}));let Y=[];async function vt(){if(Y.length>0)return Y;try{const f=await fetch("/table_data/vehicle_logging.json");if(!f.ok)throw new Error(`HTTP error! status: ${f.status}`);const n=await f.json();return Y=siteData,n}catch(f){return console.error("Error fetching vehicleData data:",f),new Promise((n,m)=>{const d=new XMLHttpRequest;d.open("GET","table_data/vehicle_logging.json",!0),d.onload=function(){if(d.status===200)try{const r=JSON.parse(d.responseText);Y=r,n(r)}catch(r){console.error("Error parsing JSON:",r),m(r)}else console.error("XHR error:",d.status),m(new Error(`XHR error: ${d.status}`))},d.onerror=function(){console.error("XHR error occurred"),m(new Error("XHR error occurred"))},d.send()})}}function ft(f){if(!f)return"";const[n,m,d]=f.split("."),r=new Date(d,n-1,m);if(isNaN(r.getTime()))return f;const a=new Date;if((a-r)/(1e3*60)<=30)return"Just now";if(r.getDate()===a.getDate()&&r.getMonth()===a.getMonth()&&r.getFullYear()===a.getFullYear())return"Today";const C=new Date(a);if(C.setDate(a.getDate()-1),r.getDate()===C.getDate()&&r.getMonth()===C.getMonth()&&r.getFullYear()===C.getFullYear())return"Yesterday";const k=new Date(a);if(k.setDate(a.getDate()-2),r.getDate()===k.getDate()&&r.getMonth()===k.getMonth()&&r.getFullYear()===k.getFullYear())return"Two days ago";const H={year:"numeric",month:"long",day:"numeric"};return r.toLocaleDateString("en-US",H)}function Ve(){const f=new Date,n={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};document.getElementById("current-datetime").textContent=f.toLocaleDateString("en-US",n)}function mt(){document.querySelectorAll(".search-fields input").forEach(n=>{const m=n.id+"_"+Math.random().toString(36).substring(2,9);n.setAttribute("name",m),(n.id==="State"||n.id==="Zip"||n.id==="Date"||n.id==="ST-address"||n.id==="City"||n.id==="Fuel")&&(n.setAttribute("autocomplete","new-password"),n.setAttribute("data-lpignore","true"),n.setAttribute("data-form-type","other"))})}var ut=et('<meta charset="UTF-8" class="svelte-jwqfxm"> <meta name="viewport" content="width=device-width, initial-scale=1.0" class="svelte-jwqfxm"> <link href="https://fonts.googleapis.com/css?family=Mulish" rel="stylesheet" class="svelte-jwqfxm"> <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet" class="svelte-jwqfxm"> <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js" class="svelte-jwqfxm"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" class="svelte-jwqfxm"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js" class="svelte-jwqfxm"><\/script>',1),pt=R('<tr><td colspan="4" class="details-cell svelte-jwqfxm"><div class="details-header svelte-jwqfxm">Details:</div> <div class="details-content svelte-jwqfxm"> <br class="svelte-jwqfxm"> <span class="label svelte-jwqfxm">Trailer No.:</span> <br class="svelte-jwqfxm"> <span class="label svelte-jwqfxm">Full Address:</span> <br class="svelte-jwqfxm"> <span class="label svelte-jwqfxm">Delivered:</span> <span class="label svelte-jwqfxm">Tank:</span> </div></td></tr>'),ht=R('<tr><td class="svelte-jwqfxm"> </td><td class="svelte-jwqfxm"> </td><td class="svelte-jwqfxm"> </td><td class="svelte-jwqfxm"> </td><td class="svelte-jwqfxm"> </td></tr> <!>',1),wt=R('<tr class="svelte-jwqfxm"><td colspan="4" style="text-align: center; padding: 20px;" class="svelte-jwqfxm">No results found</td></tr>'),gt=R('<header class="svelte-jwqfxm"><div class="header-container svelte-jwqfxm"><div class="top-header svelte-jwqfxm"><a class="top-header-link svelte-jwqfxm" href="https://berrys.com">berrys.com</a> <a class="top-header-link svelte-jwqfxm" href=" ">Contact Us</a></div> <div class="header svelte-jwqfxm"><div class="header-background svelte-jwqfxm"></div> <a class="svelte-jwqfxm">Home</a> <a class="svelte-jwqfxm">Inventory</a> <a class="svelte-jwqfxm">Cross-drop</a> <a class="svelte-jwqfxm">Site Data</a> <a class="svelte-jwqfxm">Analytics</a> <input type="text" placeholder="Search..." class="svelte-jwqfxm"> <img alt="Berrys Logo" class="svelte-jwqfxm"></div></div></header> <div class="sub-header-container svelte-jwqfxm"><div class="sub-header svelte-jwqfxm"><h1 class="svelte-jwqfxm">Vehicle Logging</h1> <span class="svelte-jwqfxm">Access key information on each trailer, with real-time access to deliveries,  focusing on trailer ID. See where trailers are located, what they are <br class="svelte-jwqfxm">delivering or a full log on delivery history.</span></div> <div class="breadcrumb svelte-jwqfxm"><a class="svelte-jwqfxm">Home</a> / <span class="svelte-jwqfxm">Vehicle Logging</span></div></div> <main class="svelte-jwqfxm"><div class="main-container svelte-jwqfxm"><label for="search-fields" class="search-label svelte-jwqfxm">Search</label> <div class="search-fields svelte-jwqfxm"><label for="ST-address" class="svelte-jwqfxm">Address</label> <input type="text" id="ST-address" name="ST-address" class="svelte-jwqfxm"> <label for="State" class="svelte-jwqfxm">State</label> <input type="text" id="State" name="State" class="svelte-jwqfxm"> <label for="City" class="svelte-jwqfxm">City</label> <input type="text" id="City" name="City" class="svelte-jwqfxm"> <label for="Trailer_No" class="svelte-jwqfxm">Trailer No</label> <input type="text" id="Trailer_No" name="Trailer_No" class="svelte-jwqfxm"> <label for="Date" class="svelte-jwqfxm">Date</label> <input type="text" id="Date" name="Date" placeholder="DD/MM/YYYY" class="svelte-jwqfxm"> <label for="Fuel" class="svelte-jwqfxm">Fuel</label> <input type="text" id="Fuel" name="Fuel" class="svelte-jwqfxm"></div> <div class="button-container svelte-jwqfxm"><button class="search-button svelte-jwqfxm">Search</button> <button class="clear-button svelte-jwqfxm">Clear</button></div> <div class="table-header svelte-jwqfxm"><div class="live-status svelte-jwqfxm"><div class="toggle-live svelte-jwqfxm"><label for="table-type" class="table-type svelte-jwqfxm">LIVE <span class="live-indicator svelte-jwqfxm"></span></label></div> <label for="table-type" class="table-type svelte-jwqfxm"><span id="current-datetime" class="current-time svelte-jwqfxm"></span></label></div> <div class="export-dropdown svelte-jwqfxm"><button class="export-button svelte-jwqfxm">Export As â–¼</button> <div class="dropdown-content svelte-jwqfxm" id="exportDropdown"><a href=" " class="svelte-jwqfxm">CSV</a> <a href=" " class="svelte-jwqfxm">PDF</a></div></div></div> <table class="svelte-jwqfxm"><thead class="svelte-jwqfxm"><tr class="svelte-jwqfxm"><th class="svelte-jwqfxm">Date</th><th class="svelte-jwqfxm">Time</th><th class="svelte-jwqfxm">City</th><th class="svelte-jwqfxm">Vehicle ID</th><th class="svelte-jwqfxm">Prevented Delivery</th></tr></thead><tbody class="svelte-jwqfxm"><!></tbody></table></div></main> <footer class="svelte-jwqfxm"><div style="display: flex; justify-content: space-between; align-items: center; padding: 0 20px;" class="svelte-jwqfxm"><span style="font-size: 1rem; font-family: Mulish;" class="svelte-jwqfxm">@copyrights Berrys Global Innovations</span> <img alt="Berrys Logo" class="svelte-jwqfxm"></div></footer>',1);function Lt(f,n){at(n,!1);let m=[],d=se([]),r=se([]),a=se({address:"",state:"",city:"",trailer:"",date:"",fuel:""});function B(e){return e%2===0?"row-even":"row-odd"}function le(){j(d,m.filter(e=>{const s=!t(a).address||e.Address&&e.Address.toLowerCase().includes(t(a).address.toLowerCase()),g=!t(a).state||e.State&&e.State.toLowerCase().includes(t(a).state.toLowerCase()),b=!t(a).city||e.City&&e.City.toLowerCase().includes(t(a).city.toLowerCase()),c=!t(a).trailer||e["Trailer No."]&&e["Trailer No."].toLowerCase().includes(t(a).trailer.toLowerCase()),u=!t(a).date||e.Date&&e.Date.includes(t(a).date),x=!t(a).fuel||e["Prevented Delivery "]&&e["Prevented Delivery "].toLowerCase().includes(t(a).fuel.toLowerCase());return s&&g&&b&&c&&u&&x})),j(r,Array(t(d).length).fill(!1)),ie()}function C(){console.log("clearing"),j(a,{address:"",state:"",city:"",trailer:"",date:"",fuel:""}),console.log(t(a)),j(d,[...m]),j(r,Array(t(d).length).fill(!1)),ie(!0)}function k(){showDropdown=!showDropdown}function H(){const e=document.querySelectorAll(".search-fields input");return Array.from(e).some(s=>s.value.trim()!=="")}function re(e){let s=[...t(r)];s[e]=!s[e],j(r,s)}function Ye(){const s=document.querySelector("table").querySelectorAll("tr");let g=[];const b=[];s[0].querySelectorAll("th").forEach(v=>{b.push(v.textContent.trim())}),g.push(b.join(","));for(let v=1;v<s.length;v++){const h=[];s[v].querySelectorAll("td").forEach(V=>{let te=V.textContent.trim().replace(/"/g,'""');h.push(`"${te}"`)}),h.length>0&&g.push(h.join(","))}const u=g.join(`
`),x=new Blob([u],{type:"text/csv;charset=utf-8;"}),p=new Date,_=p.toISOString().split("T")[0],F=p.toTimeString().split(" ")[0].replace(/:/g,"-"),I=`${document.location.pathname.includes("vehicle-logging")?"vehicle_logging":"site_data"}_${_}_${F}.csv`;if("showSaveFilePicker"in window){async function v(){try{const P=await(await window.showSaveFilePicker({suggestedName:I,types:[{description:"CSV File",accept:{"text/csv":[".csv"]}}]})).createWritable();await P.write(x),await P.close()}catch(h){h.name!=="AbortError"&&$()}}v()}else $();function $(){const v=document.createElement("a");v.href=URL.createObjectURL(x),v.setAttribute("download",I),document.body.appendChild(v),v.click(),document.body.removeChild(v)}}async function Re(){const{jsPDF:e}=window.jspdf,s=new e,g=document.querySelector("table");s.setFont("helvetica","bold"),s.setFontSize(16),s.text("Cross Drop Prevention Data",14,15);const b=new Date().toLocaleString();s.setFontSize(10),s.setFont("helvetica","normal"),s.text(`Generated: ${b}`,14,25),s.autoTable({html:g,startY:30,styles:{fontSize:8,cellPadding:2,overflow:"linebreak",halign:"center"},headStyles:{fillColor:[1,75,150],textColor:255,fontSize:8,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:[234,243,252]},margin:{top:30}});const c=new Date,u=c.toISOString().split("T")[0],x=c.toTimeString().split(" ")[0].replace(/:/g,"-"),p=`cross_drop_data_${u}_${x}.pdf`,_=new Blob([s.output("blob")],{type:"application/pdf"});if("showSaveFilePicker"in window)try{const D=await(await window.showSaveFilePicker({suggestedName:p,types:[{description:"PDF File",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await D.write(_),await D.close()}catch(F){F.name!=="AbortError"&&oe(s,p)}else oe(s,p)}function oe(e,s){e.save(s)}function ie(e=!1){const s=document.querySelector(".toggle-live");s&&(!e&&H()?s.style.display="none":s.style.display="block")}ct(async()=>{Ve(),mt(),console.log("Starting data fetch");try{const s=await vt();console.log("Data fetched:",s),m=s,j(d,[...m]),j(r,Array(m.length).fill(!1))}catch(s){console.error("Failed to load data:",s)}const e=setInterval(Ve,1e3);return()=>{clearInterval(e)}}),nt();var ne=gt();it(e=>{var s=ut();lt.title="Vehicle Logging",Me(12),A(e,s)});var O=ae(ne),ce=o(O),de=l(o(ce),2),ve=l(o(de),2);y(ve,"href",`${q??""}/home`);var fe=l(ve,2);y(fe,"href",`${q??""}/inventory`);var me=l(fe,2);y(me,"href",`${q??""}/cross-drops`);var ue=l(me,2);y(ue,"href",`${q??""}/site-data`);var pe=l(ue,2);y(pe,"href",`${q??""}/analytics`);var Be=l(pe,4);y(Be,"src",`${q??""}/images/Midas_Link_logo.png`),i(de),i(ce),i(O);var z=l(O,2),he=l(o(z),2),He=o(he);y(He,"href",`${q??""}/home`),Me(2),i(he),i(z);var U=l(z,2),we=o(U),X=l(o(we),2),G=l(o(X),2);M(G);var J=l(G,4);M(J);var W=l(J,4);M(W);var Z=l(W,4);M(Z);var K=l(Z,4);M(K);var ge=l(K,4);M(ge),i(X);var Q=l(X,2),xe=o(Q),Oe=l(xe,2);i(Q);var ee=l(Q,2),be=l(o(ee),2),je=o(be),ye=l(je,2),qe=o(ye),ze=l(qe,2);i(ye),i(be),i(ee);var _e=l(ee,2),De=l(o(_e)),Ue=o(De);{var Xe=e=>{var s=tt(),g=ae(s);rt(g,1,()=>t(d),ot,(b,c,u)=>{var x=ht(),p=ae(x),_=o(p),F=o(_,!0);i(_);var D=l(_),I=o(D,!0);i(D);var $=l(D),v=o($,!0);i($);var h=l($),P=o(h,!0);i(h);var V=l(h),te=o(V,!0);i(V),i(p);var We=l(p,2);{var Ze=E=>{var S=pt(),Ce=o(S),ke=l(o(Ce),2),Fe=o(ke),$e=l(Fe,4),Ae=l($e,4),Le=l(Ae,4),Ke=l(Le,2);i(ke),i(Ce),i(S),Ne(Qe=>{Ie(S,1,`details-row ${Qe??""}`,"svelte-jwqfxm"),w(Fe,`${t(c).Date??""} | ${(t(c).Time||"")??""} `),w($e,` ${(t(c)["Trailer No."]||"")??""} `),w(Ae,` ${(t(c).Address||"")??""} , ${t(c).City??""} ${t(c).State??""} `),w(Le,` ${(t(c)["Prevented Delivery "]||"")??""} | `),w(Ke,` T${(t(c)["Tank No. "]||"")??""}`)},[()=>B(u)],Pe),T("click",S,()=>re(u)),A(E,S)};Ee(We,E=>{t(r)[u]&&E(Ze)})}Ne((E,S)=>{Ie(p,1,`main-row ${E??""} ${t(r)[u]?"hover-row":""}`,"svelte-jwqfxm"),w(F,S),w(I,t(c).Time),w(v,t(c).City),w(P,t(c)["Trailer No."]),w(te,t(c)["Prevented Delivery "])},[()=>B(u),()=>ft(t(c).Date)],Pe),T("click",p,()=>re(u)),A(b,x)}),A(e,s)},Ge=e=>{var s=wt();A(e,s)};Ee(Ue,e=>{t(d).length>0?e(Xe):e(Ge,!1)})}i(De),i(_e),i(we),i(U);var Se=l(U,2),Te=o(Se),Je=l(o(Te),2);y(Je,"src",`${q??""}/images/logo.png`),i(Te),i(Se),N(G,()=>t(a).address,e=>L(a,t(a).address=e)),N(J,()=>t(a).state,e=>L(a,t(a).state=e)),N(W,()=>t(a).city,e=>L(a,t(a).city=e)),N(Z,()=>t(a).trailer,e=>L(a,t(a).trailer=e)),N(K,()=>t(a).date,e=>L(a,t(a).date=e)),N(ge,()=>t(a).fuel,e=>L(a,t(a).fuel=e)),T("click",xe,le),T("click",Oe,C),T("click",je,k),T("click",qe,Ye),T("click",ze,Re),A(f,ne),st()}export{Lt as component,At as universal};
