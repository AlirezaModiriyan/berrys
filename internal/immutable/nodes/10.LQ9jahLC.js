import{t as R,a as M,c as bt,d as xt}from"../chunks/C4XabTBO.js";import"../chunks/gq36_m--.js";import{an as yt,ae as zt,a9 as st,x as y,f as fe,ah as pe,aa as lt,aG as _t,s as l,c,q as me,o as e,r as n,ak as d,ai as wt,ay as A,aj as tt}from"../chunks/DiniuTc6.js";import{s as z}from"../chunks/BAPyS8wT.js";import{i as at}from"../chunks/BkPkjMix.js";import{e as rt,i as ot}from"../chunks/DO2HwEvT.js";import{h as St}from"../chunks/C50FTuje.js";import{s as S,r as W}from"../chunks/BWlCbUqV.js";import{b as K,s as De}from"../chunks/DtIEtmtG.js";import{e as _}from"../chunks/B5DXvJvt.js";import{p as Y,b as Q}from"../chunks/B3-ZGBcf.js";import{i as it}from"../chunks/DAvOP9A0.js";import{o as Dt}from"../chunks/BFksb1Wo.js";import{s as Ct}from"../chunks/CGYIL0w8.js";import{b as j}from"../chunks/Br0UuklX.js";function kt(g,r,f){var v=yt(g,r);v&&v.set&&(g[r]=f,zt(()=>{g[r]=null}))}const Tt=!0,Qt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Tt},Symbol.toStringTag,{value:"Module"}));var Ft=R('<div class="dropdown-item svelte-g9tlcb"> </div>'),Lt=R('<label> </label> <div class="custom-dropdown svelte-g9tlcb"><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="svelte-g9tlcb"> <div></div></div>',1);function ve(g,r){st(r,!1);let f=Y(r,"id",8,""),v=Y(r,"label",8,""),p=Y(r,"placeholder",8,"Select or type"),a=Y(r,"options",24,()=>[]),U=Y(r,"value",12,""),ee=Y(r,"onChange",8,()=>{});const O=!0;let D=y(!1),E=y(),Z=y([...a()]);function te(){d(D,!e(D))}function ae(b){U(b),ee()(b),d(D,!1)}function se(){const b=U().toLowerCase();d(Z,a().filter(B=>B.toLowerCase().includes(b))),d(D,!0)}function he(b){e(E)&&!e(E).contains(b.target)&&d(D,!1)}it();var le=Lt();_("click",_t,he);var q=fe(le),re=c(q,!0);n(q);var N=l(q,2),C=c(N);W(C);var H=l(C,2);let V;return rt(H,5,()=>e(Z),ot,(b,B)=>{var $=Ft(),oe=c($,!0);n($),pe(G=>{Ct($,`display: ${G??""}`),z(oe,e(B))},[()=>e(B).toLowerCase().includes(U().toLowerCase())?"block":"none"],me),_("click",$,()=>ae(e(B))),M(b,$)}),n(H),n(N),Q(N,b=>d(E,b),()=>e(E)),pe(b=>{S(q,"for",f()),z(re,v()),S(C,"id",f()),S(C,"placeholder",p()),V=De(H,1,"dropdown-content svelte-g9tlcb",null,V,b)},[()=>({show:e(D)})],me),K(C,U),_("input",C,se),_("focus",C,()=>d(D,!0)),_("click",C,te),M(g,le),kt(r,"prerender",O),lt({prerender:O})}let ue=[];async function $t(){if(ue.length>0)return ue;try{const g=await fetch("/table_data/site_data.json");if(!g.ok)throw new Error(`HTTP error! status: ${g.status}`);const r=await g.json();return ue=r,r}catch(g){return console.error("Error fetching site data:",g),new Promise((r,f)=>{const v=new XMLHttpRequest;v.open("GET","table_data/site_data.json",!0),v.onload=function(){if(v.status===200)try{const p=JSON.parse(v.responseText);ue=p,r(p)}catch(p){console.error("Error parsing JSON:",p),f(p)}else console.error("XHR error:",v.status),f(new Error(`XHR error: ${v.status}`))},v.onerror=function(){console.error("XHR error occurred"),f(new Error("XHR error occurred"))},v.send()})}}function At(){document.querySelectorAll(".search-fields input").forEach(r=>{r.setAttribute("autocomplete","off"),r.setAttribute("autocorrect","off"),r.setAttribute("autocapitalize","off"),r.setAttribute("spellcheck","false");const f=r.id+"_"+Math.random().toString(36).substring(2,9);r.setAttribute("name",f),(r.id==="State"||r.id==="Zip"||r.id==="Business-unit"||r.id==="ST-address"||r.id==="City")&&(r.setAttribute("autocomplete","new-password"),r.setAttribute("data-lpignore","true"),r.setAttribute("data-form-type","other"))})}var jt=bt('<meta charset="UTF-8" class="svelte-az49xd"> <meta name="viewport" content="width=device-width, initial-scale=1.0" class="svelte-az49xd"> <link href="https://fonts.googleapis.com/css?family=Mulish" rel="stylesheet" class="svelte-az49xd"> <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet" class="svelte-az49xd"> <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js" class="svelte-az49xd"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" class="svelte-az49xd"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js" class="svelte-az49xd"><\/script>',1),Mt=R('<tr><td colspan="4" class="details-cell svelte-az49xd"><div class="details-header svelte-az49xd">Details:</div> <div class="details-content svelte-az49xd"> <br class="svelte-az49xd"> <span class="label svelte-az49xd">Site code:</span> <span class="label svelte-az49xd">Business Unit:</span> <br class="svelte-az49xd"> <span class="label svelte-az49xd">Full Address:</span> <br class="svelte-az49xd"> <span class="label svelte-az49xd">Fuel dropped:</span> <span class="label svelte-az49xd">Tank:</span> </div></td></tr>'),Ut=R('<tr><td class="svelte-az49xd"> </td><td class="svelte-az49xd"> </td><td class="svelte-az49xd"> </td><td class="svelte-az49xd"> </td></tr> <!>',1),Et=R('<tr class="svelte-az49xd"><td colspan="4" style="text-align: center; padding: 20px;" class="svelte-az49xd">No results found</td></tr>'),Bt=R('<header class="svelte-az49xd"><div class="header-container svelte-az49xd"><div class="top-header svelte-az49xd"><a class="top-header-link svelte-az49xd" href="https://berrys.com">berrys.com</a> <a class="top-header-link svelte-az49xd" href=" ">Contact Us</a></div> <div class="header svelte-az49xd"><div class="header-background svelte-az49xd"></div> <a class="svelte-az49xd">Home</a> <a class="svelte-az49xd">Inventory</a> <a class="svelte-az49xd">Cross-drop</a> <a class="svelte-az49xd">Vehicle Logging</a> <a class="svelte-az49xd">Analytics</a> <input type="text" placeholder="Search..." class="svelte-az49xd"> <img alt="Berrys Logo" class="svelte-az49xd"></div></div></header> <div class="sub-header-container svelte-az49xd"><div class="sub-header svelte-az49xd"><h1 class="svelte-az49xd">Site Data</h1> <span class="svelte-az49xd">Gather insight into your deliveries by site location. You can dive into delivery information by State, Zip code, Street Address and City. This <br class="svelte-az49xd">will offer you vital information on drop frequency, scheduling and billing reports.</span></div> <div class="breadcrumb svelte-az49xd"><a class="svelte-az49xd">Home</a> / <span class="svelte-az49xd">Site Data</span></div></div> <main class="svelte-az49xd"><div class="main-container svelte-az49xd"><label class="search-label svelte-az49xd" for="search-fields">Search</label> <div class="search-fields svelte-az49xd"><!> <label for="ST-address" class="svelte-az49xd">Address</label> <input type="text" id="ST-address" name="ST-address" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="svelte-az49xd"> <!> <!> <!> <label for="Zip" class="svelte-az49xd">Zip</label> <input type="text" id="Zip" name="Zip" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="svelte-az49xd"> <label for="Date" class="svelte-az49xd">Date</label> <input type="text" id="Date" name="Date" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="DD/MM/YYYY" class="svelte-az49xd"> <label for="Fuel" class="svelte-az49xd">Fuel</label> <input type="text" id="Fuel" name="Fuel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="svelte-az49xd"></div> <div class="button-container svelte-az49xd"><button class="search-button svelte-az49xd">Search</button> <button class="clear-button svelte-az49xd">Clear</button></div> <div class="table-header svelte-az49xd"><div class="live-status svelte-az49xd"><div class="toggle-live svelte-az49xd"><label for="table-type" class="table-type svelte-az49xd">LIVE <span class="live-indicator svelte-az49xd"></span></label></div> <label for="table-type" class="table-type svelte-az49xd"><span id="current-datetime" class="current-time svelte-az49xd"></span></label></div> <div class="export-dropdown svelte-az49xd"><button class="export-button svelte-az49xd">Export As â–¼</button> <div class="dropdown-content svelte-az49xd" id="exportDropdown"><a href=" " class="svelte-az49xd">CSV</a> <a href=" " class="svelte-az49xd">PDF</a></div></div></div> <table class="svelte-az49xd"><thead class="svelte-az49xd"><tr class="svelte-az49xd"><th class="svelte-az49xd">Date</th><th class="svelte-az49xd">Delivered at</th><th class="svelte-az49xd">Site Code</th><th class="svelte-az49xd">Fuel dropped</th></tr></thead><tbody class="svelte-az49xd"><!></tbody></table></div></main> <footer class="svelte-az49xd"><div style="display: flex; justify-content: space-between; align-items: center; padding: 0 20px;" class="svelte-az49xd"><span style="font-size: 1rem; font-family: Mulish;" class="svelte-az49xd">@copyrights Berrys Global Innovations</span> <img alt="Berrys Logo" class="svelte-az49xd"></div></footer>',1);function ea(g,r){st(r,!1);let f=[],v=y([]),p=y([]),a=y({businessUnit:"",address:"",state:"",city:"",site:"",zip:"",date:"",fuel:""}),U=y([]),ee=y([]),O=y([]),D=y([]),E=y(),Z=y(),te=y(),ae=y();function se(t){return t%2===0?"row-even":"row-odd"}function he(){d(v,f.filter(t=>{const s=!e(a).businessUnit||t.BusinessUnitName&&t.BusinessUnitName.toLowerCase().includes(e(a).businessUnit.toLowerCase()),i=!e(a).address||t.Address&&t.Address.toLowerCase().includes(e(a).address.toLowerCase()),k=!e(a).state||t.State&&t.State.toLowerCase().includes(e(a).state.toLowerCase()),o=!e(a).city||t.City&&t.City.toLowerCase().includes(e(a).city.toLowerCase()),u=!e(a).site||t.SiteCode&&t.SiteCode.toLowerCase().includes(e(a).site.toLowerCase()),T=!e(a).zip||t.Zip&&t.Zip.toString().includes(e(a).zip),m=!e(a).date||t.Date&&t.Date.includes(e(a).date),x=!e(a).fuel||t.Delivered&&t.Delivered.toLowerCase().includes(e(a).fuel.toLowerCase());return s&&i&&k&&o&&u&&T&&m&&x})),d(p,Array(e(v).length).fill(!1)),V()}function le(){d(a,{businessUnit:"",address:"",state:"",city:"",site:"",zip:"",date:"",fuel:""}),d(v,[...f]),d(p,Array(e(v).length).fill(!1)),V(!0)}function q(t){if(!t)return"";const[s,i,k]=t.split("/"),o=new Date(k,i-1,s);if(isNaN(o.getTime()))return t;const u=new Date;if((u-o)/(1e3*60)<=30)return"Just now";if(o.getDate()===u.getDate()&&o.getMonth()===u.getMonth()&&o.getFullYear()===u.getFullYear())return"Today";const x=new Date(u);if(x.setDate(u.getDate()-1),o.getDate()===x.getDate()&&o.getMonth()===x.getMonth()&&o.getFullYear()===x.getFullYear())return"Yesterday";const w=new Date(u);if(w.setDate(u.getDate()-2),o.getDate()===w.getDate()&&o.getMonth()===w.getMonth()&&o.getFullYear()===w.getFullYear())return"Two days ago";const F={year:"numeric",month:"long",day:"numeric"};return o.toLocaleDateString("en-US",F)}function re(t){let s=[...e(p)];s[t]=!s[t],d(p,s)}function N(){const t=new Date,s={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};document.getElementById("current-datetime").textContent=t.toLocaleDateString("en-US",s)}function C(){const s=document.querySelector("table").querySelectorAll("tr");let i=[];const k=[];s[0].querySelectorAll("th").forEach(h=>{k.push(h.textContent.trim())}),i.push(k.join(","));for(let h=1;h<s.length;h++){const L=[];s[h].querySelectorAll("td").forEach(we=>{let Se=we.textContent.trim().replace(/"/g,'""');L.push(`"${Se}"`)}),L.length>0&&i.push(L.join(","))}const u=i.join(`
`),T=new Blob([u],{type:"text/csv;charset=utf-8;"}),m=new Date,x=m.toISOString().split("T")[0],w=m.toTimeString().split(" ")[0].replace(/:/g,"-"),de=`${document.location.pathname.includes("vehicle-logging")?"vehicle_logging":"site_data"}_${x}_${w}.csv`;if("showSaveFilePicker"in window){async function h(){try{const X=await(await window.showSaveFilePicker({suggestedName:de,types:[{description:"CSV File",accept:{"text/csv":[".csv"]}}]})).createWritable();await X.write(T),await X.close()}catch(L){L.name!=="AbortError"&&P()}}h()}else P();function P(){const h=document.createElement("a");h.href=URL.createObjectURL(T),h.setAttribute("download",de),document.body.appendChild(h),h.click(),document.body.removeChild(h)}}function H(){return e(a).businessUnit.trim()!==""||e(a).address.trim()!==""||e(a).state.trim()!==""||e(a).city.trim()!==""||e(a).site.trim()!==""||e(a).zip.trim()!==""||e(a).date.trim()!==""||e(a).fuel.trim()!==""}function V(t=!1){const s=document.querySelector(".toggle-live");s&&(!t&&H()?s.style.display="none":s.style.display="block")}Dt(async()=>{N(),At(),console.log("Starting data fetch");try{const s=await $t();console.log("Data fetched:",s),f=s,d(v,[...f]),d(p,Array(f.length).fill(!1)),d(ee,[...new Set(f.map(i=>i.BusinessUnitName).filter(i=>i&&i.trim()!==""))]),d(U,[...new Set(f.map(i=>i.City).filter(i=>i&&i.trim()!==""))]),d(O,[...new Set(f.map(i=>i.State).filter(i=>i&&i.trim()!==""))]),d(D,[...new Set(f.map(i=>i.SiteCode).filter(i=>i&&i.trim()!==""))])}catch(s){console.error("Failed to load data:",s)}const t=setInterval(N,1e3);return()=>{clearInterval(t)}});function b(){document.getElementById("exportDropdown").classList.toggle("show")}async function B(){const{jsPDF:t}=window.jspdf,s=new t,i=document.querySelector("table");s.setFont("helvetica","bold"),s.setFontSize(16),s.text("Cross Drop Prevention Data",14,15);const k=new Date().toLocaleString();s.setFontSize(10),s.setFont("helvetica","normal"),s.text(`Generated: ${k}`,14,25),s.autoTable({html:i,startY:30,styles:{fontSize:8,cellPadding:2,overflow:"linebreak",halign:"center"},headStyles:{fillColor:[1,75,150],textColor:255,fontSize:8,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:[234,243,252]},margin:{top:30}});const o=new Date,u=o.toISOString().split("T")[0],T=o.toTimeString().split(" ")[0].replace(/:/g,"-"),m=`cross_drop_data_${u}_${T}.pdf`,x=new Blob([s.output("blob")],{type:"application/pdf"});if("showSaveFilePicker"in window)try{const F=await(await window.showSaveFilePicker({suggestedName:m,types:[{description:"PDF File",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await F.write(x),await F.close()}catch(w){w.name!=="AbortError"&&$(s,m)}else $(s,m)}function $(t,s){t.save(s)}it();var oe=Bt();St(t=>{var s=jt();wt.title="Site Data",tt(12),M(t,s)});var G=fe(oe),Ce=c(G),ke=l(c(Ce),2),Te=l(c(ke),2);S(Te,"href",`${j??""}/home`);var Fe=l(Te,2);S(Fe,"href",`${j??""}/inventory`);var Le=l(Fe,2);S(Le,"href",`${j??""}/cross-drops`);var $e=l(Le,2);S($e,"href",`${j??""}/vehicle-logging`);var Ae=l($e,2);S(Ae,"href",`${j??""}/analytics`);var nt=l(Ae,4);S(nt,"src",`${j??""}/images/Midas_Link_logo.png`),n(ke),n(Ce),n(G);var ge=l(G,2),je=l(c(ge),2),ct=c(je);S(ct,"href",`${j??""}/home`),tt(2),n(je),n(ge);var be=l(ge,2),Me=c(be),xe=l(c(Me),2),Ue=c(xe);ve(Ue,{id:"Business-unit",label:"Business Unit",get options(){return e(ee)},get value(){return e(a).businessUnit},set value(t){A(a,e(a).businessUnit=t)},$$legacy:!0});var ie=l(Ue,4);W(ie),Q(ie,t=>d(E,t),()=>e(E));var Ee=l(ie,2);ve(Ee,{id:"State",label:"State",get options(){return e(O)},get value(){return e(a).state},set value(t){A(a,e(a).state=t)},$$legacy:!0});var Be=l(Ee,2);ve(Be,{id:"City",label:"City",get options(){return e(U)},get value(){return e(a).city},set value(t){A(a,e(a).city=t)},$$legacy:!0});var Ie=l(Be,2);ve(Ie,{id:"Site",label:"Site",get options(){return e(D)},get value(){return e(a).site},set value(t){A(a,e(a).site=t)},$$legacy:!0});var ne=l(Ie,4);W(ne),Q(ne,t=>d(Z,t),()=>e(Z));var ce=l(ne,4);W(ce),Q(ce,t=>d(te,t),()=>e(te));var ye=l(ce,4);W(ye),Q(ye,t=>d(ae,t),()=>e(ae)),n(xe);var ze=l(xe,2),qe=c(ze),dt=l(qe,2);n(ze);var _e=l(ze,2),Ne=l(c(_e),2),Pe=c(Ne),Ye=l(Pe,2),Re=c(Ye),vt=l(Re,2);n(Ye),n(Ne),n(_e);var Oe=l(_e,2),Ze=l(c(Oe)),ut=c(Ze);{var ft=t=>{var s=xt(),i=fe(s);rt(i,1,()=>e(v),ot,(k,o,u)=>{var T=Ut(),m=fe(T),x=c(m),w=c(x,!0);n(x);var F=l(x),de=c(F,!0);n(F);var P=l(F),h=c(P,!0);n(P);var L=l(P),X=c(L,!0);n(L),n(m);var we=l(m,2);{var Se=J=>{var I=Mt(),Ge=c(I),Xe=l(c(Ge),2),Je=c(Xe),We=l(Je,4),Ke=l(We,2),Qe=l(Ke,4),et=l(Qe,4),ht=l(et,2);n(Xe),n(Ge),n(I),pe(gt=>{De(I,1,`details-row ${gt??""}`,"svelte-az49xd"),z(Je,`${e(o).Date??""} | ${(e(o)["Delivery Start "]||"")??""}  to ${(e(o)["Delivery End"]||"")??""} `),z(We,` ${(e(o).SiteCode||"")??""} | `),z(Ke,` ${(e(o).BusinessUnitName||"")??""} `),z(Qe,` ${(e(o).Address||"")??""} , ${e(o).City??""} ${e(o).State??""} | ${e(o).Zip??""} `),z(et,` ${(e(o).Delivered||"")??""} | `),z(ht,` T${(e(o).TankNumber||"")??""}`)},[()=>se(u)],me),_("click",I,()=>re(u)),M(J,I)};at(we,J=>{e(p)[u]&&J(Se)})}pe((J,I)=>{De(m,1,`main-row ${J??""} ${e(p)[u]?"hover-row":""}`,"svelte-az49xd"),z(w,I),z(de,e(o)["Delivery End"]),z(h,e(o).SiteCode),z(X,e(o).Delivered)},[()=>se(u),()=>q(e(o).Date)],me),_("click",m,()=>re(u)),M(k,T)}),M(t,s)},pt=t=>{var s=Et();M(t,s)};at(ut,t=>{e(v).length>0?t(ft):t(pt,!1)})}n(Ze),n(Oe),n(Me),n(be);var He=l(be,2),Ve=c(He),mt=l(c(Ve),2);S(mt,"src",`${j??""}/images/logo.png`),n(Ve),n(He),K(ie,()=>e(a).address,t=>A(a,e(a).address=t)),K(ne,()=>e(a).zip,t=>A(a,e(a).zip=t)),K(ce,()=>e(a).date,t=>A(a,e(a).date=t)),K(ye,()=>e(a).fuel,t=>A(a,e(a).fuel=t)),_("click",qe,he),_("click",dt,le),_("click",Pe,b),_("click",Re,C),_("click",vt,B),M(g,oe),lt()}export{ea as component,Qt as universal};
