import{t as J,a as j,c as ft,d as ht}from"../chunks/BH13Z9z8.js";import"../chunks/DNyCRkWS.js";import{_ as pt,ap as oe,a as t,a0 as mt,au as gt,ar as a,c as r,aw as M,m as ie,s as F,av as Oe,r as n,aq as ze,A as Ue}from"../chunks/bqrR2dOs.js";import{s as S}from"../chunks/C93Zg23q.js";import{i as Xe}from"../chunks/B8PK6R75.js";import{e as yt,i as bt}from"../chunks/BCehYjPx.js";import{h as _t}from"../chunks/CeRXAMUy.js";import{a as wt,s as h,r as V,b as Ge}from"../chunks/DnL43C8x.js";import{e as p}from"../chunks/C5hrIerT.js";import{b as I}from"../chunks/DaeiHhzB.js";import{i as Dt}from"../chunks/0IjRvDC7.js";import{o as St}from"../chunks/BUq4umeo.js";import{g as kt}from"../chunks/0KinHf2G.js";import{b as v}from"../chunks/DoZX0yr1.js";import{g as Tt}from"../chunks/B1Fa5ciL.js";import{p as xt}from"../chunks/Bhea550G.js";const Ct=!0,Kt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ct},Symbol.toStringTag,{value:"Module"}));let G=[];async function $t(){if(G.length>0)return G;try{const f=await fetch("/table_data/vehicle_logging.json");if(!f.ok)throw new Error(`HTTP error! status: ${f.status}`);const c=await f.json();return G=c,c}catch(f){return console.error("Error fetching vehicleData data:",f),new Promise((c,y)=>{const m=new XMLHttpRequest;m.open("GET","table_data/vehicle_logging.json",!0),m.onload=function(){if(m.status===200)try{const i=JSON.parse(m.responseText);G=i,c(i)}catch(i){console.error("Error parsing JSON:",i),y(i)}else console.error("XHR error:",m.status),y(new Error(`XHR error: ${m.status}`))},m.onerror=function(){console.error("XHR error occurred"),y(new Error("XHR error occurred"))},m.send()})}}function Lt(f){if(!f)return"";const[c,y,m]=f.split("."),i=new Date(m,c-1,y);if(isNaN(i.getTime()))return f;const u=new Date;if((u-i)/(1e3*60)<=30)return"Just now";if(i.getDate()===u.getDate()&&i.getMonth()===u.getMonth()&&i.getFullYear()===u.getFullYear())return"Today";const A=new Date(u);if(A.setDate(u.getDate()-1),i.getDate()===A.getDate()&&i.getMonth()===A.getMonth()&&i.getFullYear()===A.getFullYear())return"Yesterday";const b=new Date(u);if(b.setDate(u.getDate()-2),i.getDate()===b.getDate()&&i.getMonth()===b.getMonth()&&i.getFullYear()===b.getFullYear())return"Two days ago";const W={year:"numeric",month:"long",day:"numeric"};return i.toLocaleDateString("en-US",W)}function Je(){const f=document.getElementById("current-datetime");if(f){const c=new Date,y={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};f.textContent=c.toLocaleDateString("en-US",y)}}function Et(){document.querySelectorAll(".search-fields input").forEach(c=>{const y=c.id+"_"+Math.random().toString(36).substring(2,9);c.setAttribute("name",y),(c.id==="State"||c.id==="Zip"||c.id==="Date"||c.id==="ST-address"||c.id==="City"||c.id==="Fuel")&&(c.setAttribute("autocomplete","new-password"),c.setAttribute("data-lpignore","true"),c.setAttribute("data-form-type","other"))})}var Ft=ft('<meta charset="UTF-8" class="svelte-35llvn"> <meta name="viewport" content="width=device-width, initial-scale=1.0" class="svelte-35llvn"> <link href="https://fonts.googleapis.com/css?family=Mulish" rel="stylesheet" class="svelte-35llvn"> <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet" class="svelte-35llvn"> <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js" class="svelte-35llvn"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" class="svelte-35llvn"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js" class="svelte-35llvn"><\/script>',1),At=J('<tr><td colspan="4" class="details-cell svelte-35llvn"><div class="details-header svelte-35llvn">Details:</div> <div class="details-content svelte-35llvn"> <br class="svelte-35llvn"> <span class="label svelte-35llvn">Trailer No.:</span> <br class="svelte-35llvn"> <span class="label svelte-35llvn">Full Address:</span> <br class="svelte-35llvn"> <span class="label svelte-35llvn">Delivered:</span> <span class="label svelte-35llvn">Tank:</span> </div></td><td class="svelte-35llvn"><button class="more-details svelte-35llvn">View Vehicle Timeline</button></td></tr>'),Nt=J('<tr><td class="svelte-35llvn"> </td><td class="svelte-35llvn"> </td><td class="svelte-35llvn"> </td><td class="svelte-35llvn"> </td><td class="svelte-35llvn"> </td></tr> <!>',1),Pt=J('<tr class="svelte-35llvn"><td colspan="4" style="text-align: center; padding: 20px;" class="svelte-35llvn">No results found</td></tr>'),jt=J(`<header class="svelte-35llvn"><div class="header-container svelte-35llvn"><div class="top-header svelte-35llvn"><a class="top-header-link svelte-35llvn" href="https://berrys.com">berrys.com</a> <a class="top-header-link svelte-35llvn" href=" ">Contact Us</a></div> <div class="header svelte-35llvn"><div class="header-background svelte-35llvn"></div> <div class="hamburger-menu svelte-35llvn" id="hamburger-menu"><span class="svelte-35llvn"></span> <span class="svelte-35llvn"></span> <span class="svelte-35llvn"></span></div> <a class="svelte-35llvn">Home</a> <a class="svelte-35llvn">Inventory</a> <a class="svelte-35llvn">Cross-Drop Prevention</a> <a class="svelte-35llvn">Site Data</a> <a class="svelte-35llvn">Analytics</a> <input type="text" placeholder="Search..." class="svelte-35llvn"> <img alt="Berrys Logo" class="svelte-35llvn"></div></div></header> <div class="mobile-sidebar svelte-35llvn" id="mobile-sidebar"><a class="svelte-35llvn">Home</a> <a class="svelte-35llvn">Vehicle Logging</a> <a class="svelte-35llvn">Cross-Drop Prevention</a> <a class="svelte-35llvn">Site Data</a> <a class="svelte-35llvn">Inventory</a> <a class="svelte-35llvn">Analytics</a></div> <div class="overlay svelte-35llvn" id="overlay"></div> <div class="sub-header-container svelte-35llvn"><div class="sub-header svelte-35llvn"><h1 class="svelte-35llvn">Vehicle Logging</h1> <span class="svelte-35llvn">Access key information on each trailer, with real-time access to
      deliveries, focusing on trailer ID. See where trailers are located, what
      they are delivering or a full log on delivery history.</span></div> <div class="breadcrumb svelte-35llvn"><a class="svelte-35llvn">Home</a> / <span class="svelte-35llvn">Vehicle Logging</span></div></div> <main class="svelte-35llvn"><div class="main-container svelte-35llvn"><label for="search-fields" class="search-label svelte-35llvn">Search</label> <div class="search-fields svelte-35llvn"><label for="ST-address" class="svelte-35llvn">Address</label> <input type="text" id="ST-address" name="ST-address" class="svelte-35llvn"> <label for="State" class="svelte-35llvn">State</label> <input type="text" id="State" name="State" class="svelte-35llvn"> <label for="City" class="svelte-35llvn">City</label> <input type="text" id="City" name="City" class="svelte-35llvn"> <label for="Trailer_No" class="svelte-35llvn">Trailer No</label> <input type="text" id="Trailer_No" name="Trailer_No" class="svelte-35llvn"> <label for="Date" class="svelte-35llvn">Date</label> <input type="text" id="Date" name="Date" placeholder="DD/MM/YYYY" class="svelte-35llvn"> <label for="Fuel" class="svelte-35llvn">Fuel</label> <input type="text" id="Fuel" name="Fuel" class="svelte-35llvn"></div> <div class="button-container svelte-35llvn"><button class="search-button svelte-35llvn">Search</button> <button class="clear-button svelte-35llvn">Clear</button></div> <div class="table-header svelte-35llvn"><div class="live-status svelte-35llvn"><div class="toggle-live svelte-35llvn"><label for="table-type" class="table-type svelte-35llvn">LIVE <span class="live-indicator svelte-35llvn"></span></label></div> <label for="table-type" class="table-type svelte-35llvn"><span id="current-datetime" class="current-time svelte-35llvn"></span></label></div> <div class="export-dropdown svelte-35llvn"><button class="export-button svelte-35llvn">Export As â–¼</button> <div class="dropdown-content svelte-35llvn" id="exportDropdown"><a href=" " class="svelte-35llvn">CSV</a> <a href=" " class="svelte-35llvn">PDF</a></div></div></div> <table class="svelte-35llvn"><thead class="svelte-35llvn"><tr class="svelte-35llvn"><th class="svelte-35llvn">Date</th><th class="svelte-35llvn">Time</th><th class="svelte-35llvn">City</th><th class="svelte-35llvn">Vehicle ID</th><th class="svelte-35llvn">Prevented Delivery</th></tr></thead><tbody class="svelte-35llvn"><!></tbody></table></div></main> <footer class="svelte-35llvn"><div style="display: flex; justify-content: space-between; align-items: center; padding: 0 20px;" class="svelte-35llvn"><span style="font-size: 1rem; font-family: Mulish;" class="svelte-35llvn">@copyrights Berrys Global Innovations</span> <img alt="Berrys Logo" class="svelte-35llvn"></div></footer>`,1);function Qt(f,c){pt(c,!1);const y=kt(xt).url.pathname;function m(e){Tt(`${v}/vehicle/${e["Trailer No."]}`,{state:{from:y,trailer:e["Trailer No."]}})}let i=[],u=ie([]),C=ie([]),s=ie({address:"",state:"",city:"",trailer:"",date:"",fuel:""});function A(e){return e%2===0?"row-even":"row-odd"}function b(){F(u,i.filter(e=>{const l=!t(s).address||e.Address&&e.Address.toLowerCase().includes(t(s).address.toLowerCase()),_=!t(s).state||e.State&&e.State.toLowerCase().includes(t(s).state.toLowerCase()),w=!t(s).city||e.City&&e.City.toLowerCase().includes(t(s).city.toLowerCase()),o=!t(s).trailer||e["Trailer No."]&&e["Trailer No."].toLowerCase().includes(t(s).trailer.toLowerCase()),g=!t(s).date||e.Date&&e.Date.includes(t(s).date),$=!t(s).fuel||e["Prevented Delivery "]&&e["Prevented Delivery "].toLowerCase().includes(t(s).fuel.toLowerCase());return l&&_&&w&&o&&g&&$})),F(C,Array(t(u).length).fill(!1)),de()}function W(){console.log("clearing"),F(s,{address:"",state:"",city:"",trailer:"",date:"",fuel:""}),console.log(t(s)),F(u,[...i]),F(C,Array(t(u).length).fill(!1)),de(!0)}function We(){document.getElementById("exportDropdown").classList.toggle("show")}function Ze(){const e=document.querySelectorAll(".search-fields input");return Array.from(e).some(l=>l.value.trim()!=="")}function ce(e){let l=[...t(C)];l[e]=!l[e],F(C,l)}function Ke(){const l=document.querySelector("table").cloneNode(!0);l.querySelectorAll(".more-details").forEach(d=>{d.parentNode.textContent=""});const w=l.querySelectorAll("tr");let o=[];const g=[];w[0].querySelectorAll("th").forEach(d=>{g.push(d.textContent.trim())}),o.push(g.join(","));for(let d=1;d<w.length;d++){const x=[];w[d].querySelectorAll("td").forEach(se=>{let re=se.textContent.trim().replace(/"/g,'""');x.push(`"${re}"`)}),x.length>0&&o.push(x.join(","))}const k=o.join(`
`),L=new Blob([k],{type:"text/csv;charset=utf-8;"}),E=new Date,D=E.toISOString().split("T")[0],T=E.toTimeString().split(" ")[0].replace(/:/g,"-"),X=`${document.location.pathname.includes("vehicle-logging")?"vehicle_logging":"site_data"}_${D}_${T}.csv`;if("showSaveFilePicker"in window){async function d(){try{const q=await(await window.showSaveFilePicker({suggestedName:X,types:[{description:"CSV File",accept:{"text/csv":[".csv"]}}]})).createWritable();await q.write(L),await q.close()}catch(x){x.name!=="AbortError"&&P()}}d()}else P();function P(){const d=document.createElement("a");d.href=URL.createObjectURL(L),d.setAttribute("download",X),document.body.appendChild(d),d.click(),document.body.removeChild(d)}}function Qe(){const e=document.getElementById("hamburger-menu"),l=document.getElementById("mobile-sidebar"),_=document.getElementById("overlay");e.addEventListener("click",function(){l.classList.toggle("active"),_.style.display=l.classList.contains("active")?"block":"none"}),_.addEventListener("click",function(){l.classList.remove("active"),_.style.display="none"}),l.querySelectorAll("a").forEach(o=>{o.addEventListener("click",function(){l.classList.remove("active"),_.style.display="none"})})}async function et(){try{const{jsPDF:e}=window.jspdf;if(!e)throw new Error("jsPDF library not found");const l=new e;l.setFont("helvetica","bold"),l.setFontSize(16),l.text("Vehicle Logging Data",14,15);const _=new Date().toLocaleString();l.setFontSize(10),l.setFont("helvetica","normal"),l.text(`Generated: ${_}`,14,25);const w=document.querySelector("table");if(!w)throw new Error("Table not found");const o=w.cloneNode(!0);o.querySelectorAll(".more-details").forEach(D=>{const T=D.closest("td, th");T&&(T.textContent="")}),l.autoTable({html:o,startY:30,styles:{fontSize:8,cellPadding:2,overflow:"linebreak",halign:"center"},headStyles:{fillColor:[1,75,150],textColor:255,fontSize:8,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:[234,243,252]},margin:{top:30}});const $=new Date,k=$.toISOString().split("T")[0],L=$.toTimeString().split(" ")[0].replace(/:/g,"-"),E=`vehicle_logging_${k}_${L}.pdf`;if("showSaveFilePicker"in window)try{const T=await(await window.showSaveFilePicker({suggestedName:E,types:[{description:"PDF File",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await T.write(l.output("blob")),await T.close()}catch(D){console.error("File save error:",D),ve(l,E)}else ve(l,E);return!0}catch(e){return console.error("PDF generation failed:",e),!1}}function ve(e,l){e.save(l)}function de(e=!1){const l=document.querySelector(".toggle-live");l&&(!e&&Ze()?l.style.display="none":l.style.display="block")}St(async()=>{Qe(),Je(),Et(),console.log("Starting data fetch");try{const l=await $t();console.log("Data fetched:",l),i=l,F(u,[...i]),F(C,Array(i.length).fill(!1))}catch(l){console.error("Failed to load data:",l)}const e=setInterval(Je,1e3);return()=>{clearInterval(e)}}),Dt();var ue=jt();_t(e=>{var l=Ft();gt.title="Vehicle Logging",Oe(12),j(e,l)});var Z=oe(ue),fe=r(Z),he=a(r(fe),2),pe=r(he);wt(pe,`      background: url(${v??""}/svg/Vector_1.svg) no-repeat left center; mask-image: url(${v??""}/svg/Vector_1.svg'); -webkit-mask-image: url(${v??""}/svg/Vector_1.svg);`);var me=a(pe,4);h(me,"href",`${v??""}/home`);var ge=a(me,2);h(ge,"href",`${v??""}/inventory`);var ye=a(ge,2);h(ye,"href",`${v??""}/cross-drops`);var be=a(ye,2);h(be,"href",`${v??""}/site-data`);var _e=a(be,2);h(_e,"href",`${v??""}/analytics`);var tt=a(_e,4);h(tt,"src",`${v??""}/images/Midas_Link_logo.png`),n(he),n(fe),n(Z);var K=a(Z,2),we=r(K);h(we,"href",`${v??""}/home`);var De=a(we,2);h(De,"href",`${v??""}/vehicle-logging`);var Se=a(De,2);h(Se,"href",`${v??""}/cross-drops`);var ke=a(Se,2);h(ke,"href",`${v??""}/site-data`);var Te=a(ke,2);h(Te,"href",`${v??""}/inventory`);var lt=a(Te,2);h(lt,"href",`${v??""}/analytics`),n(K);var Q=a(K,4),xe=a(r(Q),2),at=r(xe);h(at,"href",`${v??""}/home`),Oe(2),n(xe),n(Q);var ee=a(Q,2),Ce=r(ee),te=a(r(Ce),2),R=a(r(te),2);V(R);var B=a(R,4);V(B);var H=a(B,4);V(H);var O=a(H,4);V(O);var z=a(O,4);V(z);var $e=a(z,4);V($e),n(te);var le=a(te,2),Le=r(le),st=a(Le,2);n(le);var ae=a(le,2),Ee=a(r(ae),2),Fe=r(Ee),Ae=a(Fe,2),Ne=r(Ae),rt=a(Ne,2);n(Ae),n(Ee),n(ae);var Pe=a(ae,2),je=a(r(Pe)),nt=r(je);{var ot=e=>{var l=ht(),_=oe(l);yt(_,1,()=>t(u),bt,(w,o,g)=>{var $=Nt(),k=oe($),L=r(k),E=r(L,!0);n(L);var D=a(L),T=r(D,!0);n(D);var U=a(D),X=r(U,!0);n(U);var P=a(U),d=r(P,!0);n(P);var x=a(P),q=r(x,!0);n(x),n(k);var se=a(k,2);{var re=Y=>{var N=At(),ne=r(N),Ie=a(r(ne),2),qe=r(Ie),Ye=a(qe,4),Re=a(Ye,4),Be=a(Re,4),vt=a(Be,2);n(Ie),n(ne);var He=a(ne),dt=r(He);n(He),n(N),ze(ut=>{Ge(N,1,`details-row ${ut??""}`,"svelte-35llvn"),S(qe,`${t(o).Date??""} | ${(t(o).Time||"")??""} `),S(Ye,` ${(t(o)["Trailer No."]||"")??""} `),S(Re,` ${(t(o).Address||"")??""} , ${t(o).City??""} ${t(o).State??""} `),S(Be,` ${(t(o)["Prevented Delivery "]||"")??""} | `),S(vt,` T${(t(o)["Tank No. "]||"")??""}`)},[()=>A(g)],Ue),p("click",dt,()=>m(t(o))),p("click",N,()=>ce(g)),j(Y,N)};Xe(se,Y=>{t(C)[g]&&Y(re)})}ze((Y,N)=>{Ge(k,1,`main-row ${Y??""} ${t(C)[g]?"hover-row":""}`,"svelte-35llvn"),S(E,N),S(T,t(o).Time),S(X,t(o).City),S(d,t(o)["Trailer No."]),S(q,t(o)["Prevented Delivery "])},[()=>A(g),()=>Lt(t(o).Date)],Ue),p("click",k,()=>ce(g)),j(w,$)}),j(e,l)},it=e=>{var l=Pt();j(e,l)};Xe(nt,e=>{t(u).length>0?e(ot):e(it,!1)})}n(je),n(Pe),n(Ce),n(ee);var Me=a(ee,2),Ve=r(Me),ct=a(r(Ve),2);h(ct,"src",`${v??""}/images/logo.png`),n(Ve),n(Me),I(R,()=>t(s).address,e=>M(s,t(s).address=e)),p("keydown",R,e=>{e.key==="Enter"&&b()}),I(B,()=>t(s).state,e=>M(s,t(s).state=e)),p("keydown",B,e=>{e.key==="Enter"&&b()}),I(H,()=>t(s).city,e=>M(s,t(s).city=e)),p("keydown",H,e=>{e.key==="Enter"&&b()}),I(O,()=>t(s).trailer,e=>M(s,t(s).trailer=e)),p("keydown",O,e=>{e.key==="Enter"&&b()}),I(z,()=>t(s).date,e=>M(s,t(s).date=e)),p("keydown",z,e=>{e.key==="Enter"&&b()}),I($e,()=>t(s).fuel,e=>M(s,t(s).fuel=e)),p("click",Le,b),p("click",st,W),p("click",Fe,We),p("click",Ne,Ke),p("click",rt,et),j(f,ue),mt()}export{Qt as component,Kt as universal};
