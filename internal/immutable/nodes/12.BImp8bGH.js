import{t as R,a as L,c as tt,d as st}from"../chunks/B6y01qbr.js";import"../chunks/DtxX-JL7.js";import{aq as at,av as se,g as t,ar as it,ay as lt,c as r,ax as i,aC as j,m as ae,s as w,az as Ne,r as n,aw as Pe,v as Ee}from"../chunks/CmiwTXNc.js";import{s as b}from"../chunks/CLestFuT.js";import{i as Ve}from"../chunks/DEghan36.js";import{e as rt,i as nt}from"../chunks/RcmTF89e.js";import{h as ot}from"../chunks/BxHmYC3j.js";import{s as D,r as M}from"../chunks/5gdX85T8.js";import{b as N,s as Ie}from"../chunks/Bzi7mCuK.js";import{e as C}from"../chunks/Dmg5bgrf.js";import{s as ct}from"../chunks/4myQYQrf.js";import{i as dt}from"../chunks/C760GAoK.js";import{o as vt}from"../chunks/DNV5QSkq.js";import{b as m}from"../chunks/Df20D5RJ.js";const ut=!0,Nt=Object.freeze(Object.defineProperty({__proto__:null,prerender:ut},Symbol.toStringTag,{value:"Module"}));let Y=[];async function pt(){if(Y.length>0)return Y;try{const u=await fetch("/table_data/vehicle_logging.json");if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);const o=await u.json();return Y=siteData,o}catch(u){return console.error("Error fetching vehicleData data:",u),new Promise((o,p)=>{const d=new XMLHttpRequest;d.open("GET","table_data/vehicle_logging.json",!0),d.onload=function(){if(d.status===200)try{const l=JSON.parse(d.responseText);Y=l,o(l)}catch(l){console.error("Error parsing JSON:",l),p(l)}else console.error("XHR error:",d.status),p(new Error(`XHR error: ${d.status}`))},d.onerror=function(){console.error("XHR error occurred"),p(new Error("XHR error occurred"))},d.send()})}}function ft(u){if(!u)return"";const[o,p,d]=u.split("."),l=new Date(d,o-1,p);if(isNaN(l.getTime()))return u;const s=new Date;if((s-l)/(1e3*60)<=30)return"Just now";if(l.getDate()===s.getDate()&&l.getMonth()===s.getMonth()&&l.getFullYear()===s.getFullYear())return"Today";const k=new Date(s);if(k.setDate(s.getDate()-1),l.getDate()===k.getDate()&&l.getMonth()===k.getMonth()&&l.getFullYear()===k.getFullYear())return"Yesterday";const $=new Date(s);if($.setDate(s.getDate()-2),l.getDate()===$.getDate()&&l.getMonth()===$.getMonth()&&l.getFullYear()===$.getFullYear())return"Two days ago";const H={year:"numeric",month:"long",day:"numeric"};return l.toLocaleDateString("en-US",H)}function Ye(){const u=new Date,o={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};document.getElementById("current-datetime").textContent=u.toLocaleDateString("en-US",o)}function ht(){document.querySelectorAll(".search-fields input").forEach(o=>{const p=o.id+"_"+Math.random().toString(36).substring(2,9);o.setAttribute("name",p),(o.id==="State"||o.id==="Zip"||o.id==="Date"||o.id==="ST-address"||o.id==="City"||o.id==="Fuel")&&(o.setAttribute("autocomplete","new-password"),o.setAttribute("data-lpignore","true"),o.setAttribute("data-form-type","other"))})}var mt=tt('<meta charset="UTF-8" class="svelte-inq6si"> <meta name="viewport" content="width=device-width, initial-scale=1.0" class="svelte-inq6si"> <link href="https://fonts.googleapis.com/css?family=Mulish" rel="stylesheet" class="svelte-inq6si"> <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet" class="svelte-inq6si"> <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js" class="svelte-inq6si"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" class="svelte-inq6si"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js" class="svelte-inq6si"><\/script>',1),gt=R('<tr><td colspan="4" class="details-cell svelte-inq6si"><div class="details-header svelte-inq6si">Details:</div> <div class="details-content svelte-inq6si"> <br class="svelte-inq6si"> <span class="label svelte-inq6si">Trailer No.:</span> <br class="svelte-inq6si"> <span class="label svelte-inq6si">Full Address:</span> <br class="svelte-inq6si"> <span class="label svelte-inq6si">Delivered:</span> <span class="label svelte-inq6si">Tank:</span> </div></td></tr>'),bt=R('<tr><td class="svelte-inq6si"> </td><td class="svelte-inq6si"> </td><td class="svelte-inq6si"> </td><td class="svelte-inq6si"> </td><td class="svelte-inq6si"> </td></tr> <!>',1),yt=R('<tr class="svelte-inq6si"><td colspan="4" style="text-align: center; padding: 20px;" class="svelte-inq6si">No results found</td></tr>'),qt=R('<header class="svelte-inq6si"><div class="header-container svelte-inq6si"><div class="top-header svelte-inq6si"><a class="top-header-link svelte-inq6si" href="https://berrys.com">berrys.com</a> <a class="top-header-link svelte-inq6si" href=" ">Contact Us</a></div> <div class="header svelte-inq6si"><div class="header-background svelte-inq6si"></div> <a class="svelte-inq6si">Home</a> <a class="svelte-inq6si">Inventory</a> <a class="svelte-inq6si">Cross-drop</a> <a class="svelte-inq6si">Site Data</a> <a class="svelte-inq6si">Analytics</a> <input type="text" placeholder="Search..." class="svelte-inq6si"> <img alt="Berrys Logo" class="svelte-inq6si"></div></div></header> <div class="sub-header-container svelte-inq6si"><div class="sub-header svelte-inq6si"><h1 class="svelte-inq6si">Vehicle Logging</h1> <span class="svelte-inq6si">Access key information on each trailer, with real-time access to deliveries,  focusing on trailer ID. See where trailers are located, what they are <br class="svelte-inq6si">delivering or a full log on delivery history.</span></div> <div class="breadcrumb svelte-inq6si"><a class="svelte-inq6si">Home</a> / <span class="svelte-inq6si">Vehicle Logging</span></div></div> <main class="svelte-inq6si"><div class="main-container svelte-inq6si"><label for="search-fields" class="search-label svelte-inq6si">Search</label> <div class="search-fields svelte-inq6si"><label for="ST-address" class="svelte-inq6si">Address</label> <input type="text" id="ST-address" name="ST-address" class="svelte-inq6si"> <label for="State" class="svelte-inq6si">State</label> <input type="text" id="State" name="State" class="svelte-inq6si"> <label for="City" class="svelte-inq6si">City</label> <input type="text" id="City" name="City" class="svelte-inq6si"> <label for="Trailer_No" class="svelte-inq6si">Trailer No</label> <input type="text" id="Trailer_No" name="Trailer_No" class="svelte-inq6si"> <label for="Date" class="svelte-inq6si">Date</label> <input type="text" id="Date" name="Date" placeholder="DD/MM/YYYY" class="svelte-inq6si"> <label for="Fuel" class="svelte-inq6si">Fuel</label> <input type="text" id="Fuel" name="Fuel" class="svelte-inq6si"></div> <div class="button-container svelte-inq6si"><button class="search-button svelte-inq6si">Search</button> <button class="clear-button svelte-inq6si">Clear</button></div> <div class="table-header svelte-inq6si"><div class="live-status svelte-inq6si"><div class="toggle-live svelte-inq6si"><label for="table-type" class="table-type svelte-inq6si">LIVE <span class="live-indicator svelte-inq6si"></span></label></div> <label for="table-type" class="table-type svelte-inq6si"><span id="current-datetime" class="current-time svelte-inq6si"></span></label></div> <div class="export-dropdown svelte-inq6si"><button class="export-button svelte-inq6si">Export As â–¼</button> <div class="dropdown-content svelte-inq6si" id="exportDropdown"><a href=" " class="svelte-inq6si">CSV</a> <a href=" " class="svelte-inq6si">PDF</a></div></div></div> <table class="svelte-inq6si"><thead class="svelte-inq6si"><tr class="svelte-inq6si"><th class="svelte-inq6si">Date</th><th class="svelte-inq6si">Time</th><th class="svelte-inq6si">City</th><th class="svelte-inq6si">Vehicle ID</th><th class="svelte-inq6si">Prevented Delivery</th></tr></thead><tbody class="svelte-inq6si"><!></tbody></table></div></main> <footer class="svelte-inq6si"><div style="display: flex; justify-content: space-between; align-items: center; padding: 0 20px;" class="svelte-inq6si"><span style="font-size: 1rem; font-family: Mulish;" class="svelte-inq6si">@copyrights Berrys Global Innovations</span> <img alt="Berrys Logo" class="svelte-inq6si"></div></footer>',1);function Pt(u,o){at(o,!1);let p=[],d=ae([]),l=ae([]),s=ae({address:"",state:"",city:"",trailer:"",date:"",fuel:""});function B(e){return e%2===0?"row-even":"row-odd"}function ie(){w(d,p.filter(e=>{const a=!t(s).address||e.Address&&e.Address.toLowerCase().includes(t(s).address.toLowerCase()),y=!t(s).state||e.State&&e.State.toLowerCase().includes(t(s).state.toLowerCase()),_=!t(s).city||e.City&&e.City.toLowerCase().includes(t(s).city.toLowerCase()),c=!t(s).trailer||e["Trailer No."]&&e["Trailer No."].toLowerCase().includes(t(s).trailer.toLowerCase()),f=!t(s).date||e.Date&&e.Date.includes(t(s).date),q=!t(s).fuel||e["Prevented Delivery "]&&e["Prevented Delivery "].toLowerCase().includes(t(s).fuel.toLowerCase());return a&&y&&_&&c&&f&&q})),w(l,Array(t(d).length).fill(!1)),ne()}function k(){console.log("clearing"),w(s,{address:"",state:"",city:"",trailer:"",date:"",fuel:""}),console.log(t(s)),w(d,[...p]),w(l,Array(t(d).length).fill(!1)),ne(!0)}function $(){showDropdown=!showDropdown}function H(){const e=document.querySelectorAll(".search-fields input");return Array.from(e).some(a=>a.value.trim()!=="")}function le(e){let a=[...t(l)];a[e]=!a[e],w(l,a)}function Re(){const a=document.querySelector("table").querySelectorAll("tr");let y=[];const _=[];a[0].querySelectorAll("th").forEach(v=>{_.push(v.textContent.trim())}),y.push(_.join(","));for(let v=1;v<a.length;v++){const g=[];a[v].querySelectorAll("td").forEach(I=>{let te=I.textContent.trim().replace(/"/g,'""');g.push(`"${te}"`)}),g.length>0&&y.push(g.join(","))}const f=y.join(`
`),q=new Blob([f],{type:"text/csv;charset=utf-8;"}),h=new Date,S=h.toISOString().split("T")[0],F=h.toTimeString().split(" ")[0].replace(/:/g,"-"),V=`${document.location.pathname.includes("vehicle-logging")?"vehicle_logging":"site_data"}_${S}_${F}.csv`;if("showSaveFilePicker"in window){async function v(){try{const P=await(await window.showSaveFilePicker({suggestedName:V,types:[{description:"CSV File",accept:{"text/csv":[".csv"]}}]})).createWritable();await P.write(q),await P.close()}catch(g){g.name!=="AbortError"&&A()}}v()}else A();function A(){const v=document.createElement("a");v.href=URL.createObjectURL(q),v.setAttribute("download",V),document.body.appendChild(v),v.click(),document.body.removeChild(v)}}async function Be(){const{jsPDF:e}=window.jspdf,a=new e,y=document.querySelector("table");a.setFont("helvetica","bold"),a.setFontSize(16),a.text("Cross Drop Prevention Data",14,15);const _=new Date().toLocaleString();a.setFontSize(10),a.setFont("helvetica","normal"),a.text(`Generated: ${_}`,14,25),a.autoTable({html:y,startY:30,styles:{fontSize:8,cellPadding:2,overflow:"linebreak",halign:"center"},headStyles:{fillColor:[1,75,150],textColor:255,fontSize:8,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:[234,243,252]},margin:{top:30}});const c=new Date,f=c.toISOString().split("T")[0],q=c.toTimeString().split(" ")[0].replace(/:/g,"-"),h=`cross_drop_data_${f}_${q}.pdf`,S=new Blob([a.output("blob")],{type:"application/pdf"});if("showSaveFilePicker"in window)try{const T=await(await window.showSaveFilePicker({suggestedName:h,types:[{description:"PDF File",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await T.write(S),await T.close()}catch(F){F.name!=="AbortError"&&re(a,h)}else re(a,h)}function re(e,a){e.save(a)}function ne(e=!1){const a=document.querySelector(".toggle-live");a&&(!e&&H()?a.style.display="none":a.style.display="block")}vt(async()=>{Ye(),ht(),console.log("Starting data fetch");try{const a=await pt();console.log("Data fetched:",a),p=a,w(d,[...p]),w(l,Array(p.length).fill(!1))}catch(a){console.error("Failed to load data:",a)}const e=setInterval(Ye,1e3);return()=>{clearInterval(e)}}),dt();var oe=qt();ot(e=>{var a=mt();lt.title="Vehicle Logging",Ne(12),L(e,a)});var z=se(oe),ce=r(z),de=i(r(ce),2),ve=r(de);ct(ve,`      background: url(${m??""}/svg/Vector_1.svg) no-repeat left center; mask-image: url(${m??""}/svg/Vector_1.svg'); -webkit-mask-image: url(${m??""}/svg/Vector_1.svg);`);var ue=i(ve,2);D(ue,"href",`${m??""}/home`);var pe=i(ue,2);D(pe,"href",`${m??""}/inventory`);var fe=i(pe,2);D(fe,"href",`${m??""}/cross-drops`);var he=i(fe,2);D(he,"href",`${m??""}/site-data`);var me=i(he,2);D(me,"href",`${m??""}/analytics`);var He=i(me,4);D(He,"src",`${m??""}/images/Midas_Link_logo.png`),n(de),n(ce),n(z);var O=i(z,2),ge=i(r(O),2),ze=r(ge);D(ze,"href",`${m??""}/home`),Ne(2),n(ge),n(O);var U=i(O,2),be=r(U),X=i(r(be),2),G=i(r(X),2);M(G);var J=i(G,4);M(J);var W=i(J,4);M(W);var Z=i(W,4);M(Z);var K=i(Z,4);M(K);var ye=i(K,4);M(ye),n(X);var Q=i(X,2),qe=r(Q),Oe=i(qe,2);n(Q);var ee=i(Q,2),_e=i(r(ee),2),we=r(_e),De=i(we,2),Se=r(De),Ue=i(Se,2);n(De),n(_e),n(ee);var Te=i(ee,2),xe=i(r(Te)),Xe=r(xe);{var Ge=e=>{var a=st(),y=se(a);rt(y,1,()=>t(d),nt,(_,c,f)=>{var q=bt(),h=se(q),S=r(h),F=r(S,!0);n(S);var T=i(S),V=r(T,!0);n(T);var A=i(T),v=r(A,!0);n(A);var g=i(A),P=r(g,!0);n(g);var I=i(g),te=r(I,!0);n(I),n(h);var Ze=i(h,2);{var Ke=E=>{var x=gt(),$e=r(x),Fe=i(r($e),2),Ae=r(Fe),Le=i(Ae,4),je=i(Le,4),Me=i(je,4),Qe=i(Me,2);n(Fe),n($e),n(x),Pe(et=>{Ie(x,1,`details-row ${et??""}`,"svelte-inq6si"),b(Ae,`${t(c).Date??""} | ${(t(c).Time||"")??""} `),b(Le,` ${(t(c)["Trailer No."]||"")??""} `),b(je,` ${(t(c).Address||"")??""} , ${t(c).City??""} ${t(c).State??""} `),b(Me,` ${(t(c)["Prevented Delivery "]||"")??""} | `),b(Qe,` T${(t(c)["Tank No. "]||"")??""}`)},[()=>B(f)],Ee),C("click",x,()=>le(f)),L(E,x)};Ve(Ze,E=>{t(l)[f]&&E(Ke)})}Pe((E,x)=>{Ie(h,1,`main-row ${E??""} ${t(l)[f]?"hover-row":""}`,"svelte-inq6si"),b(F,x),b(V,t(c).Time),b(v,t(c).City),b(P,t(c)["Trailer No."]),b(te,t(c)["Prevented Delivery "])},[()=>B(f),()=>ft(t(c).Date)],Ee),C("click",h,()=>le(f)),L(_,q)}),L(e,a)},Je=e=>{var a=yt();L(e,a)};Ve(Xe,e=>{t(d).length>0?e(Ge):e(Je,!1)})}n(xe),n(Te),n(be),n(U);var Ce=i(U,2),ke=r(Ce),We=i(r(ke),2);D(We,"src",`${m??""}/images/logo.png`),n(ke),n(Ce),N(G,()=>t(s).address,e=>j(s,t(s).address=e)),N(J,()=>t(s).state,e=>j(s,t(s).state=e)),N(W,()=>t(s).city,e=>j(s,t(s).city=e)),N(Z,()=>t(s).trailer,e=>j(s,t(s).trailer=e)),N(K,()=>t(s).date,e=>j(s,t(s).date=e)),N(ye,()=>t(s).fuel,e=>j(s,t(s).fuel=e)),C("click",qe,ie),C("click",Oe,k),C("click",we,$),C("click",Se,Re),C("click",Ue,Be),L(u,oe),it()}export{Pt as component,Nt as universal};
