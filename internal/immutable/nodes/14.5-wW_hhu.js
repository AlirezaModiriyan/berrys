import{t as J,a as P,c as ut,d as ft}from"../chunks/BH13Z9z8.js";import"../chunks/DNyCRkWS.js";import{_ as ht,ap as oe,a as t,a0 as pt,au as mt,ar as s,c as r,aw as j,m as ne,s as E,av as Oe,r as i,aq as ze,A as Ue}from"../chunks/bqrR2dOs.js";import{s as D}from"../chunks/C93Zg23q.js";import{i as Xe}from"../chunks/B8PK6R75.js";import{e as yt,i as bt}from"../chunks/BCehYjPx.js";import{h as qt}from"../chunks/CeRXAMUy.js";import{a as _t,s as f,r as M,b as Ge}from"../chunks/DnL43C8x.js";import{e as h}from"../chunks/C5hrIerT.js";import{b as V}from"../chunks/DaeiHhzB.js";import{i as wt}from"../chunks/0IjRvDC7.js";import{o as Dt}from"../chunks/BUq4umeo.js";import{g as St}from"../chunks/0KinHf2G.js";import{b as d}from"../chunks/TF2-WX2M.js";import{g as kt}from"../chunks/B_cMoKtz.js";import{p as Tt}from"../chunks/BCoaKnBs.js";const xt=!0,Kt=Object.freeze(Object.defineProperty({__proto__:null,prerender:xt},Symbol.toStringTag,{value:"Module"}));let G=[];async function Ct(){if(G.length>0)return G;try{const u=await fetch("/table_data/vehicle_logging.json");if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);const c=await u.json();return G=c,c}catch(u){return console.error("Error fetching vehicleData data:",u),new Promise((c,y)=>{const p=new XMLHttpRequest;p.open("GET","table_data/vehicle_logging.json",!0),p.onload=function(){if(p.status===200)try{const n=JSON.parse(p.responseText);G=n,c(n)}catch(n){console.error("Error parsing JSON:",n),y(n)}else console.error("XHR error:",p.status),y(new Error(`XHR error: ${p.status}`))},p.onerror=function(){console.error("XHR error occurred"),y(new Error("XHR error occurred"))},p.send()})}}function $t(u){if(!u)return"";const[c,y,p]=u.split("."),n=new Date(p,c-1,y);if(isNaN(n.getTime()))return u;const g=new Date;if((g-n)/(1e3*60)<=30)return"Just now";if(n.getDate()===g.getDate()&&n.getMonth()===g.getMonth()&&n.getFullYear()===g.getFullYear())return"Today";const F=new Date(g);if(F.setDate(g.getDate()-1),n.getDate()===F.getDate()&&n.getMonth()===F.getMonth()&&n.getFullYear()===F.getFullYear())return"Yesterday";const b=new Date(g);if(b.setDate(g.getDate()-2),n.getDate()===b.getDate()&&n.getMonth()===b.getMonth()&&n.getFullYear()===b.getFullYear())return"Two days ago";const W={year:"numeric",month:"long",day:"numeric"};return n.toLocaleDateString("en-US",W)}function Je(){const u=document.getElementById("current-datetime");if(u){const c=new Date,y={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};u.textContent=c.toLocaleDateString("en-US",y)}}function Lt(){document.querySelectorAll(".search-fields input").forEach(c=>{const y=c.id+"_"+Math.random().toString(36).substring(2,9);c.setAttribute("name",y),(c.id==="State"||c.id==="Zip"||c.id==="Date"||c.id==="ST-address"||c.id==="City"||c.id==="Fuel")&&(c.setAttribute("autocomplete","new-password"),c.setAttribute("data-lpignore","true"),c.setAttribute("data-form-type","other"))})}var Et=ut('<meta charset="UTF-8" class="svelte-li2qg4"> <meta name="viewport" content="width=device-width, initial-scale=1.0" class="svelte-li2qg4"> <link href="https://fonts.googleapis.com/css?family=Mulish" rel="stylesheet" class="svelte-li2qg4"> <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet" class="svelte-li2qg4"> <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js" class="svelte-li2qg4"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" class="svelte-li2qg4"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js" class="svelte-li2qg4"><\/script>',1),Ft=J('<tr><td colspan="4" class="details-cell svelte-li2qg4"><div class="details-header svelte-li2qg4">Details:</div> <div class="details-content svelte-li2qg4"> <br class="svelte-li2qg4"> <span class="label svelte-li2qg4">Trailer No.:</span> <br class="svelte-li2qg4"> <span class="label svelte-li2qg4">Full Address:</span> <br class="svelte-li2qg4"> <span class="label svelte-li2qg4">Delivered:</span> <span class="label svelte-li2qg4">Tank:</span> </div></td><td class="svelte-li2qg4"><button class="more-details svelte-li2qg4">View Vehicle Timeline</button></td></tr>'),At=J('<tr><td class="svelte-li2qg4"> </td><td class="svelte-li2qg4"> </td><td class="svelte-li2qg4"> </td><td class="svelte-li2qg4"> </td><td class="svelte-li2qg4"> </td></tr> <!>',1),Nt=J('<tr class="svelte-li2qg4"><td colspan="4" style="text-align: center; padding: 20px;" class="svelte-li2qg4">No results found</td></tr>'),Pt=J(`<header class="svelte-li2qg4"><div class="header-container svelte-li2qg4"><div class="top-header svelte-li2qg4"><a class="top-header-link svelte-li2qg4" href="https://berrys.com">berrys.com</a> <a class="top-header-link svelte-li2qg4" href=" ">Contact Us</a></div> <div class="header svelte-li2qg4"><div class="header-background svelte-li2qg4"></div> <div class="hamburger-menu svelte-li2qg4" id="hamburger-menu"><span class="svelte-li2qg4"></span> <span class="svelte-li2qg4"></span> <span class="svelte-li2qg4"></span></div> <a class="svelte-li2qg4">Home</a> <a class="svelte-li2qg4">Inventory</a> <a class="svelte-li2qg4">Cross-Drop Prevention</a> <a class="svelte-li2qg4">Site Data</a> <a class="svelte-li2qg4">Analytics</a> <input type="text" placeholder="Search..." class="svelte-li2qg4"> <img alt="Berrys Logo" class="svelte-li2qg4"></div></div></header> <div class="mobile-sidebar svelte-li2qg4" id="mobile-sidebar"><a class="svelte-li2qg4">Home</a> <a class="svelte-li2qg4">Vehicle Logging</a> <a class="svelte-li2qg4">Cross-Drop Prevention</a> <a class="svelte-li2qg4">Site Data</a> <a class="svelte-li2qg4">Inventory</a> <a class="svelte-li2qg4">Analytics</a></div> <div class="overlay svelte-li2qg4" id="overlay"></div> <div class="sub-header-container svelte-li2qg4"><div class="sub-header svelte-li2qg4"><h1 class="svelte-li2qg4">Vehicle Logging</h1> <span class="svelte-li2qg4">Access key information on each trailer, with real-time access to
      deliveries, focusing on trailer ID. See where trailers are located, what
      they are delivering or a full log on delivery history.</span></div> <div class="breadcrumb svelte-li2qg4"><a class="svelte-li2qg4">Home</a> / <span class="svelte-li2qg4">Vehicle Logging</span></div></div> <main class="svelte-li2qg4"><div class="main-container svelte-li2qg4"><label for="search-fields" class="search-label svelte-li2qg4">Search</label> <div class="search-fields svelte-li2qg4"><label for="ST-address" class="svelte-li2qg4">Address</label> <input type="text" id="ST-address" name="ST-address" class="svelte-li2qg4"> <label for="State" class="svelte-li2qg4">State</label> <input type="text" id="State" name="State" class="svelte-li2qg4"> <label for="City" class="svelte-li2qg4">City</label> <input type="text" id="City" name="City" class="svelte-li2qg4"> <label for="Trailer_No" class="svelte-li2qg4">Trailer No</label> <input type="text" id="Trailer_No" name="Trailer_No" class="svelte-li2qg4"> <label for="Date" class="svelte-li2qg4">Date</label> <input type="text" id="Date" name="Date" placeholder="DD/MM/YYYY" class="svelte-li2qg4"> <label for="Fuel" class="svelte-li2qg4">Fuel</label> <input type="text" id="Fuel" name="Fuel" class="svelte-li2qg4"></div> <div class="button-container svelte-li2qg4"><button class="search-button svelte-li2qg4">Search</button> <button class="clear-button svelte-li2qg4">Clear</button></div> <div class="table-header svelte-li2qg4"><div class="live-status svelte-li2qg4"><div class="toggle-live svelte-li2qg4"><label for="table-type" class="table-type svelte-li2qg4">LIVE <span class="live-indicator svelte-li2qg4"></span></label></div> <label for="table-type" class="table-type svelte-li2qg4"><span id="current-datetime" class="current-time svelte-li2qg4"></span></label></div> <div class="export-dropdown svelte-li2qg4"><button class="export-button svelte-li2qg4">Export As â–¼</button> <div class="dropdown-content svelte-li2qg4" id="exportDropdown"><a href=" " class="svelte-li2qg4">CSV</a> <a href=" " class="svelte-li2qg4">PDF</a></div></div></div> <table class="svelte-li2qg4"><thead class="svelte-li2qg4"><tr class="svelte-li2qg4"><th class="svelte-li2qg4">Date</th><th class="svelte-li2qg4">Time</th><th class="svelte-li2qg4">City</th><th class="svelte-li2qg4">Vehicle ID</th><th class="svelte-li2qg4">Prevented Delivery</th></tr></thead><tbody class="svelte-li2qg4"><!></tbody></table></div></main> <footer class="svelte-li2qg4"><div style="display: flex; justify-content: space-between; align-items: center; padding: 0 20px;" class="svelte-li2qg4"><span style="font-size: 1rem; font-family: Mulish;" class="svelte-li2qg4">@copyrights Berrys Global Innovations</span> <img alt="Berrys Logo" class="svelte-li2qg4"></div></footer>`,1);function Qt(u,c){ht(c,!1);const y=St(Tt).url.pathname;function p(e){kt(`${d}/vehicle/${e["Trailer No."]}`,{state:{from:y,trailer:e["Trailer No."]}})}let n=[],g=ne([]),x=ne([]),l=ne({address:"",state:"",city:"",trailer:"",date:"",fuel:""});function F(e){return e%2===0?"row-even":"row-odd"}function b(){E(g,n.filter(e=>{const a=!t(l).address||e.Address&&e.Address.toLowerCase().includes(t(l).address.toLowerCase()),q=!t(l).state||e.State&&e.State.toLowerCase().includes(t(l).state.toLowerCase()),_=!t(l).city||e.City&&e.City.toLowerCase().includes(t(l).city.toLowerCase()),o=!t(l).trailer||e["Trailer No."]&&e["Trailer No."].toLowerCase().includes(t(l).trailer.toLowerCase()),m=!t(l).date||e.Date&&e.Date.includes(t(l).date),C=!t(l).fuel||e["Prevented Delivery "]&&e["Prevented Delivery "].toLowerCase().includes(t(l).fuel.toLowerCase());return a&&q&&_&&o&&m&&C})),E(x,Array(t(g).length).fill(!1)),ve()}function W(){console.log("clearing"),E(l,{address:"",state:"",city:"",trailer:"",date:"",fuel:""}),console.log(t(l)),E(g,[...n]),E(x,Array(t(g).length).fill(!1)),ve(!0)}function We(){document.getElementById("exportDropdown").classList.toggle("show")}function Ze(){const e=document.querySelectorAll(".search-fields input");return Array.from(e).some(a=>a.value.trim()!=="")}function ce(e){let a=[...t(x)];a[e]=!a[e],E(x,a)}function Ke(){const a=document.querySelector("table").cloneNode(!0);a.querySelectorAll(".more-details").forEach(v=>{v.parentNode.textContent=""});const _=a.querySelectorAll("tr");let o=[];const m=[];_[0].querySelectorAll("th").forEach(v=>{m.push(v.textContent.trim())}),o.push(m.join(","));for(let v=1;v<_.length;v++){const T=[];_[v].querySelectorAll("td").forEach(le=>{let re=le.textContent.trim().replace(/"/g,'""');T.push(`"${re}"`)}),T.length>0&&o.push(T.join(","))}const S=o.join(`
`),$=new Blob([S],{type:"text/csv;charset=utf-8;"}),L=new Date,w=L.toISOString().split("T")[0],k=L.toTimeString().split(" ")[0].replace(/:/g,"-"),X=`${document.location.pathname.includes("vehicle-logging")?"vehicle_logging":"site_data"}_${w}_${k}.csv`;if("showSaveFilePicker"in window){async function v(){try{const I=await(await window.showSaveFilePicker({suggestedName:X,types:[{description:"CSV File",accept:{"text/csv":[".csv"]}}]})).createWritable();await I.write($),await I.close()}catch(T){T.name!=="AbortError"&&N()}}v()}else N();function N(){const v=document.createElement("a");v.href=URL.createObjectURL($),v.setAttribute("download",X),document.body.appendChild(v),v.click(),document.body.removeChild(v)}}function Qe(){const e=document.getElementById("hamburger-menu"),a=document.getElementById("mobile-sidebar"),q=document.getElementById("overlay");e.addEventListener("click",function(){a.classList.toggle("active"),q.style.display=a.classList.contains("active")?"block":"none"}),q.addEventListener("click",function(){a.classList.remove("active"),q.style.display="none"}),a.querySelectorAll("a").forEach(o=>{o.addEventListener("click",function(){a.classList.remove("active"),q.style.display="none"})})}async function et(){try{const{jsPDF:e}=window.jspdf;if(!e)throw new Error("jsPDF library not found");const a=new e;a.setFont("helvetica","bold"),a.setFontSize(16),a.text("Vehicle Logging Data",14,15);const q=new Date().toLocaleString();a.setFontSize(10),a.setFont("helvetica","normal"),a.text(`Generated: ${q}`,14,25);const _=document.querySelector("table");if(!_)throw new Error("Table not found");const o=_.cloneNode(!0);o.querySelectorAll(".more-details").forEach(w=>{const k=w.closest("td, th");k&&(k.textContent="")}),a.autoTable({html:o,startY:30,styles:{fontSize:8,cellPadding:2,overflow:"linebreak",halign:"center"},headStyles:{fillColor:[1,75,150],textColor:255,fontSize:8,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:[234,243,252]},margin:{top:30}});const C=new Date,S=C.toISOString().split("T")[0],$=C.toTimeString().split(" ")[0].replace(/:/g,"-"),L=`vehicle_logging_${S}_${$}.pdf`;if("showSaveFilePicker"in window)try{const k=await(await window.showSaveFilePicker({suggestedName:L,types:[{description:"PDF File",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await k.write(a.output("blob")),await k.close()}catch(w){console.error("File save error:",w),de(a,L)}else de(a,L);return!0}catch(e){return console.error("PDF generation failed:",e),!1}}function de(e,a){e.save(a)}function ve(e=!1){const a=document.querySelector(".toggle-live");a&&(!e&&Ze()?a.style.display="none":a.style.display="block")}Dt(async()=>{Qe(),Je(),Lt(),console.log("Starting data fetch");try{const a=await Ct();console.log("Data fetched:",a),n=a,E(g,[...n]),E(x,Array(n.length).fill(!1))}catch(a){console.error("Failed to load data:",a)}const e=setInterval(Je,1e3);return()=>{clearInterval(e)}}),wt();var ge=Pt();qt(e=>{var a=Et();mt.title="Vehicle Logging",Oe(12),P(e,a)});var Z=oe(ge),ue=r(Z),fe=s(r(ue),2),he=r(fe);_t(he,`      background: url(${d??""}/svg/Vector_1.svg) no-repeat left center; mask-image: url(${d??""}/svg/Vector_1.svg'); -webkit-mask-image: url(${d??""}/svg/Vector_1.svg);`);var pe=s(he,4);f(pe,"href",`${d??""}/home`);var me=s(pe,2);f(me,"href",`${d??""}/inventory`);var ye=s(me,2);f(ye,"href",`${d??""}/cross-drops`);var be=s(ye,2);f(be,"href",`${d??""}/site-data`);var qe=s(be,2);f(qe,"href",`${d??""}/analytics`);var tt=s(qe,4);f(tt,"src",`${d??""}/images/Midas_Link_logo.png`),i(fe),i(ue),i(Z);var K=s(Z,2),_e=r(K);f(_e,"href",`${d??""}/home`);var we=s(_e,2);f(we,"href",`${d??""}/vehicle-logging`);var De=s(we,2);f(De,"href",`${d??""}/cross-drops`);var Se=s(De,2);f(Se,"href",`${d??""}/site-data`);var ke=s(Se,2);f(ke,"href",`${d??""}/inventory`);var at=s(ke,2);f(at,"href",`${d??""}/analytics`),i(K);var Q=s(K,4),Te=s(r(Q),2),st=r(Te);f(st,"href",`${d??""}/home`),Oe(2),i(Te),i(Q);var ee=s(Q,2),xe=r(ee),te=s(r(xe),2),R=s(r(te),2);M(R);var B=s(R,4);M(B);var H=s(B,4);M(H);var O=s(H,4);M(O);var z=s(O,4);M(z);var Ce=s(z,4);M(Ce),i(te);var ae=s(te,2),$e=r(ae),lt=s($e,2);i(ae);var se=s(ae,2),Le=s(r(se),2),Ee=r(Le),Fe=s(Ee,2),Ae=r(Fe),rt=s(Ae,2);i(Fe),i(Le),i(se);var Ne=s(se,2),Pe=s(r(Ne)),it=r(Pe);{var ot=e=>{var a=ft(),q=oe(a);yt(q,1,()=>t(g),bt,(_,o,m)=>{var C=At(),S=oe(C),$=r(S),L=r($,!0);i($);var w=s($),k=r(w,!0);i(w);var U=s(w),X=r(U,!0);i(U);var N=s(U),v=r(N,!0);i(N);var T=s(N),I=r(T,!0);i(T),i(S);var le=s(S,2);{var re=Y=>{var A=Ft(),ie=r(A),Ve=s(r(ie),2),Ie=r(Ve),Ye=s(Ie,4),Re=s(Ye,4),Be=s(Re,4),dt=s(Be,2);i(Ve),i(ie);var He=s(ie),vt=r(He);i(He),i(A),ze(gt=>{Ge(A,1,`details-row ${gt??""}`,"svelte-li2qg4"),D(Ie,`${t(o).Date??""} | ${(t(o).Time||"")??""} `),D(Ye,` ${(t(o)["Trailer No."]||"")??""} `),D(Re,` ${(t(o).Address||"")??""} , ${t(o).City??""} ${t(o).State??""} `),D(Be,` ${(t(o)["Prevented Delivery "]||"")??""} | `),D(dt,` T${(t(o)["Tank No. "]||"")??""}`)},[()=>F(m)],Ue),h("click",vt,()=>p(t(o))),h("click",A,()=>ce(m)),P(Y,A)};Xe(le,Y=>{t(x)[m]&&Y(re)})}ze((Y,A)=>{Ge(S,1,`main-row ${Y??""} ${t(x)[m]?"hover-row":""}`,"svelte-li2qg4"),D(L,A),D(k,t(o).Time),D(X,t(o).City),D(v,t(o)["Trailer No."]),D(I,t(o)["Prevented Delivery "])},[()=>F(m),()=>$t(t(o).Date)],Ue),h("click",S,()=>ce(m)),P(_,C)}),P(e,a)},nt=e=>{var a=Nt();P(e,a)};Xe(it,e=>{t(g).length>0?e(ot):e(nt,!1)})}i(Pe),i(Ne),i(xe),i(ee);var je=s(ee,2),Me=r(je),ct=s(r(Me),2);f(ct,"src",`${d??""}/images/logo.png`),i(Me),i(je),V(R,()=>t(l).address,e=>j(l,t(l).address=e)),h("keydown",R,e=>{e.key==="Enter"&&b()}),V(B,()=>t(l).state,e=>j(l,t(l).state=e)),h("keydown",B,e=>{e.key==="Enter"&&b()}),V(H,()=>t(l).city,e=>j(l,t(l).city=e)),h("keydown",H,e=>{e.key==="Enter"&&b()}),V(O,()=>t(l).trailer,e=>j(l,t(l).trailer=e)),h("keydown",O,e=>{e.key==="Enter"&&b()}),V(z,()=>t(l).date,e=>j(l,t(l).date=e)),h("keydown",z,e=>{e.key==="Enter"&&b()}),V(Ce,()=>t(l).fuel,e=>j(l,t(l).fuel=e)),h("click",$e,b),h("click",lt,W),h("click",Ee,We),h("click",Ae,Ke),h("click",rt,et),P(u,ge),pt()}export{Qt as component,Kt as universal};
