import{t as J,a as P,c as lt,d as ot}from"../chunks/BH13Z9z8.js";import"../chunks/DNyCRkWS.js";import{_ as rt,ap as oe,a as t,a0 as it,au as ct,ar as a,c as l,aw as M,m as re,s as F,av as Ie,r as o,aq as qe,A as Ye}from"../chunks/bqrR2dOs.js";import{s as _}from"../chunks/C93Zg23q.js";import{i as Re}from"../chunks/B8PK6R75.js";import{e as dt,i as vt}from"../chunks/BCehYjPx.js";import{h as ut}from"../chunks/CeRXAMUy.js";import{a as ft,s as A,r as V,b as He}from"../chunks/DnL43C8x.js";import{e as f}from"../chunks/C5hrIerT.js";import{b as I}from"../chunks/DaeiHhzB.js";import{i as pt}from"../chunks/0IjRvDC7.js";import{o as ht}from"../chunks/BUq4umeo.js";import{g as mt}from"../chunks/0KinHf2G.js";import{b as m}from"../chunks/Br8rTENC.js";import{g as gt}from"../chunks/DntQ1spB.js";import{p as kt}from"../chunks/C2UMBn3J.js";const yt=!0,Ot=Object.freeze(Object.defineProperty({__proto__:null,prerender:yt},Symbol.toStringTag,{value:"Module"}));let G=[];async function bt(){if(G.length>0)return G;try{const u=await fetch("/table_data/vehicle_logging.json");if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);const c=await u.json();return G=c,c}catch(u){return console.error("Error fetching vehicleData data:",u),new Promise((c,g)=>{const p=new XMLHttpRequest;p.open("GET","table_data/vehicle_logging.json",!0),p.onload=function(){if(p.status===200)try{const r=JSON.parse(p.responseText);G=r,c(r)}catch(r){console.error("Error parsing JSON:",r),g(r)}else console.error("XHR error:",p.status),g(new Error(`XHR error: ${p.status}`))},p.onerror=function(){console.error("XHR error occurred"),g(new Error("XHR error occurred"))},p.send()})}}function _t(u){if(!u)return"";const[c,g,p]=u.split("."),r=new Date(p,c-1,g);if(isNaN(r.getTime()))return u;const v=new Date;if((v-r)/(1e3*60)<=30)return"Just now";if(r.getDate()===v.getDate()&&r.getMonth()===v.getMonth()&&r.getFullYear()===v.getFullYear())return"Today";const L=new Date(v);if(L.setDate(v.getDate()-1),r.getDate()===L.getDate()&&r.getMonth()===L.getMonth()&&r.getFullYear()===L.getFullYear())return"Yesterday";const k=new Date(v);if(k.setDate(v.getDate()-2),r.getDate()===k.getDate()&&r.getMonth()===k.getMonth()&&r.getFullYear()===k.getFullYear())return"Two days ago";const W={year:"numeric",month:"long",day:"numeric"};return r.toLocaleDateString("en-US",W)}function Be(){const u=document.getElementById("current-datetime");if(u){const c=new Date,g={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};u.textContent=c.toLocaleDateString("en-US",g)}}function wt(){document.querySelectorAll(".search-fields input").forEach(c=>{const g=c.id+"_"+Math.random().toString(36).substring(2,9);c.setAttribute("name",g),(c.id==="State"||c.id==="Zip"||c.id==="Date"||c.id==="ST-address"||c.id==="City"||c.id==="Fuel")&&(c.setAttribute("autocomplete","new-password"),c.setAttribute("data-lpignore","true"),c.setAttribute("data-form-type","other"))})}var Dt=lt('<meta charset="UTF-8" class="svelte-2nnkso"> <meta name="viewport" content="width=device-width, initial-scale=1.0" class="svelte-2nnkso"> <link href="https://fonts.googleapis.com/css?family=Mulish" rel="stylesheet" class="svelte-2nnkso"> <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet" class="svelte-2nnkso"> <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js" class="svelte-2nnkso"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" class="svelte-2nnkso"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js" class="svelte-2nnkso"><\/script>',1),St=J('<tr><td colspan="4" class="details-cell svelte-2nnkso"><div class="details-header svelte-2nnkso">Details:</div> <div class="details-content svelte-2nnkso"> <br class="svelte-2nnkso"> <span class="label svelte-2nnkso">Trailer No.:</span> <br class="svelte-2nnkso"> <span class="label svelte-2nnkso">Full Address:</span> <br class="svelte-2nnkso"> <span class="label svelte-2nnkso">Delivered:</span> <span class="label svelte-2nnkso">Tank:</span> </div></td><td class="svelte-2nnkso"><button class="more-details svelte-2nnkso">View Vehicle Timeline</button></td></tr>'),Tt=J('<tr><td class="svelte-2nnkso"> </td><td class="svelte-2nnkso"> </td><td class="svelte-2nnkso"> </td><td class="svelte-2nnkso"> </td><td class="svelte-2nnkso"> </td></tr> <!>',1),xt=J('<tr class="svelte-2nnkso"><td colspan="4" style="text-align: center; padding: 20px;" class="svelte-2nnkso">No results found</td></tr>'),Ct=J(`<header class="svelte-2nnkso"><div class="header-container svelte-2nnkso"><div class="top-header svelte-2nnkso"><a class="top-header-link svelte-2nnkso" href="https://berrys.com">berrys.com</a> <a class="top-header-link svelte-2nnkso" href=" ">Contact Us</a></div> <div class="header svelte-2nnkso"><div class="header-background svelte-2nnkso"></div> <a class="svelte-2nnkso">Home</a> <a class="svelte-2nnkso">Inventory</a> <a class="svelte-2nnkso">Cross-Drop Prevention</a> <a class="svelte-2nnkso">Site Data</a> <a class="svelte-2nnkso">Analytics</a> <input type="text" placeholder="Search..." class="svelte-2nnkso"> <img alt="Berrys Logo" class="svelte-2nnkso"></div></div></header> <div class="sub-header-container svelte-2nnkso"><div class="sub-header svelte-2nnkso"><h1 class="svelte-2nnkso">Vehicle Logging</h1> <span class="svelte-2nnkso">Access key information on each trailer, with real-time access to
      deliveries, focusing on trailer ID. See where trailers are located, what
      they are delivering or a full log on delivery history.</span></div> <div class="breadcrumb svelte-2nnkso"><a class="svelte-2nnkso">Home</a> / <span class="svelte-2nnkso">Vehicle Logging</span></div></div> <main class="svelte-2nnkso"><div class="main-container svelte-2nnkso"><label for="search-fields" class="search-label svelte-2nnkso">Search</label> <div class="search-fields svelte-2nnkso"><label for="ST-address" class="svelte-2nnkso">Address</label> <input type="text" id="ST-address" name="ST-address" class="svelte-2nnkso"> <label for="State" class="svelte-2nnkso">State</label> <input type="text" id="State" name="State" class="svelte-2nnkso"> <label for="City" class="svelte-2nnkso">City</label> <input type="text" id="City" name="City" class="svelte-2nnkso"> <label for="Trailer_No" class="svelte-2nnkso">Trailer No</label> <input type="text" id="Trailer_No" name="Trailer_No" class="svelte-2nnkso"> <label for="Date" class="svelte-2nnkso">Date</label> <input type="text" id="Date" name="Date" placeholder="DD/MM/YYYY" class="svelte-2nnkso"> <label for="Fuel" class="svelte-2nnkso">Fuel</label> <input type="text" id="Fuel" name="Fuel" class="svelte-2nnkso"></div> <div class="button-container svelte-2nnkso"><button class="search-button svelte-2nnkso">Search</button> <button class="clear-button svelte-2nnkso">Clear</button></div> <div class="table-header svelte-2nnkso"><div class="live-status svelte-2nnkso"><div class="toggle-live svelte-2nnkso"><label for="table-type" class="table-type svelte-2nnkso">LIVE <span class="live-indicator svelte-2nnkso"></span></label></div> <label for="table-type" class="table-type svelte-2nnkso"><span id="current-datetime" class="current-time svelte-2nnkso"></span></label></div> <div class="export-dropdown svelte-2nnkso"><button class="export-button svelte-2nnkso">Export As â–¼</button> <div class="dropdown-content svelte-2nnkso" id="exportDropdown"><a href=" " class="svelte-2nnkso">CSV</a> <a href=" " class="svelte-2nnkso">PDF</a></div></div></div> <table class="svelte-2nnkso"><thead class="svelte-2nnkso"><tr class="svelte-2nnkso"><th class="svelte-2nnkso">Date</th><th class="svelte-2nnkso">Time</th><th class="svelte-2nnkso">City</th><th class="svelte-2nnkso">Vehicle ID</th><th class="svelte-2nnkso">Prevented Delivery</th></tr></thead><tbody class="svelte-2nnkso"><!></tbody></table></div></main> <footer class="svelte-2nnkso"><div style="display: flex; justify-content: space-between; align-items: center; padding: 0 20px;" class="svelte-2nnkso"><span style="font-size: 1rem; font-family: Mulish;" class="svelte-2nnkso">@copyrights Berrys Global Innovations</span> <img alt="Berrys Logo" class="svelte-2nnkso"></div></footer>`,1);function zt(u,c){rt(c,!1);const g=mt(kt).url.pathname;function p(e){gt(`${m}/vehicle/${e["Trailer No."]}`,{state:{from:g,trailer:e["Trailer No."]}})}let r=[],v=re([]),T=re([]),n=re({address:"",state:"",city:"",trailer:"",date:"",fuel:""});function L(e){return e%2===0?"row-even":"row-odd"}function k(){F(v,r.filter(e=>{const s=!t(n).address||e.Address&&e.Address.toLowerCase().includes(t(n).address.toLowerCase()),N=!t(n).state||e.State&&e.State.toLowerCase().includes(t(n).state.toLowerCase()),y=!t(n).city||e.City&&e.City.toLowerCase().includes(t(n).city.toLowerCase()),i=!t(n).trailer||e["Trailer No."]&&e["Trailer No."].toLowerCase().includes(t(n).trailer.toLowerCase()),h=!t(n).date||e.Date&&e.Date.includes(t(n).date),x=!t(n).fuel||e["Prevented Delivery "]&&e["Prevented Delivery "].toLowerCase().includes(t(n).fuel.toLowerCase());return s&&N&&y&&i&&h&&x})),F(T,Array(t(v).length).fill(!1)),de()}function W(){console.log("clearing"),F(n,{address:"",state:"",city:"",trailer:"",date:"",fuel:""}),console.log(t(n)),F(v,[...r]),F(T,Array(t(v).length).fill(!1)),de(!0)}function Oe(){document.getElementById("exportDropdown").classList.toggle("show")}function ze(){const e=document.querySelectorAll(".search-fields input");return Array.from(e).some(s=>s.value.trim()!=="")}function ie(e){let s=[...t(T)];s[e]=!s[e],F(T,s)}function Ue(){const s=document.querySelector("table").cloneNode(!0);s.querySelectorAll(".more-details").forEach(d=>{d.parentNode.textContent=""});const y=s.querySelectorAll("tr");let i=[];const h=[];y[0].querySelectorAll("th").forEach(d=>{h.push(d.textContent.trim())}),i.push(h.join(","));for(let d=1;d<y.length;d++){const S=[];y[d].querySelectorAll("td").forEach(ae=>{let ne=ae.textContent.trim().replace(/"/g,'""');S.push(`"${ne}"`)}),S.length>0&&i.push(S.join(","))}const w=i.join(`
`),C=new Blob([w],{type:"text/csv;charset=utf-8;"}),$=new Date,b=$.toISOString().split("T")[0],D=$.toTimeString().split(" ")[0].replace(/:/g,"-"),X=`${document.location.pathname.includes("vehicle-logging")?"vehicle_logging":"site_data"}_${b}_${D}.csv`;if("showSaveFilePicker"in window){async function d(){try{const q=await(await window.showSaveFilePicker({suggestedName:X,types:[{description:"CSV File",accept:{"text/csv":[".csv"]}}]})).createWritable();await q.write(C),await q.close()}catch(S){S.name!=="AbortError"&&j()}}d()}else j();function j(){const d=document.createElement("a");d.href=URL.createObjectURL(C),d.setAttribute("download",X),document.body.appendChild(d),d.click(),document.body.removeChild(d)}}async function Xe(){try{const{jsPDF:e}=window.jspdf;if(!e)throw new Error("jsPDF library not found");const s=new e;s.setFont("helvetica","bold"),s.setFontSize(16),s.text("Vehicle Logging Data",14,15);const N=new Date().toLocaleString();s.setFontSize(10),s.setFont("helvetica","normal"),s.text(`Generated: ${N}`,14,25);const y=document.querySelector("table");if(!y)throw new Error("Table not found");const i=y.cloneNode(!0);i.querySelectorAll(".more-details").forEach(b=>{const D=b.closest("td, th");D&&(D.textContent="")}),s.autoTable({html:i,startY:30,styles:{fontSize:8,cellPadding:2,overflow:"linebreak",halign:"center"},headStyles:{fillColor:[1,75,150],textColor:255,fontSize:8,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:[234,243,252]},margin:{top:30}});const x=new Date,w=x.toISOString().split("T")[0],C=x.toTimeString().split(" ")[0].replace(/:/g,"-"),$=`vehicle_logging_${w}_${C}.pdf`;if("showSaveFilePicker"in window)try{const D=await(await window.showSaveFilePicker({suggestedName:$,types:[{description:"PDF File",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await D.write(s.output("blob")),await D.close()}catch(b){console.error("File save error:",b),ce(s,$)}else ce(s,$);return!0}catch(e){return console.error("PDF generation failed:",e),!1}}function ce(e,s){e.save(s)}function de(e=!1){const s=document.querySelector(".toggle-live");s&&(!e&&ze()?s.style.display="none":s.style.display="block")}ht(async()=>{Be(),wt(),console.log("Starting data fetch");try{const s=await bt();console.log("Data fetched:",s),r=s,F(v,[...r]),F(T,Array(r.length).fill(!1))}catch(s){console.error("Failed to load data:",s)}const e=setInterval(Be,1e3);return()=>{clearInterval(e)}}),pt();var ve=Ct();ut(e=>{var s=Dt();ct.title="Vehicle Logging",Ie(12),P(e,s)});var Z=oe(ve),ue=l(Z),fe=a(l(ue),2),pe=l(fe);ft(pe,`      background: url(${m??""}/svg/Vector_1.svg) no-repeat left center; mask-image: url(${m??""}/svg/Vector_1.svg'); -webkit-mask-image: url(${m??""}/svg/Vector_1.svg);`);var he=a(pe,2);A(he,"href",`${m??""}/home`);var me=a(he,2);A(me,"href",`${m??""}/inventory`);var ge=a(me,2);A(ge,"href",`${m??""}/cross-drops`);var ke=a(ge,2);A(ke,"href",`${m??""}/site-data`);var ye=a(ke,2);A(ye,"href",`${m??""}/analytics`);var Ge=a(ye,4);A(Ge,"src",`${m??""}/images/Midas_Link_logo.png`),o(fe),o(ue),o(Z);var K=a(Z,2),be=a(l(K),2),Je=l(be);A(Je,"href",`${m??""}/home`),Ie(2),o(be),o(K);var Q=a(K,2),_e=l(Q),ee=a(l(_e),2),R=a(l(ee),2);V(R);var H=a(R,4);V(H);var B=a(H,4);V(B);var O=a(B,4);V(O);var z=a(O,4);V(z);var we=a(z,4);V(we),o(ee);var te=a(ee,2),De=l(te),We=a(De,2);o(te);var se=a(te,2),Se=a(l(se),2),Te=l(Se),xe=a(Te,2),Ce=l(xe),Ze=a(Ce,2);o(xe),o(Se),o(se);var $e=a(se,2),Fe=a(l($e)),Ke=l(Fe);{var Qe=e=>{var s=ot(),N=oe(s);dt(N,1,()=>t(v),vt,(y,i,h)=>{var x=Tt(),w=oe(x),C=l(w),$=l(C,!0);o(C);var b=a(C),D=l(b,!0);o(b);var U=a(b),X=l(U,!0);o(U);var j=a(U),d=l(j,!0);o(j);var S=a(j),q=l(S,!0);o(S),o(w);var ae=a(w,2);{var ne=Y=>{var E=St(),le=l(E),Ee=a(l(le),2),Ne=l(Ee),je=a(Ne,4),Pe=a(je,4),Me=a(Pe,4),st=a(Me,2);o(Ee),o(le);var Ve=a(le),at=l(Ve);o(Ve),o(E),qe(nt=>{He(E,1,`details-row ${nt??""}`,"svelte-2nnkso"),_(Ne,`${t(i).Date??""} | ${(t(i).Time||"")??""} `),_(je,` ${(t(i)["Trailer No."]||"")??""} `),_(Pe,` ${(t(i).Address||"")??""} , ${t(i).City??""} ${t(i).State??""} `),_(Me,` ${(t(i)["Prevented Delivery "]||"")??""} | `),_(st,` T${(t(i)["Tank No. "]||"")??""}`)},[()=>L(h)],Ye),f("click",at,()=>p(t(i))),f("click",E,()=>ie(h)),P(Y,E)};Re(ae,Y=>{t(T)[h]&&Y(ne)})}qe((Y,E)=>{He(w,1,`main-row ${Y??""} ${t(T)[h]?"hover-row":""}`,"svelte-2nnkso"),_($,E),_(D,t(i).Time),_(X,t(i).City),_(d,t(i)["Trailer No."]),_(q,t(i)["Prevented Delivery "])},[()=>L(h),()=>_t(t(i).Date)],Ye),f("click",w,()=>ie(h)),P(y,x)}),P(e,s)},et=e=>{var s=xt();P(e,s)};Re(Ke,e=>{t(v).length>0?e(Qe):e(et,!1)})}o(Fe),o($e),o(_e),o(Q);var Ae=a(Q,2),Le=l(Ae),tt=a(l(Le),2);A(tt,"src",`${m??""}/images/logo.png`),o(Le),o(Ae),I(R,()=>t(n).address,e=>M(n,t(n).address=e)),f("keydown",R,e=>{e.key==="Enter"&&k()}),I(H,()=>t(n).state,e=>M(n,t(n).state=e)),f("keydown",H,e=>{e.key==="Enter"&&k()}),I(B,()=>t(n).city,e=>M(n,t(n).city=e)),f("keydown",B,e=>{e.key==="Enter"&&k()}),I(O,()=>t(n).trailer,e=>M(n,t(n).trailer=e)),f("keydown",O,e=>{e.key==="Enter"&&k()}),I(z,()=>t(n).date,e=>M(n,t(n).date=e)),f("keydown",z,e=>{e.key==="Enter"&&k()}),I(we,()=>t(n).fuel,e=>M(n,t(n).fuel=e)),f("click",De,k),f("click",We,W),f("click",Te,Oe),f("click",Ce,Ue),f("click",Ze,Xe),P(u,ve),it()}export{zt as component,Ot as universal};
