import{t as O,a as E,c as St,d as Dt}from"../chunks/Dt22HCiJ.js";import"../chunks/k8LchNxB.js";import{a7 as Ct,t as kt,aq as it,m as g,av as be,aw as me,ar as ot,aK as xt,c,ax as l,v as $e,g as e,r as n,s as d,aA as $t,aC as U,aB as lt}from"../chunks/Dfh4C4Ra.js";import{s as C}from"../chunks/CG_46Ni7.js";import{i as rt}from"../chunks/DVMPxO1Y.js";import{e as nt,i as ct}from"../chunks/BEcKSYb_.js";import{h as Tt}from"../chunks/BLRKrT01.js";import{s as $,r as J}from"../chunks/BJNBbhYD.js";import{b as W,s as Te}from"../chunks/uNBIQxRZ.js";import{e as _}from"../chunks/vldg8s2m.js";import{s as At}from"../chunks/DEnguD6t.js";import{p as R,b as K}from"../chunks/BeM1PMHz.js";import{i as dt}from"../chunks/CI8lGjeZ.js";import{o as Ft}from"../chunks/BMW7RVWP.js";import{b as D}from"../chunks/DKiDKu0U.js";import{g as Lt}from"../chunks/uKNC8f0T.js";function Mt(h,i,S){var v=Ct(h,i);v&&v.set&&(h[i]=S,kt(()=>{h[i]=null}))}const jt=!0,rs=Object.freeze(Object.defineProperty({__proto__:null,prerender:jt},Symbol.toStringTag,{value:"Module"}));var zt=O('<div class="dropdown-item svelte-1ki0mmx"> </div>'),Ut=O('<label> </label> <div class="custom-dropdown svelte-1ki0mmx"><div class="input-wrapper svelte-1ki0mmx"><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="svelte-1ki0mmx"> <div class="dropdown-arrow svelte-1ki0mmx"></div></div> <div></div></div>',1);function fe(h,i){it(i,!1);let S=R(i,"id",8,""),v=R(i,"label",8,""),p=R(i,"placeholder",8,"Select or type"),y=R(i,"options",24,()=>[]),s=R(i,"value",12,""),Q=R(i,"onChange",8,()=>{});const V=!0;let k=g(!1),B=g(),j=g([...y()]);function ee(){d(k,!e(k)),e(k)&&d(j,[...y()])}function te(f){s(f),Q()(f),d(k,!1)}function se(){const f=s().toLowerCase();d(j,y().filter(I=>I.toLowerCase().includes(f))),d(k,!0)}function ae(f){e(B)&&!e(B).contains(f.target)&&d(k,!1)}function he(f){f.stopPropagation(),d(j,[...y()]),ee()}dt();var le=Ut();_("click",xt,ae);var q=be(le),re=c(q,!0);n(q);var N=l(q,2),Z=c(N),F=c(Z);J(F);var ie=l(F,2);n(Z);var H=l(Z,2);let oe;return nt(H,5,()=>e(j),ct,(f,I)=>{var z=zt(),ne=c(z,!0);n(z),me(()=>C(ne,e(I))),_("click",z,()=>te(e(I))),E(f,z)}),n(H),n(N),K(N,f=>d(B,f),()=>e(B)),me(f=>{$(q,"for",S()),C(re,v()),$(F,"id",S()),$(F,"placeholder",p()),oe=Te(H,1,"dropdown-content svelte-1ki0mmx",null,oe,f)},[()=>({show:e(k)})],$e),W(F,s),_("input",F,se),_("focus",F,()=>{d(j,[...y()]),d(k,!0)}),_("click",ie,he),E(h,le),Mt(i,"prerender",V),ot({prerender:V})}let pe=[];async function Et(){if(pe.length>0)return pe;try{const h=await fetch("/table_data/site_data.json");if(!h.ok)throw new Error(`HTTP error! status: ${h.status}`);const i=await h.json();return pe=i,i}catch(h){return console.error("Error fetching site data:",h),new Promise((i,S)=>{const v=new XMLHttpRequest;v.open("GET","table_data/site_data.json",!0),v.onload=function(){if(v.status===200)try{const p=JSON.parse(v.responseText);pe=p,i(p)}catch(p){console.error("Error parsing JSON:",p),S(p)}else console.error("XHR error:",v.status),S(new Error(`XHR error: ${v.status}`))},v.onerror=function(){console.error("XHR error occurred"),S(new Error("XHR error occurred"))},v.send()})}}function Bt(){document.querySelectorAll(".search-fields input").forEach(i=>{i.setAttribute("autocomplete","off"),i.setAttribute("autocorrect","off"),i.setAttribute("autocapitalize","off"),i.setAttribute("spellcheck","false");const S=i.id+"_"+Math.random().toString(36).substring(2,9);i.setAttribute("name",S),(i.id==="State"||i.id==="Zip"||i.id==="Business-unit"||i.id==="ST-address"||i.id==="City")&&(i.setAttribute("autocomplete","new-password"),i.setAttribute("data-lpignore","true"),i.setAttribute("data-form-type","other"))})}var It=St('<meta charset="UTF-8" class="svelte-13w8lbr"> <meta name="viewport" content="width=device-width, initial-scale=1.0" class="svelte-13w8lbr"> <link href="https://fonts.googleapis.com/css?family=Mulish" rel="stylesheet" class="svelte-13w8lbr"> <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet" class="svelte-13w8lbr"> <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js" class="svelte-13w8lbr"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" class="svelte-13w8lbr"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js" class="svelte-13w8lbr"><\/script>',1),Pt=O('<tr><td colspan="4" class="details-cell svelte-13w8lbr"><div class="details-header svelte-13w8lbr">Details:</div> <div class="details-content svelte-13w8lbr"> <br class="svelte-13w8lbr"> <span class="label svelte-13w8lbr">Site code:</span> <span class="label svelte-13w8lbr">Business Unit:</span> <br class="svelte-13w8lbr"> <span class="label svelte-13w8lbr">Full Address:</span> <br class="svelte-13w8lbr"> <span class="label svelte-13w8lbr">Fuel dropped:</span> <span class="label svelte-13w8lbr">Tank:</span> </div></td><td class="svelte-13w8lbr"><button class="more-details svelte-13w8lbr">Expand details</button></td></tr>'),qt=O('<tr><td class="svelte-13w8lbr"> </td><td class="svelte-13w8lbr"> </td><td class="svelte-13w8lbr"> </td><td class="svelte-13w8lbr"> </td></tr> <!>',1),Nt=O('<tr class="svelte-13w8lbr"><td colspan="4" style="text-align: center; padding: 20px;" class="svelte-13w8lbr">No results found</td></tr>'),Yt=O('<header class="svelte-13w8lbr"><div class="header-container svelte-13w8lbr"><div class="top-header svelte-13w8lbr"><a class="top-header-link svelte-13w8lbr" href="https://berrys.com">berrys.com</a> <a class="top-header-link svelte-13w8lbr" href=" ">Contact Us</a></div> <div class="header svelte-13w8lbr"><div class="header-background svelte-13w8lbr"></div> <a class="svelte-13w8lbr">Home</a> <a class="svelte-13w8lbr">Inventory</a> <a class="svelte-13w8lbr">Cross-drop</a> <a class="svelte-13w8lbr">Vehicle Logging</a> <a class="svelte-13w8lbr">Analytics</a> <input type="text" placeholder="Search..." class="svelte-13w8lbr"> <img alt="Berrys Logo" class="svelte-13w8lbr"></div></div></header> <div class="sub-header-container svelte-13w8lbr"><div class="sub-header svelte-13w8lbr"><h1 class="svelte-13w8lbr">Site Data</h1> <span class="svelte-13w8lbr">Gather insight into your deliveries by site location. You can dive into delivery information by State, Zip code, Street Address and City. This <br class="svelte-13w8lbr">will offer you vital information on drop frequency, scheduling and billing reports.</span></div> <div class="breadcrumb svelte-13w8lbr"><a class="svelte-13w8lbr">Home</a> / <span class="svelte-13w8lbr">Site Data</span></div></div> <main class="svelte-13w8lbr"><div class="main-container svelte-13w8lbr"><label class="search-label svelte-13w8lbr" for="search-fields">Search</label> <div class="search-fields svelte-13w8lbr"><!> <label for="ST-address" class="svelte-13w8lbr">Address</label> <input type="text" id="ST-address" name="ST-address" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="svelte-13w8lbr"> <!> <!> <!> <label for="Zip" class="svelte-13w8lbr">Zip</label> <input type="text" id="Zip" name="Zip" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="svelte-13w8lbr"> <label for="Date" class="svelte-13w8lbr">Date</label> <input type="text" id="Date" name="Date" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="DD/MM/YYYY" class="svelte-13w8lbr"> <label for="Fuel" class="svelte-13w8lbr">Fuel</label> <input type="text" id="Fuel" name="Fuel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="svelte-13w8lbr"></div> <div class="button-container svelte-13w8lbr"><button class="search-button svelte-13w8lbr">Search</button> <button class="clear-button svelte-13w8lbr">Clear</button></div> <div class="table-header svelte-13w8lbr"><div class="live-status svelte-13w8lbr"><div class="toggle-live svelte-13w8lbr"><label for="table-type" class="table-type svelte-13w8lbr">LIVE <span class="live-indicator svelte-13w8lbr"></span></label></div> <label for="table-type" class="table-type svelte-13w8lbr"><span id="current-datetime" class="current-time svelte-13w8lbr"></span></label></div> <div class="export-dropdown svelte-13w8lbr"><button class="export-button svelte-13w8lbr">Export As â–¼</button> <div class="dropdown-content svelte-13w8lbr" id="exportDropdown"><a href=" " class="svelte-13w8lbr">CSV</a> <a href=" " class="svelte-13w8lbr">PDF</a></div></div></div> <table class="svelte-13w8lbr"><thead class="svelte-13w8lbr"><tr class="svelte-13w8lbr"><th class="svelte-13w8lbr">Date</th><th class="svelte-13w8lbr">Delivered at</th><th class="svelte-13w8lbr">Site Code</th><th class="svelte-13w8lbr">Fuel dropped</th></tr></thead><tbody class="svelte-13w8lbr"><!></tbody></table></div></main> <footer class="svelte-13w8lbr"><div style="display: flex; justify-content: space-between; align-items: center; padding: 0 20px;" class="svelte-13w8lbr"><span style="font-size: 1rem; font-family: Mulish;" class="svelte-13w8lbr">@copyrights Berrys Global Innovations</span> <img alt="Berrys Logo" class="svelte-13w8lbr"></div></footer>',1);function is(h,i){it(i,!1);function S(t){Lt(`${D}/deliveryDetail/${t.SiteCode}`,{state:{address:t.Address,city:t.City,state:t.State,date:t.Date}})}let v=[],p=g([]),y=g([]),s=g({businessUnit:"",address:"",state:"",city:"",site:"",zip:"",date:"",fuel:""}),Q=g([]),V=g([]),k=g([]),B=g([]),j=g(),ee=g(),te=g(),se=g();function ae(t){return t%2===0?"row-even":"row-odd"}function he(){d(p,v.filter(t=>{const a=!e(s).businessUnit||t.BusinessUnitName&&t.BusinessUnitName.toLowerCase().includes(e(s).businessUnit.toLowerCase()),o=!e(s).address||t.Address&&t.Address.toLowerCase().includes(e(s).address.toLowerCase()),T=!e(s).state||t.State&&t.State.toLowerCase().includes(e(s).state.toLowerCase()),r=!e(s).city||t.City&&t.City.toLowerCase().includes(e(s).city.toLowerCase()),u=!e(s).site||t.SiteCode&&t.SiteCode.toLowerCase().includes(e(s).site.toLowerCase()),A=!e(s).zip||t.Zip&&t.Zip.toString().includes(e(s).zip),b=!e(s).date||t.Date&&t.Date.includes(e(s).date),w=!e(s).fuel||t.Delivered&&t.Delivered.toLowerCase().includes(e(s).fuel.toLowerCase());return a&&o&&T&&r&&u&&A&&b&&w})),d(y,Array(e(p).length).fill(!1)),ie()}function le(){d(s,{businessUnit:"",address:"",state:"",city:"",site:"",zip:"",date:"",fuel:""}),d(p,[...v]),d(y,Array(e(p).length).fill(!1)),ie(!0)}function q(t){if(!t)return"";const[a,o,T]=t.split("/"),r=new Date(T,o-1,a);if(isNaN(r.getTime()))return t;const u=new Date;if((u-r)/(1e3*60)<=30)return"Just now";if(r.getDate()===u.getDate()&&r.getMonth()===u.getMonth()&&r.getFullYear()===u.getFullYear())return"Today";const w=new Date(u);if(w.setDate(u.getDate()-1),r.getDate()===w.getDate()&&r.getMonth()===w.getMonth()&&r.getFullYear()===w.getFullYear())return"Yesterday";const x=new Date(u);if(x.setDate(u.getDate()-2),r.getDate()===x.getDate()&&r.getMonth()===x.getMonth()&&r.getFullYear()===x.getFullYear())return"Two days ago";const L={year:"numeric",month:"long",day:"numeric"};return r.toLocaleDateString("en-US",L)}function re(t){let a=[...e(y)];a[t]=!a[t],d(y,a)}function N(){const t=new Date,a={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};document.getElementById("current-datetime").textContent=t.toLocaleDateString("en-US",a)}function Z(){const a=document.querySelector("table").querySelectorAll("tr");let o=[];const T=[];a[0].querySelectorAll("th").forEach(m=>{T.push(m.textContent.trim())}),o.push(T.join(","));for(let m=1;m<a.length;m++){const M=[];a[m].querySelectorAll("td").forEach(Ce=>{let ke=Ce.textContent.trim().replace(/"/g,'""');M.push(`"${ke}"`)}),M.length>0&&o.push(M.join(","))}const u=o.join(`
`),A=new Blob([u],{type:"text/csv;charset=utf-8;"}),b=new Date,w=b.toISOString().split("T")[0],x=b.toTimeString().split(" ")[0].replace(/:/g,"-"),ue=`${document.location.pathname.includes("vehicle-logging")?"vehicle_logging":"site_data"}_${w}_${x}.csv`;if("showSaveFilePicker"in window){async function m(){try{const X=await(await window.showSaveFilePicker({suggestedName:ue,types:[{description:"CSV File",accept:{"text/csv":[".csv"]}}]})).createWritable();await X.write(A),await X.close()}catch(M){M.name!=="AbortError"&&Y()}}m()}else Y();function Y(){const m=document.createElement("a");m.href=URL.createObjectURL(A),m.setAttribute("download",ue),document.body.appendChild(m),m.click(),document.body.removeChild(m)}}function F(){return e(s).businessUnit.trim()!==""||e(s).address.trim()!==""||e(s).state.trim()!==""||e(s).city.trim()!==""||e(s).site.trim()!==""||e(s).zip.trim()!==""||e(s).date.trim()!==""||e(s).fuel.trim()!==""}function ie(t=!1){const a=document.querySelector(".toggle-live");a&&(!t&&F()?a.style.display="none":a.style.display="block")}Ft(async()=>{N(),Bt(),console.log("Starting data fetch");try{const a=await Et();console.log("Data fetched:",a),v=a,d(p,[...v]),d(y,Array(v.length).fill(!1)),d(V,[...new Set(v.map(o=>o.BusinessUnitName).filter(o=>o&&o.trim()!==""))]),d(Q,[...new Set(v.map(o=>o.City).filter(o=>o&&o.trim()!==""))]),d(k,[...new Set(v.map(o=>o.State).filter(o=>o&&o.trim()!==""))]),d(B,[...new Set(v.map(o=>o.SiteCode).filter(o=>o&&o.trim()!==""))])}catch(a){console.error("Failed to load data:",a)}const t=setInterval(N,1e3);return()=>{clearInterval(t)}});function H(){document.getElementById("exportDropdown").classList.toggle("show")}async function oe(){const{jsPDF:t}=window.jspdf,a=new t,o=document.querySelector("table");a.setFont("helvetica","bold"),a.setFontSize(16),a.text("Cross Drop Prevention Data",14,15);const T=new Date().toLocaleString();a.setFontSize(10),a.setFont("helvetica","normal"),a.text(`Generated: ${T}`,14,25),a.autoTable({html:o,startY:30,styles:{fontSize:8,cellPadding:2,overflow:"linebreak",halign:"center"},headStyles:{fillColor:[1,75,150],textColor:255,fontSize:8,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:[234,243,252]},margin:{top:30}});const r=new Date,u=r.toISOString().split("T")[0],A=r.toTimeString().split(" ")[0].replace(/:/g,"-"),b=`cross_drop_data_${u}_${A}.pdf`,w=new Blob([a.output("blob")],{type:"application/pdf"});if("showSaveFilePicker"in window)try{const L=await(await window.showSaveFilePicker({suggestedName:b,types:[{description:"PDF File",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await L.write(w),await L.close()}catch(x){x.name!=="AbortError"&&f(a,b)}else f(a,b)}function f(t,a){t.save(a)}dt();var I=Yt();Tt(t=>{var a=It();$t.title="Site Data",lt(12),E(t,a)});var z=be(I),ne=c(z),Ae=l(c(ne),2),Fe=c(Ae);At(Fe,`      background: url(${D??""}/svg/Vector_1.svg) no-repeat left center; mask-image: url(${D??""}/svg/Vector_1.svg'); -webkit-mask-image: url(${D??""}/svg/Vector_1.svg);`);var Le=l(Fe,2);$(Le,"href",`${D??""}/home`);var Me=l(Le,2);$(Me,"href",`${D??""}/inventory`);var je=l(Me,2);$(je,"href",`${D??""}/cross-drops`);var ze=l(je,2);$(ze,"href",`${D??""}/vehicle-logging`);var Ue=l(ze,2);$(Ue,"href",`${D??""}/analytics`);var vt=l(Ue,4);$(vt,"src",`${D??""}/images/Midas_Link_logo.png`),n(Ae),n(ne),n(z);var we=l(z,2),Ee=l(c(we),2),ut=c(Ee);$(ut,"href",`${D??""}/home`),lt(2),n(Ee),n(we);var ge=l(we,2),Be=c(ge),ye=l(c(Be),2),Ie=c(ye);fe(Ie,{id:"Business-unit",label:"Business Unit",get options(){return e(V)},get value(){return e(s).businessUnit},set value(t){U(s,e(s).businessUnit=t)},$$legacy:!0});var ce=l(Ie,4);J(ce),K(ce,t=>d(j,t),()=>e(j));var Pe=l(ce,2);fe(Pe,{id:"State",label:"State",get options(){return e(k)},get value(){return e(s).state},set value(t){U(s,e(s).state=t)},$$legacy:!0});var qe=l(Pe,2);fe(qe,{id:"City",label:"City",get options(){return e(Q)},get value(){return e(s).city},set value(t){U(s,e(s).city=t)},$$legacy:!0});var Ne=l(qe,2);fe(Ne,{id:"Site",label:"Site",get options(){return e(B)},get value(){return e(s).site},set value(t){U(s,e(s).site=t)},$$legacy:!0});var de=l(Ne,4);J(de),K(de,t=>d(ee,t),()=>e(ee));var ve=l(de,4);J(ve),K(ve,t=>d(te,t),()=>e(te));var _e=l(ve,4);J(_e),K(_e,t=>d(se,t),()=>e(se)),n(ye);var Se=l(ye,2),Ye=c(Se),ft=l(Ye,2);n(Se);var De=l(Se,2),Re=l(c(De),2),Oe=c(Re),Ve=l(Oe,2),Ze=c(Ve),pt=l(Ze,2);n(Ve),n(Re),n(De);var He=l(De,2),Xe=l(c(He)),bt=c(Xe);{var mt=t=>{var a=Dt(),o=be(a);nt(o,1,()=>e(p),ct,(T,r,u)=>{var A=qt(),b=be(A),w=c(b),x=c(w,!0);n(w);var L=l(w),ue=c(L,!0);n(L);var Y=l(L),m=c(Y,!0);n(Y);var M=l(Y),X=c(M,!0);n(M),n(b);var Ce=l(b,2);{var ke=G=>{var P=Pt(),xe=c(P),We=l(c(xe),2),Ke=c(We),Qe=l(Ke,4),et=l(Qe,2),tt=l(et,4),st=l(tt,4),gt=l(st,2);n(We),n(xe);var at=l(xe),yt=c(at);n(at),n(P),me(_t=>{Te(P,1,`details-row ${_t??""}`,"svelte-13w8lbr"),C(Ke,`${e(r).Date??""} | ${(e(r)["Delivery Start "]||"")??""}  to ${(e(r)["Delivery End"]||"")??""} `),C(Qe,` ${(e(r).SiteCode||"")??""} | `),C(et,` ${(e(r).BusinessUnitName||"")??""} `),C(tt,` ${(e(r).Address||"")??""} , ${e(r).City??""} ${e(r).State??""} | ${e(r).Zip??""} `),C(st,` ${(e(r).Delivered||"")??""} | `),C(gt,` T${(e(r).TankNumber||"")??""}`)},[()=>ae(u)],$e),_("click",yt,()=>S(e(r))),_("click",P,()=>re(u)),E(G,P)};rt(Ce,G=>{e(y)[u]&&G(ke)})}me((G,P)=>{Te(b,1,`main-row ${G??""} ${e(y)[u]?"hover-row":""}`,"svelte-13w8lbr"),C(x,P),C(ue,e(r)["Delivery End"]),C(m,e(r).SiteCode),C(X,e(r).Delivered)},[()=>ae(u),()=>q(e(r).Date)],$e),_("click",b,()=>re(u)),E(T,A)}),E(t,a)},ht=t=>{var a=Nt();E(t,a)};rt(bt,t=>{e(p).length>0?t(mt):t(ht,!1)})}n(Xe),n(He),n(Be),n(ge);var Ge=l(ge,2),Je=c(Ge),wt=l(c(Je),2);$(wt,"src",`${D??""}/images/logo.png`),n(Je),n(Ge),W(ce,()=>e(s).address,t=>U(s,e(s).address=t)),W(de,()=>e(s).zip,t=>U(s,e(s).zip=t)),W(ve,()=>e(s).date,t=>U(s,e(s).date=t)),W(_e,()=>e(s).fuel,t=>U(s,e(s).fuel=t)),_("click",Ye,he),_("click",ft,le),_("click",Oe,H),_("click",Ze,Z),_("click",pt,oe),E(h,I),ot()}export{is as component,rs as universal};
