import{t as q,a as L,c as tt,d as st}from"../chunks/Dt22HCiJ.js";import"../chunks/k8LchNxB.js";import{aq as at,av as se,g as t,ar as lt,aA as rt,c as o,ax as l,aC as j,m as ae,s as w,aB as Ne,r as i,aw as Pe,v as Ee}from"../chunks/Dfh4C4Ra.js";import{s as b}from"../chunks/CG_46Ni7.js";import{i as Ve}from"../chunks/DVMPxO1Y.js";import{e as ot,i as it}from"../chunks/BEcKSYb_.js";import{h as nt}from"../chunks/BLRKrT01.js";import{s as D,r as M}from"../chunks/BJNBbhYD.js";import{b as N,s as Ie}from"../chunks/uNBIQxRZ.js";import{e as C}from"../chunks/vldg8s2m.js";import{s as ct}from"../chunks/DEnguD6t.js";import{i as dt}from"../chunks/CI8lGjeZ.js";import{o as vt}from"../chunks/BMW7RVWP.js";import{b as h}from"../chunks/DKiDKu0U.js";import"../chunks/uKNC8f0T.js";const ft=!0,Pt=Object.freeze(Object.defineProperty({__proto__:null,prerender:ft},Symbol.toStringTag,{value:"Module"}));let Y=[];async function gt(){if(Y.length>0)return Y;try{const f=await fetch("/table_data/vehicle_logging.json");if(!f.ok)throw new Error(`HTTP error! status: ${f.status}`);const n=await f.json();return Y=n,n}catch(f){return console.error("Error fetching vehicleData data:",f),new Promise((n,g)=>{const d=new XMLHttpRequest;d.open("GET","table_data/vehicle_logging.json",!0),d.onload=function(){if(d.status===200)try{const r=JSON.parse(d.responseText);Y=r,n(r)}catch(r){console.error("Error parsing JSON:",r),g(r)}else console.error("XHR error:",d.status),g(new Error(`XHR error: ${d.status}`))},d.onerror=function(){console.error("XHR error occurred"),g(new Error("XHR error occurred"))},d.send()})}}function ut(f){if(!f)return"";const[n,g,d]=f.split("."),r=new Date(d,n-1,g);if(isNaN(r.getTime()))return f;const s=new Date;if((s-r)/(1e3*60)<=30)return"Just now";if(r.getDate()===s.getDate()&&r.getMonth()===s.getMonth()&&r.getFullYear()===s.getFullYear())return"Today";const k=new Date(s);if(k.setDate(s.getDate()-1),r.getDate()===k.getDate()&&r.getMonth()===k.getMonth()&&r.getFullYear()===k.getFullYear())return"Yesterday";const $=new Date(s);if($.setDate(s.getDate()-2),r.getDate()===$.getDate()&&r.getMonth()===$.getMonth()&&r.getFullYear()===$.getFullYear())return"Two days ago";const B={year:"numeric",month:"long",day:"numeric"};return r.toLocaleDateString("en-US",B)}function Ye(){const f=new Date,n={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};document.getElementById("current-datetime").textContent=f.toLocaleDateString("en-US",n)}function pt(){document.querySelectorAll(".search-fields input").forEach(n=>{const g=n.id+"_"+Math.random().toString(36).substring(2,9);n.setAttribute("name",g),(n.id==="State"||n.id==="Zip"||n.id==="Date"||n.id==="ST-address"||n.id==="City"||n.id==="Fuel")&&(n.setAttribute("autocomplete","new-password"),n.setAttribute("data-lpignore","true"),n.setAttribute("data-form-type","other"))})}var ht=tt('<meta charset="UTF-8" class="svelte-13s4fzg"> <meta name="viewport" content="width=device-width, initial-scale=1.0" class="svelte-13s4fzg"> <link href="https://fonts.googleapis.com/css?family=Mulish" rel="stylesheet" class="svelte-13s4fzg"> <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet" class="svelte-13s4fzg"> <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js" class="svelte-13s4fzg"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" class="svelte-13s4fzg"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js" class="svelte-13s4fzg"><\/script>',1),mt=q('<tr><td colspan="4" class="details-cell svelte-13s4fzg"><div class="details-header svelte-13s4fzg">Details:</div> <div class="details-content svelte-13s4fzg"> <br class="svelte-13s4fzg"> <span class="label svelte-13s4fzg">Trailer No.:</span> <br class="svelte-13s4fzg"> <span class="label svelte-13s4fzg">Full Address:</span> <br class="svelte-13s4fzg"> <span class="label svelte-13s4fzg">Delivered:</span> <span class="label svelte-13s4fzg">Tank:</span> </div></td></tr>'),bt=q('<tr><td class="svelte-13s4fzg"> </td><td class="svelte-13s4fzg"> </td><td class="svelte-13s4fzg"> </td><td class="svelte-13s4fzg"> </td><td class="svelte-13s4fzg"> </td></tr> <!>',1),yt=q('<tr class="svelte-13s4fzg"><td colspan="4" style="text-align: center; padding: 20px;" class="svelte-13s4fzg">No results found</td></tr>'),zt=q('<header class="svelte-13s4fzg"><div class="header-container svelte-13s4fzg"><div class="top-header svelte-13s4fzg"><a class="top-header-link svelte-13s4fzg" href="https://berrys.com">berrys.com</a> <a class="top-header-link svelte-13s4fzg" href=" ">Contact Us</a></div> <div class="header svelte-13s4fzg"><div class="header-background svelte-13s4fzg"></div> <a class="svelte-13s4fzg">Home</a> <a class="svelte-13s4fzg">Inventory</a> <a class="svelte-13s4fzg">Cross-drop</a> <a class="svelte-13s4fzg">Site Data</a> <a class="svelte-13s4fzg">Analytics</a> <input type="text" placeholder="Search..." class="svelte-13s4fzg"> <img alt="Berrys Logo" class="svelte-13s4fzg"></div></div></header> <div class="sub-header-container svelte-13s4fzg"><div class="sub-header svelte-13s4fzg"><h1 class="svelte-13s4fzg">Vehicle Logging</h1> <span class="svelte-13s4fzg">Access key information on each trailer, with real-time access to deliveries,  focusing on trailer ID. See where trailers are located, what they are <br class="svelte-13s4fzg">delivering or a full log on delivery history.</span></div> <div class="breadcrumb svelte-13s4fzg"><a class="svelte-13s4fzg">Home</a> / <span class="svelte-13s4fzg">Vehicle Logging</span></div></div> <main class="svelte-13s4fzg"><div class="main-container svelte-13s4fzg"><label for="search-fields" class="search-label svelte-13s4fzg">Search</label> <div class="search-fields svelte-13s4fzg"><label for="ST-address" class="svelte-13s4fzg">Address</label> <input type="text" id="ST-address" name="ST-address" class="svelte-13s4fzg"> <label for="State" class="svelte-13s4fzg">State</label> <input type="text" id="State" name="State" class="svelte-13s4fzg"> <label for="City" class="svelte-13s4fzg">City</label> <input type="text" id="City" name="City" class="svelte-13s4fzg"> <label for="Trailer_No" class="svelte-13s4fzg">Trailer No</label> <input type="text" id="Trailer_No" name="Trailer_No" class="svelte-13s4fzg"> <label for="Date" class="svelte-13s4fzg">Date</label> <input type="text" id="Date" name="Date" placeholder="DD/MM/YYYY" class="svelte-13s4fzg"> <label for="Fuel" class="svelte-13s4fzg">Fuel</label> <input type="text" id="Fuel" name="Fuel" class="svelte-13s4fzg"></div> <div class="button-container svelte-13s4fzg"><button class="search-button svelte-13s4fzg">Search</button> <button class="clear-button svelte-13s4fzg">Clear</button></div> <div class="table-header svelte-13s4fzg"><div class="live-status svelte-13s4fzg"><div class="toggle-live svelte-13s4fzg"><label for="table-type" class="table-type svelte-13s4fzg">LIVE <span class="live-indicator svelte-13s4fzg"></span></label></div> <label for="table-type" class="table-type svelte-13s4fzg"><span id="current-datetime" class="current-time svelte-13s4fzg"></span></label></div> <div class="export-dropdown svelte-13s4fzg"><button class="export-button svelte-13s4fzg">Export As â–¼</button> <div class="dropdown-content svelte-13s4fzg" id="exportDropdown"><a href=" " class="svelte-13s4fzg">CSV</a> <a href=" " class="svelte-13s4fzg">PDF</a></div></div></div> <table class="svelte-13s4fzg"><thead class="svelte-13s4fzg"><tr class="svelte-13s4fzg"><th class="svelte-13s4fzg">Date</th><th class="svelte-13s4fzg">Time</th><th class="svelte-13s4fzg">City</th><th class="svelte-13s4fzg">Vehicle ID</th><th class="svelte-13s4fzg">Prevented Delivery</th></tr></thead><tbody class="svelte-13s4fzg"><!></tbody></table></div></main> <footer class="svelte-13s4fzg"><div style="display: flex; justify-content: space-between; align-items: center; padding: 0 20px;" class="svelte-13s4fzg"><span style="font-size: 1rem; font-family: Mulish;" class="svelte-13s4fzg">@copyrights Berrys Global Innovations</span> <img alt="Berrys Logo" class="svelte-13s4fzg"></div></footer>',1);function Et(f,n){at(n,!1);let g=[],d=ae([]),r=ae([]),s=ae({address:"",state:"",city:"",trailer:"",date:"",fuel:""});function R(e){return e%2===0?"row-even":"row-odd"}function le(){w(d,g.filter(e=>{const a=!t(s).address||e.Address&&e.Address.toLowerCase().includes(t(s).address.toLowerCase()),y=!t(s).state||e.State&&e.State.toLowerCase().includes(t(s).state.toLowerCase()),_=!t(s).city||e.City&&e.City.toLowerCase().includes(t(s).city.toLowerCase()),c=!t(s).trailer||e["Trailer No."]&&e["Trailer No."].toLowerCase().includes(t(s).trailer.toLowerCase()),u=!t(s).date||e.Date&&e.Date.includes(t(s).date),z=!t(s).fuel||e["Prevented Delivery "]&&e["Prevented Delivery "].toLowerCase().includes(t(s).fuel.toLowerCase());return a&&y&&_&&c&&u&&z})),w(r,Array(t(d).length).fill(!1)),ie()}function k(){console.log("clearing"),w(s,{address:"",state:"",city:"",trailer:"",date:"",fuel:""}),console.log(t(s)),w(d,[...g]),w(r,Array(t(d).length).fill(!1)),ie(!0)}function $(){showDropdown=!showDropdown}function B(){const e=document.querySelectorAll(".search-fields input");return Array.from(e).some(a=>a.value.trim()!=="")}function re(e){let a=[...t(r)];a[e]=!a[e],w(r,a)}function qe(){const a=document.querySelector("table").querySelectorAll("tr");let y=[];const _=[];a[0].querySelectorAll("th").forEach(v=>{_.push(v.textContent.trim())}),y.push(_.join(","));for(let v=1;v<a.length;v++){const m=[];a[v].querySelectorAll("td").forEach(I=>{let te=I.textContent.trim().replace(/"/g,'""');m.push(`"${te}"`)}),m.length>0&&y.push(m.join(","))}const u=y.join(`
`),z=new Blob([u],{type:"text/csv;charset=utf-8;"}),p=new Date,S=p.toISOString().split("T")[0],F=p.toTimeString().split(" ")[0].replace(/:/g,"-"),V=`${document.location.pathname.includes("vehicle-logging")?"vehicle_logging":"site_data"}_${S}_${F}.csv`;if("showSaveFilePicker"in window){async function v(){try{const P=await(await window.showSaveFilePicker({suggestedName:V,types:[{description:"CSV File",accept:{"text/csv":[".csv"]}}]})).createWritable();await P.write(z),await P.close()}catch(m){m.name!=="AbortError"&&A()}}v()}else A();function A(){const v=document.createElement("a");v.href=URL.createObjectURL(z),v.setAttribute("download",V),document.body.appendChild(v),v.click(),document.body.removeChild(v)}}async function Re(){const{jsPDF:e}=window.jspdf,a=new e,y=document.querySelector("table");a.setFont("helvetica","bold"),a.setFontSize(16),a.text("Cross Drop Prevention Data",14,15);const _=new Date().toLocaleString();a.setFontSize(10),a.setFont("helvetica","normal"),a.text(`Generated: ${_}`,14,25),a.autoTable({html:y,startY:30,styles:{fontSize:8,cellPadding:2,overflow:"linebreak",halign:"center"},headStyles:{fillColor:[1,75,150],textColor:255,fontSize:8,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:[234,243,252]},margin:{top:30}});const c=new Date,u=c.toISOString().split("T")[0],z=c.toTimeString().split(" ")[0].replace(/:/g,"-"),p=`cross_drop_data_${u}_${z}.pdf`,S=new Blob([a.output("blob")],{type:"application/pdf"});if("showSaveFilePicker"in window)try{const T=await(await window.showSaveFilePicker({suggestedName:p,types:[{description:"PDF File",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await T.write(S),await T.close()}catch(F){F.name!=="AbortError"&&oe(a,p)}else oe(a,p)}function oe(e,a){e.save(a)}function ie(e=!1){const a=document.querySelector(".toggle-live");a&&(!e&&B()?a.style.display="none":a.style.display="block")}vt(async()=>{Ye(),pt(),console.log("Starting data fetch");try{const a=await gt();console.log("Data fetched:",a),g=a,w(d,[...g]),w(r,Array(g.length).fill(!1))}catch(a){console.error("Failed to load data:",a)}const e=setInterval(Ye,1e3);return()=>{clearInterval(e)}}),dt();var ne=zt();nt(e=>{var a=ht();rt.title="Vehicle Logging",Ne(12),L(e,a)});var H=se(ne),ce=o(H),de=l(o(ce),2),ve=o(de);ct(ve,`      background: url(${h??""}/svg/Vector_1.svg) no-repeat left center; mask-image: url(${h??""}/svg/Vector_1.svg'); -webkit-mask-image: url(${h??""}/svg/Vector_1.svg);`);var fe=l(ve,2);D(fe,"href",`${h??""}/home`);var ge=l(fe,2);D(ge,"href",`${h??""}/inventory`);var ue=l(ge,2);D(ue,"href",`${h??""}/cross-drops`);var pe=l(ue,2);D(pe,"href",`${h??""}/site-data`);var he=l(pe,2);D(he,"href",`${h??""}/analytics`);var Be=l(he,4);D(Be,"src",`${h??""}/images/Midas_Link_logo.png`),i(de),i(ce),i(H);var O=l(H,2),me=l(o(O),2),He=o(me);D(He,"href",`${h??""}/home`),Ne(2),i(me),i(O);var U=l(O,2),be=o(U),X=l(o(be),2),G=l(o(X),2);M(G);var J=l(G,4);M(J);var W=l(J,4);M(W);var Z=l(W,4);M(Z);var K=l(Z,4);M(K);var ye=l(K,4);M(ye),i(X);var Q=l(X,2),ze=o(Q),Oe=l(ze,2);i(Q);var ee=l(Q,2),_e=l(o(ee),2),we=o(_e),De=l(we,2),Se=o(De),Ue=l(Se,2);i(De),i(_e),i(ee);var Te=l(ee,2),xe=l(o(Te)),Xe=o(xe);{var Ge=e=>{var a=st(),y=se(a);ot(y,1,()=>t(d),it,(_,c,u)=>{var z=bt(),p=se(z),S=o(p),F=o(S,!0);i(S);var T=l(S),V=o(T,!0);i(T);var A=l(T),v=o(A,!0);i(A);var m=l(A),P=o(m,!0);i(m);var I=l(m),te=o(I,!0);i(I),i(p);var Ze=l(p,2);{var Ke=E=>{var x=mt(),$e=o(x),Fe=l(o($e),2),Ae=o(Fe),Le=l(Ae,4),je=l(Le,4),Me=l(je,4),Qe=l(Me,2);i(Fe),i($e),i(x),Pe(et=>{Ie(x,1,`details-row ${et??""}`,"svelte-13s4fzg"),b(Ae,`${t(c).Date??""} | ${(t(c).Time||"")??""} `),b(Le,` ${(t(c)["Trailer No."]||"")??""} `),b(je,` ${(t(c).Address||"")??""} , ${t(c).City??""} ${t(c).State??""} `),b(Me,` ${(t(c)["Prevented Delivery "]||"")??""} | `),b(Qe,` T${(t(c)["Tank No. "]||"")??""}`)},[()=>R(u)],Ee),C("click",x,()=>re(u)),L(E,x)};Ve(Ze,E=>{t(r)[u]&&E(Ke)})}Pe((E,x)=>{Ie(p,1,`main-row ${E??""} ${t(r)[u]?"hover-row":""}`,"svelte-13s4fzg"),b(F,x),b(V,t(c).Time),b(v,t(c).City),b(P,t(c)["Trailer No."]),b(te,t(c)["Prevented Delivery "])},[()=>R(u),()=>ut(t(c).Date)],Ee),C("click",p,()=>re(u)),L(_,z)}),L(e,a)},Je=e=>{var a=yt();L(e,a)};Ve(Xe,e=>{t(d).length>0?e(Ge):e(Je,!1)})}i(xe),i(Te),i(be),i(U);var Ce=l(U,2),ke=o(Ce),We=l(o(ke),2);D(We,"src",`${h??""}/images/logo.png`),i(ke),i(Ce),N(G,()=>t(s).address,e=>j(s,t(s).address=e)),N(J,()=>t(s).state,e=>j(s,t(s).state=e)),N(W,()=>t(s).city,e=>j(s,t(s).city=e)),N(Z,()=>t(s).trailer,e=>j(s,t(s).trailer=e)),N(K,()=>t(s).date,e=>j(s,t(s).date=e)),N(ye,()=>t(s).fuel,e=>j(s,t(s).fuel=e)),C("click",ze,le),C("click",Oe,k),C("click",we,$),C("click",Se,qe),C("click",Ue,Re),L(f,ne),lt()}export{Et as component,Pt as universal};
