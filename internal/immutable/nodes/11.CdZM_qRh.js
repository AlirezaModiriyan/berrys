import{t as R,a as M,c as St,d as wt}from"../chunks/B6y01qbr.js";import"../chunks/DtxX-JL7.js";import{a7 as Dt,t as Ct,aq as it,m as y,av as ue,aw as pe,ar as ot,aK as kt,c,ax as l,v as me,g as e,r as n,s as f,ay as xt,aC as L,az as lt}from"../chunks/CmiwTXNc.js";import{s as S}from"../chunks/CLestFuT.js";import{i as rt}from"../chunks/DEghan36.js";import{e as nt,i as ct}from"../chunks/RcmTF89e.js";import{h as $t}from"../chunks/BxHmYC3j.js";import{s as C,r as G}from"../chunks/5gdX85T8.js";import{b as J,s as ke}from"../chunks/Bzi7mCuK.js";import{e as z}from"../chunks/Dmg5bgrf.js";import{s as dt}from"../chunks/4myQYQrf.js";import{p as Y,b as W}from"../chunks/CN77rpSt.js";import{i as ft}from"../chunks/C760GAoK.js";import{o as Tt}from"../chunks/DNV5QSkq.js";import{b as _}from"../chunks/D6k1Fx1H.js";import{g as Ft}from"../chunks/B4OU9GEJ.js";function At(g,i,q){var d=Dt(g,i);d&&d.set&&(g[i]=q,Ct(()=>{g[i]=null}))}const Lt=!0,rs=Object.freeze(Object.defineProperty({__proto__:null,prerender:Lt},Symbol.toStringTag,{value:"Module"}));var Mt=R('<div class="dropdown-item svelte-g9tlcb"> </div>'),jt=R('<label> </label> <div class="custom-dropdown svelte-g9tlcb"><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="svelte-g9tlcb"> <div></div></div>',1);function fe(g,i){it(i,!1);let q=Y(i,"id",8,""),d=Y(i,"label",8,""),u=Y(i,"placeholder",8,"Select or type"),k=Y(i,"options",24,()=>[]),s=Y(i,"value",12,""),K=Y(i,"onChange",8,()=>{});const O=!0;let x=y(!1),j=y(),V=y([...k()]);function Q(){f(x,!e(x))}function ee(p){s(p),K()(p),f(x,!1)}function te(){const p=s().toLowerCase();f(V,k().filter(U=>U.toLowerCase().includes(p))),f(x,!0)}function se(p){e(j)&&!e(j).contains(p.target)&&f(x,!1)}ft();var ae=jt();z("click",kt,se);var I=ue(ae),he=c(I,!0);n(I);var N=l(I,2),w=c(N);G(w);var Z=l(w,2);let le;return nt(Z,5,()=>e(V),ct,(p,U)=>{var E=Mt(),re=c(E,!0);n(E),pe(ie=>{dt(E,`display: ${ie??""}`),S(re,e(U))},[()=>e(U).toLowerCase().includes(s().toLowerCase())?"block":"none"],me),z("click",E,()=>ee(e(U))),M(p,E)}),n(Z),n(N),W(N,p=>f(j,p),()=>e(j)),pe(p=>{C(I,"for",q()),S(he,d()),C(w,"id",q()),C(w,"placeholder",u()),le=ke(Z,1,"dropdown-content svelte-g9tlcb",null,le,p)},[()=>({show:e(x)})],me),J(w,s),z("input",w,te),z("focus",w,()=>f(x,!0)),z("click",w,Q),M(g,ae),At(i,"prerender",O),ot({prerender:O})}let ve=[];async function Ut(){if(ve.length>0)return ve;try{const g=await fetch("/table_data/site_data.json");if(!g.ok)throw new Error(`HTTP error! status: ${g.status}`);const i=await g.json();return ve=i,i}catch(g){return console.error("Error fetching site data:",g),new Promise((i,q)=>{const d=new XMLHttpRequest;d.open("GET","table_data/site_data.json",!0),d.onload=function(){if(d.status===200)try{const u=JSON.parse(d.responseText);ve=u,i(u)}catch(u){console.error("Error parsing JSON:",u),q(u)}else console.error("XHR error:",d.status),q(new Error(`XHR error: ${d.status}`))},d.onerror=function(){console.error("XHR error occurred"),q(new Error("XHR error occurred"))},d.send()})}}function Et(){document.querySelectorAll(".search-fields input").forEach(i=>{i.setAttribute("autocomplete","off"),i.setAttribute("autocorrect","off"),i.setAttribute("autocapitalize","off"),i.setAttribute("spellcheck","false");const q=i.id+"_"+Math.random().toString(36).substring(2,9);i.setAttribute("name",q),(i.id==="State"||i.id==="Zip"||i.id==="Business-unit"||i.id==="ST-address"||i.id==="City")&&(i.setAttribute("autocomplete","new-password"),i.setAttribute("data-lpignore","true"),i.setAttribute("data-form-type","other"))})}var Bt=St('<meta charset="UTF-8" class="svelte-13f9zq6"> <meta name="viewport" content="width=device-width, initial-scale=1.0" class="svelte-13f9zq6"> <link href="https://fonts.googleapis.com/css?family=Mulish" rel="stylesheet" class="svelte-13f9zq6"> <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet" class="svelte-13f9zq6"> <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js" class="svelte-13f9zq6"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" class="svelte-13f9zq6"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js" class="svelte-13f9zq6"><\/script>',1),It=R('<tr><td colspan="4" class="details-cell svelte-13f9zq6"><div class="details-header svelte-13f9zq6">Details:</div> <div class="details-content svelte-13f9zq6"> <br class="svelte-13f9zq6"> <span class="label svelte-13f9zq6">Site code:</span> <span class="label svelte-13f9zq6">Business Unit:</span> <br class="svelte-13f9zq6"> <span class="label svelte-13f9zq6">Full Address:</span> <br class="svelte-13f9zq6"> <span class="label svelte-13f9zq6">Fuel dropped:</span> <span class="label svelte-13f9zq6">Tank:</span> </div></td><td class="svelte-13f9zq6"><button class="more-details svelte-13f9zq6">Expand details</button></td></tr>'),Nt=R('<tr><td class="svelte-13f9zq6"> </td><td class="svelte-13f9zq6"> </td><td class="svelte-13f9zq6"> </td><td class="svelte-13f9zq6"> </td></tr> <!>',1),Pt=R('<tr class="svelte-13f9zq6"><td colspan="4" style="text-align: center; padding: 20px;" class="svelte-13f9zq6">No results found</td></tr>'),Yt=R('<header class="svelte-13f9zq6"><div class="header-container svelte-13f9zq6"><div class="top-header svelte-13f9zq6"><a class="top-header-link svelte-13f9zq6" href="https://berrys.com">berrys.com</a> <a class="top-header-link svelte-13f9zq6" href=" ">Contact Us</a></div> <div class="header svelte-13f9zq6"><div class="header-background svelte-13f9zq6"></div> <a class="svelte-13f9zq6">Home</a> <a class="svelte-13f9zq6">Inventory</a> <a class="svelte-13f9zq6">Cross-drop</a> <a class="svelte-13f9zq6">Vehicle Logging</a> <a class="svelte-13f9zq6">Analytics</a> <input type="text" placeholder="Search..." class="svelte-13f9zq6"> <img alt="Berrys Logo" class="svelte-13f9zq6"></div></div></header> <div class="sub-header-container svelte-13f9zq6"><div class="sub-header svelte-13f9zq6"><h1 class="svelte-13f9zq6">Site Data</h1> <span class="svelte-13f9zq6">Gather insight into your deliveries by site location. You can dive into delivery information by State, Zip code, Street Address and City. This <br class="svelte-13f9zq6">will offer you vital information on drop frequency, scheduling and billing reports.</span></div> <div class="breadcrumb svelte-13f9zq6"><a class="svelte-13f9zq6">Home</a> / <span class="svelte-13f9zq6">Site Data</span></div></div> <main class="svelte-13f9zq6"><div class="main-container svelte-13f9zq6"><label class="search-label svelte-13f9zq6" for="search-fields">Search</label> <div class="search-fields svelte-13f9zq6"><!> <label for="ST-address" class="svelte-13f9zq6">Address</label> <input type="text" id="ST-address" name="ST-address" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="svelte-13f9zq6"> <!> <!> <!> <label for="Zip" class="svelte-13f9zq6">Zip</label> <input type="text" id="Zip" name="Zip" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="svelte-13f9zq6"> <label for="Date" class="svelte-13f9zq6">Date</label> <input type="text" id="Date" name="Date" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="DD/MM/YYYY" class="svelte-13f9zq6"> <label for="Fuel" class="svelte-13f9zq6">Fuel</label> <input type="text" id="Fuel" name="Fuel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="svelte-13f9zq6"></div> <div class="button-container svelte-13f9zq6"><button class="search-button svelte-13f9zq6">Search</button> <button class="clear-button svelte-13f9zq6">Clear</button></div> <div class="table-header svelte-13f9zq6"><div class="live-status svelte-13f9zq6"><div class="toggle-live svelte-13f9zq6"><label for="table-type" class="table-type svelte-13f9zq6">LIVE <span class="live-indicator svelte-13f9zq6"></span></label></div> <label for="table-type" class="table-type svelte-13f9zq6"><span id="current-datetime" class="current-time svelte-13f9zq6"></span></label></div> <div class="export-dropdown svelte-13f9zq6"><button class="export-button svelte-13f9zq6">Export As â–¼</button> <div class="dropdown-content svelte-13f9zq6" id="exportDropdown"><a href=" " class="svelte-13f9zq6">CSV</a> <a href=" " class="svelte-13f9zq6">PDF</a></div></div></div> <table class="svelte-13f9zq6"><thead class="svelte-13f9zq6"><tr class="svelte-13f9zq6"><th class="svelte-13f9zq6">Date</th><th class="svelte-13f9zq6">Delivered at</th><th class="svelte-13f9zq6">Site Code</th><th class="svelte-13f9zq6">Fuel dropped</th></tr></thead><tbody class="svelte-13f9zq6"><!></tbody></table></div></main> <footer class="svelte-13f9zq6"><div style="display: flex; justify-content: space-between; align-items: center; padding: 0 20px;" class="svelte-13f9zq6"><span style="font-size: 1rem; font-family: Mulish;" class="svelte-13f9zq6">@copyrights Berrys Global Innovations</span> <img alt="Berrys Logo" class="svelte-13f9zq6"></div></footer>',1);function is(g,i){it(i,!1);function q(t){Ft(`${_}/deliveryDetail/${t.SiteCode}`,{state:{address:t.Address,city:t.City,state:t.State,date:t.Date}})}let d=[],u=y([]),k=y([]),s=y({businessUnit:"",address:"",state:"",city:"",site:"",zip:"",date:"",fuel:""}),K=y([]),O=y([]),x=y([]),j=y([]),V=y(),Q=y(),ee=y(),te=y();function se(t){return t%2===0?"row-even":"row-odd"}function ae(){f(u,d.filter(t=>{const a=!e(s).businessUnit||t.BusinessUnitName&&t.BusinessUnitName.toLowerCase().includes(e(s).businessUnit.toLowerCase()),o=!e(s).address||t.Address&&t.Address.toLowerCase().includes(e(s).address.toLowerCase()),$=!e(s).state||t.State&&t.State.toLowerCase().includes(e(s).state.toLowerCase()),r=!e(s).city||t.City&&t.City.toLowerCase().includes(e(s).city.toLowerCase()),v=!e(s).site||t.SiteCode&&t.SiteCode.toLowerCase().includes(e(s).site.toLowerCase()),T=!e(s).zip||t.Zip&&t.Zip.toString().includes(e(s).zip),m=!e(s).date||t.Date&&t.Date.includes(e(s).date),b=!e(s).fuel||t.Delivered&&t.Delivered.toLowerCase().includes(e(s).fuel.toLowerCase());return a&&o&&$&&r&&v&&T&&m&&b})),f(k,Array(e(u).length).fill(!1)),p()}function I(){f(s,{businessUnit:"",address:"",state:"",city:"",site:"",zip:"",date:"",fuel:""}),f(u,[...d]),f(k,Array(e(u).length).fill(!1)),p(!0)}function he(t){if(!t)return"";const[a,o,$]=t.split("/"),r=new Date($,o-1,a);if(isNaN(r.getTime()))return t;const v=new Date;if((v-r)/(1e3*60)<=30)return"Just now";if(r.getDate()===v.getDate()&&r.getMonth()===v.getMonth()&&r.getFullYear()===v.getFullYear())return"Today";const b=new Date(v);if(b.setDate(v.getDate()-1),r.getDate()===b.getDate()&&r.getMonth()===b.getMonth()&&r.getFullYear()===b.getFullYear())return"Yesterday";const D=new Date(v);if(D.setDate(v.getDate()-2),r.getDate()===D.getDate()&&r.getMonth()===D.getMonth()&&r.getFullYear()===D.getFullYear())return"Two days ago";const F={year:"numeric",month:"long",day:"numeric"};return r.toLocaleDateString("en-US",F)}function N(t){let a=[...e(k)];a[t]=!a[t],f(k,a)}function w(){const t=new Date,a={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};document.getElementById("current-datetime").textContent=t.toLocaleDateString("en-US",a)}function Z(){const a=document.querySelector("table").querySelectorAll("tr");let o=[];const $=[];a[0].querySelectorAll("th").forEach(h=>{$.push(h.textContent.trim())}),o.push($.join(","));for(let h=1;h<a.length;h++){const A=[];a[h].querySelectorAll("td").forEach(we=>{let De=we.textContent.trim().replace(/"/g,'""');A.push(`"${De}"`)}),A.length>0&&o.push(A.join(","))}const v=o.join(`
`),T=new Blob([v],{type:"text/csv;charset=utf-8;"}),m=new Date,b=m.toISOString().split("T")[0],D=m.toTimeString().split(" ")[0].replace(/:/g,"-"),de=`${document.location.pathname.includes("vehicle-logging")?"vehicle_logging":"site_data"}_${b}_${D}.csv`;if("showSaveFilePicker"in window){async function h(){try{const H=await(await window.showSaveFilePicker({suggestedName:de,types:[{description:"CSV File",accept:{"text/csv":[".csv"]}}]})).createWritable();await H.write(T),await H.close()}catch(A){A.name!=="AbortError"&&P()}}h()}else P();function P(){const h=document.createElement("a");h.href=URL.createObjectURL(T),h.setAttribute("download",de),document.body.appendChild(h),h.click(),document.body.removeChild(h)}}function le(){return e(s).businessUnit.trim()!==""||e(s).address.trim()!==""||e(s).state.trim()!==""||e(s).city.trim()!==""||e(s).site.trim()!==""||e(s).zip.trim()!==""||e(s).date.trim()!==""||e(s).fuel.trim()!==""}function p(t=!1){const a=document.querySelector(".toggle-live");a&&(!t&&le()?a.style.display="none":a.style.display="block")}Tt(async()=>{w(),Et(),console.log("Starting data fetch");try{const a=await Ut();console.log("Data fetched:",a),d=a,f(u,[...d]),f(k,Array(d.length).fill(!1)),f(O,[...new Set(d.map(o=>o.BusinessUnitName).filter(o=>o&&o.trim()!==""))]),f(K,[...new Set(d.map(o=>o.City).filter(o=>o&&o.trim()!==""))]),f(x,[...new Set(d.map(o=>o.State).filter(o=>o&&o.trim()!==""))]),f(j,[...new Set(d.map(o=>o.SiteCode).filter(o=>o&&o.trim()!==""))])}catch(a){console.error("Failed to load data:",a)}const t=setInterval(w,1e3);return()=>{clearInterval(t)}});function U(){document.getElementById("exportDropdown").classList.toggle("show")}async function E(){const{jsPDF:t}=window.jspdf,a=new t,o=document.querySelector("table");a.setFont("helvetica","bold"),a.setFontSize(16),a.text("Cross Drop Prevention Data",14,15);const $=new Date().toLocaleString();a.setFontSize(10),a.setFont("helvetica","normal"),a.text(`Generated: ${$}`,14,25),a.autoTable({html:o,startY:30,styles:{fontSize:8,cellPadding:2,overflow:"linebreak",halign:"center"},headStyles:{fillColor:[1,75,150],textColor:255,fontSize:8,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:[234,243,252]},margin:{top:30}});const r=new Date,v=r.toISOString().split("T")[0],T=r.toTimeString().split(" ")[0].replace(/:/g,"-"),m=`cross_drop_data_${v}_${T}.pdf`,b=new Blob([a.output("blob")],{type:"application/pdf"});if("showSaveFilePicker"in window)try{const F=await(await window.showSaveFilePicker({suggestedName:m,types:[{description:"PDF File",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await F.write(b),await F.close()}catch(D){D.name!=="AbortError"&&re(a,m)}else re(a,m)}function re(t,a){t.save(a)}ft();var ie=Yt();$t(t=>{var a=Bt();xt.title="Site Data",lt(12),M(t,a)});var ge=ue(ie),xe=c(ge),$e=l(c(xe),2),Te=c($e);dt(Te,`      background: url(${_??""}/svg/Vector_1.svg) no-repeat left center; mask-image: url(${_??""}/svg/Vector_1.svg'); -webkit-mask-image: url(${_??""}/svg/Vector_1.svg);`);var Fe=l(Te,2);C(Fe,"href",`${_??""}/home`);var Ae=l(Fe,2);C(Ae,"href",`${_??""}/inventory`);var Le=l(Ae,2);C(Le,"href",`${_??""}/cross-drops`);var Me=l(Le,2);C(Me,"href",`${_??""}/vehicle-logging`);var je=l(Me,2);C(je,"href",`${_??""}/analytics`);var vt=l(je,4);C(vt,"src",`${_??""}/images/Midas_Link_logo.png`),n($e),n(xe),n(ge);var be=l(ge,2),Ue=l(c(be),2),ut=c(Ue);C(ut,"href",`${_??""}/home`),lt(2),n(Ue),n(be);var ye=l(be,2),Ee=c(ye),ze=l(c(Ee),2),Be=c(ze);fe(Be,{id:"Business-unit",label:"Business Unit",get options(){return e(O)},get value(){return e(s).businessUnit},set value(t){L(s,e(s).businessUnit=t)},$$legacy:!0});var oe=l(Be,4);G(oe),W(oe,t=>f(V,t),()=>e(V));var Ie=l(oe,2);fe(Ie,{id:"State",label:"State",get options(){return e(x)},get value(){return e(s).state},set value(t){L(s,e(s).state=t)},$$legacy:!0});var Ne=l(Ie,2);fe(Ne,{id:"City",label:"City",get options(){return e(K)},get value(){return e(s).city},set value(t){L(s,e(s).city=t)},$$legacy:!0});var Pe=l(Ne,2);fe(Pe,{id:"Site",label:"Site",get options(){return e(j)},get value(){return e(s).site},set value(t){L(s,e(s).site=t)},$$legacy:!0});var ne=l(Pe,4);G(ne),W(ne,t=>f(Q,t),()=>e(Q));var ce=l(ne,4);G(ce),W(ce,t=>f(ee,t),()=>e(ee));var qe=l(ce,4);G(qe),W(qe,t=>f(te,t),()=>e(te)),n(ze);var _e=l(ze,2),Ye=c(_e),pt=l(Ye,2);n(_e);var Se=l(_e,2),Re=l(c(Se),2),Oe=c(Re),Ve=l(Oe,2),Ze=c(Ve),mt=l(Ze,2);n(Ve),n(Re),n(Se);var He=l(Se,2),Xe=l(c(He)),ht=c(Xe);{var gt=t=>{var a=wt(),o=ue(a);nt(o,1,()=>e(u),ct,($,r,v)=>{var T=Nt(),m=ue(T),b=c(m),D=c(b,!0);n(b);var F=l(b),de=c(F,!0);n(F);var P=l(F),h=c(P,!0);n(P);var A=l(P),H=c(A,!0);n(A),n(m);var we=l(m,2);{var De=X=>{var B=It(),Ce=c(B),We=l(c(Ce),2),Ke=c(We),Qe=l(Ke,4),et=l(Qe,2),tt=l(et,4),st=l(tt,4),zt=l(st,2);n(We),n(Ce);var at=l(Ce),qt=c(at);n(at),n(B),pe(_t=>{ke(B,1,`details-row ${_t??""}`,"svelte-13f9zq6"),S(Ke,`${e(r).Date??""} | ${(e(r)["Delivery Start "]||"")??""}  to ${(e(r)["Delivery End"]||"")??""} `),S(Qe,` ${(e(r).SiteCode||"")??""} | `),S(et,` ${(e(r).BusinessUnitName||"")??""} `),S(tt,` ${(e(r).Address||"")??""} , ${e(r).City??""} ${e(r).State??""} | ${e(r).Zip??""} `),S(st,` ${(e(r).Delivered||"")??""} | `),S(zt,` T${(e(r).TankNumber||"")??""}`)},[()=>se(v)],me),z("click",qt,()=>q(e(r))),z("click",B,()=>N(v)),M(X,B)};rt(we,X=>{e(k)[v]&&X(De)})}pe((X,B)=>{ke(m,1,`main-row ${X??""} ${e(k)[v]?"hover-row":""}`,"svelte-13f9zq6"),S(D,B),S(de,e(r)["Delivery End"]),S(h,e(r).SiteCode),S(H,e(r).Delivered)},[()=>se(v),()=>he(e(r).Date)],me),z("click",m,()=>N(v)),M($,T)}),M(t,a)},bt=t=>{var a=Pt();M(t,a)};rt(ht,t=>{e(u).length>0?t(gt):t(bt,!1)})}n(Xe),n(He),n(Ee),n(ye);var Ge=l(ye,2),Je=c(Ge),yt=l(c(Je),2);C(yt,"src",`${_??""}/images/logo.png`),n(Je),n(Ge),J(oe,()=>e(s).address,t=>L(s,e(s).address=t)),J(ne,()=>e(s).zip,t=>L(s,e(s).zip=t)),J(ce,()=>e(s).date,t=>L(s,e(s).date=t)),J(qe,()=>e(s).fuel,t=>L(s,e(s).fuel=t)),z("click",Ye,ae),z("click",pt,I),z("click",Oe,U),z("click",Ze,Z),z("click",mt,E),M(g,ie),ot()}export{is as component,rs as universal};
