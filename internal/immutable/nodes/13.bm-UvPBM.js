import{t as J,a as j,c as vt,d as ft}from"../chunks/BH13Z9z8.js";import"../chunks/DNyCRkWS.js";import{_ as ht,ap as oe,a as t,a0 as pt,au as mt,ar as s,c as r,aw as M,m as ne,s as F,av as Oe,r as i,aq as ze,A as Ue}from"../chunks/bqrR2dOs.js";import{s as S}from"../chunks/C93Zg23q.js";import{i as Xe}from"../chunks/B8PK6R75.js";import{e as gt,i as bt}from"../chunks/BCehYjPx.js";import{h as _t}from"../chunks/CeRXAMUy.js";import{a as wt,s as f,r as V,b as Ge}from"../chunks/DnL43C8x.js";import{e as h}from"../chunks/C5hrIerT.js";import{b as I}from"../chunks/DaeiHhzB.js";import{i as Dt}from"../chunks/0IjRvDC7.js";import{o as St}from"../chunks/BUq4umeo.js";import{g as kt}from"../chunks/0KinHf2G.js";import{b as u}from"../chunks/CDoN85dJ.js";import{g as Tt}from"../chunks/CLABP5vI.js";import{p as xt}from"../chunks/BH7ThLEj.js";const Ct=!0,Kt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ct},Symbol.toStringTag,{value:"Module"}));let G=[];async function $t(){if(G.length>0)return G;try{const v=await fetch("/table_data/vehicle_logging.json");if(!v.ok)throw new Error(`HTTP error! status: ${v.status}`);const c=await v.json();return G=c,c}catch(v){return console.error("Error fetching vehicleData data:",v),new Promise((c,g)=>{const p=new XMLHttpRequest;p.open("GET","table_data/vehicle_logging.json",!0),p.onload=function(){if(p.status===200)try{const n=JSON.parse(p.responseText);G=n,c(n)}catch(n){console.error("Error parsing JSON:",n),g(n)}else console.error("XHR error:",p.status),g(new Error(`XHR error: ${p.status}`))},p.onerror=function(){console.error("XHR error occurred"),g(new Error("XHR error occurred"))},p.send()})}}function Lt(v){if(!v)return"";const[c,g,p]=v.split("."),n=new Date(p,c-1,g);if(isNaN(n.getTime()))return v;const y=new Date;if((y-n)/(1e3*60)<=30)return"Just now";if(n.getDate()===y.getDate()&&n.getMonth()===y.getMonth()&&n.getFullYear()===y.getFullYear())return"Today";const A=new Date(y);if(A.setDate(y.getDate()-1),n.getDate()===A.getDate()&&n.getMonth()===A.getMonth()&&n.getFullYear()===A.getFullYear())return"Yesterday";const b=new Date(y);if(b.setDate(y.getDate()-2),n.getDate()===b.getDate()&&n.getMonth()===b.getMonth()&&n.getFullYear()===b.getFullYear())return"Two days ago";const W={year:"numeric",month:"long",day:"numeric"};return n.toLocaleDateString("en-US",W)}function Je(){const v=document.getElementById("current-datetime");if(v){const c=new Date,g={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};v.textContent=c.toLocaleDateString("en-US",g)}}function Et(){document.querySelectorAll(".search-fields input").forEach(c=>{const g=c.id+"_"+Math.random().toString(36).substring(2,9);c.setAttribute("name",g),(c.id==="State"||c.id==="Zip"||c.id==="Date"||c.id==="ST-address"||c.id==="City"||c.id==="Fuel")&&(c.setAttribute("autocomplete","new-password"),c.setAttribute("data-lpignore","true"),c.setAttribute("data-form-type","other"))})}var Ft=vt('<meta charset="UTF-8" class="svelte-1uyilyu"> <meta name="viewport" content="width=device-width, initial-scale=1.0" class="svelte-1uyilyu"> <link href="https://fonts.googleapis.com/css?family=Mulish" rel="stylesheet" class="svelte-1uyilyu"> <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet" class="svelte-1uyilyu"> <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js" class="svelte-1uyilyu"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" class="svelte-1uyilyu"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js" class="svelte-1uyilyu"><\/script>',1),At=J('<tr><td colspan="4" class="details-cell svelte-1uyilyu"><div class="details-header svelte-1uyilyu">Details:</div> <div class="details-content svelte-1uyilyu"> <br class="svelte-1uyilyu"> <span class="label svelte-1uyilyu">Trailer No.:</span> <br class="svelte-1uyilyu"> <span class="label svelte-1uyilyu">Full Address:</span> <br class="svelte-1uyilyu"> <span class="label svelte-1uyilyu">Delivered:</span> <span class="label svelte-1uyilyu">Tank:</span> </div></td><td class="svelte-1uyilyu"><button class="more-details svelte-1uyilyu">View Vehicle Timeline</button></td></tr>'),Nt=J('<tr><td class="svelte-1uyilyu"> </td><td class="svelte-1uyilyu"> </td><td class="svelte-1uyilyu"> </td><td class="svelte-1uyilyu"> </td><td class="svelte-1uyilyu"> </td></tr> <!>',1),Pt=J('<tr class="svelte-1uyilyu"><td colspan="4" style="text-align: center; padding: 20px;" class="svelte-1uyilyu">No results found</td></tr>'),jt=J(`<header class="svelte-1uyilyu"><div class="header-container svelte-1uyilyu"><div class="top-header svelte-1uyilyu"><a class="top-header-link svelte-1uyilyu" href="https://berrys.com">berrys.com</a> <a class="top-header-link svelte-1uyilyu" href=" ">Contact Us</a></div> <div class="header svelte-1uyilyu"><div class="header-background svelte-1uyilyu"></div> <div class="hamburger-menu svelte-1uyilyu" id="hamburger-menu"><span class="svelte-1uyilyu"></span> <span class="svelte-1uyilyu"></span> <span class="svelte-1uyilyu"></span></div> <a class="svelte-1uyilyu">Home</a> <a class="svelte-1uyilyu">Inventory</a> <a class="svelte-1uyilyu">Cross-Drop Prevention</a> <a class="svelte-1uyilyu">Site Data</a> <a class="svelte-1uyilyu">Analytics</a> <input type="text" placeholder="Search..." class="svelte-1uyilyu"> <img alt="Berrys Logo" class="svelte-1uyilyu"></div></div></header> <div class="mobile-sidebar svelte-1uyilyu" id="mobile-sidebar"><a class="svelte-1uyilyu">Home</a> <a class="svelte-1uyilyu">Vehicle Logging</a> <a class="svelte-1uyilyu">Cross-Drop Prevention</a> <a class="svelte-1uyilyu">Site Data</a> <a class="svelte-1uyilyu">Inventory</a> <a class="svelte-1uyilyu">Analytics</a></div> <div class="overlay svelte-1uyilyu" id="overlay"></div> <div class="sub-header-container svelte-1uyilyu"><div class="sub-header svelte-1uyilyu"><h1 class="svelte-1uyilyu">Vehicle Logging</h1> <span class="svelte-1uyilyu">Access key information on each trailer, with real-time access to
      deliveries, focusing on trailer ID. See where trailers are located, what
      they are delivering or a full log on delivery history.</span></div> <div class="breadcrumb svelte-1uyilyu"><a class="svelte-1uyilyu">Home</a> / <span class="svelte-1uyilyu">Vehicle Logging</span></div></div> <main class="svelte-1uyilyu"><div class="main-container svelte-1uyilyu"><label for="search-fields" class="search-label svelte-1uyilyu">Search</label> <div class="search-fields svelte-1uyilyu"><label for="ST-address" class="svelte-1uyilyu">Address</label> <input type="text" id="ST-address" name="ST-address" class="svelte-1uyilyu"> <label for="State" class="svelte-1uyilyu">State</label> <input type="text" id="State" name="State" class="svelte-1uyilyu"> <label for="City" class="svelte-1uyilyu">City</label> <input type="text" id="City" name="City" class="svelte-1uyilyu"> <label for="Trailer_No" class="svelte-1uyilyu">Trailer No</label> <input type="text" id="Trailer_No" name="Trailer_No" class="svelte-1uyilyu"> <label for="Date" class="svelte-1uyilyu">Date</label> <input type="text" id="Date" name="Date" placeholder="DD/MM/YYYY" class="svelte-1uyilyu"> <label for="Fuel" class="svelte-1uyilyu">Fuel</label> <input type="text" id="Fuel" name="Fuel" class="svelte-1uyilyu"></div> <div class="button-container svelte-1uyilyu"><button class="search-button svelte-1uyilyu">Search</button> <button class="clear-button svelte-1uyilyu">Clear</button></div> <div class="table-header svelte-1uyilyu"><div class="live-status svelte-1uyilyu"><div class="toggle-live svelte-1uyilyu"><label for="table-type" class="table-type svelte-1uyilyu">LIVE <span class="live-indicator svelte-1uyilyu"></span></label></div> <label for="table-type" class="table-type svelte-1uyilyu"><span id="current-datetime" class="current-time svelte-1uyilyu"></span></label></div> <div class="export-dropdown svelte-1uyilyu"><button class="export-button svelte-1uyilyu">Export As â–¼</button> <div class="dropdown-content svelte-1uyilyu" id="exportDropdown"><a href=" " class="svelte-1uyilyu">CSV</a> <a href=" " class="svelte-1uyilyu">PDF</a></div></div></div> <table class="svelte-1uyilyu"><thead class="svelte-1uyilyu"><tr class="svelte-1uyilyu"><th class="svelte-1uyilyu">Date</th><th class="svelte-1uyilyu">Time</th><th class="svelte-1uyilyu">City</th><th class="svelte-1uyilyu">Vehicle ID</th><th class="svelte-1uyilyu">Prevented Delivery</th></tr></thead><tbody class="svelte-1uyilyu"><!></tbody></table></div></main> <footer class="svelte-1uyilyu"><div style="display: flex; justify-content: space-between; align-items: center; padding: 0 20px;" class="svelte-1uyilyu"><span style="font-size: 1rem; font-family: Mulish;" class="svelte-1uyilyu">@copyrights Berrys Global Innovations</span> <img alt="Berrys Logo" class="svelte-1uyilyu"></div></footer>`,1);function Qt(v,c){ht(c,!1);const g=kt(xt).url.pathname;function p(e){Tt(`${u}/vehicle/${e["Trailer No."]}`,{state:{from:g,trailer:e["Trailer No."]}})}let n=[],y=ne([]),C=ne([]),l=ne({address:"",state:"",city:"",trailer:"",date:"",fuel:""});function A(e){return e%2===0?"row-even":"row-odd"}function b(){F(y,n.filter(e=>{const a=!t(l).address||e.Address&&e.Address.toLowerCase().includes(t(l).address.toLowerCase()),_=!t(l).state||e.State&&e.State.toLowerCase().includes(t(l).state.toLowerCase()),w=!t(l).city||e.City&&e.City.toLowerCase().includes(t(l).city.toLowerCase()),o=!t(l).trailer||e["Trailer No."]&&e["Trailer No."].toLowerCase().includes(t(l).trailer.toLowerCase()),m=!t(l).date||e.Date&&e.Date.includes(t(l).date),$=!t(l).fuel||e["Prevented Delivery "]&&e["Prevented Delivery "].toLowerCase().includes(t(l).fuel.toLowerCase());return a&&_&&w&&o&&m&&$})),F(C,Array(t(y).length).fill(!1)),de()}function W(){console.log("clearing"),F(l,{address:"",state:"",city:"",trailer:"",date:"",fuel:""}),console.log(t(l)),F(y,[...n]),F(C,Array(t(y).length).fill(!1)),de(!0)}function We(){document.getElementById("exportDropdown").classList.toggle("show")}function Ze(){const e=document.querySelectorAll(".search-fields input");return Array.from(e).some(a=>a.value.trim()!=="")}function ce(e){let a=[...t(C)];a[e]=!a[e],F(C,a)}function Ke(){const a=document.querySelector("table").cloneNode(!0);a.querySelectorAll(".more-details").forEach(d=>{d.parentNode.textContent=""});const w=a.querySelectorAll("tr");let o=[];const m=[];w[0].querySelectorAll("th").forEach(d=>{m.push(d.textContent.trim())}),o.push(m.join(","));for(let d=1;d<w.length;d++){const x=[];w[d].querySelectorAll("td").forEach(le=>{let re=le.textContent.trim().replace(/"/g,'""');x.push(`"${re}"`)}),x.length>0&&o.push(x.join(","))}const k=o.join(`
`),L=new Blob([k],{type:"text/csv;charset=utf-8;"}),E=new Date,D=E.toISOString().split("T")[0],T=E.toTimeString().split(" ")[0].replace(/:/g,"-"),X=`${document.location.pathname.includes("vehicle-logging")?"vehicle_logging":"site_data"}_${D}_${T}.csv`;if("showSaveFilePicker"in window){async function d(){try{const q=await(await window.showSaveFilePicker({suggestedName:X,types:[{description:"CSV File",accept:{"text/csv":[".csv"]}}]})).createWritable();await q.write(L),await q.close()}catch(x){x.name!=="AbortError"&&P()}}d()}else P();function P(){const d=document.createElement("a");d.href=URL.createObjectURL(L),d.setAttribute("download",X),document.body.appendChild(d),d.click(),document.body.removeChild(d)}}function Qe(){const e=document.getElementById("hamburger-menu"),a=document.getElementById("mobile-sidebar"),_=document.getElementById("overlay");e.addEventListener("click",function(){a.classList.toggle("active"),_.style.display=a.classList.contains("active")?"block":"none"}),_.addEventListener("click",function(){a.classList.remove("active"),_.style.display="none"}),a.querySelectorAll("a").forEach(o=>{o.addEventListener("click",function(){a.classList.remove("active"),_.style.display="none"})})}async function et(){try{const{jsPDF:e}=window.jspdf;if(!e)throw new Error("jsPDF library not found");const a=new e;a.setFont("helvetica","bold"),a.setFontSize(16),a.text("Vehicle Logging Data",14,15);const _=new Date().toLocaleString();a.setFontSize(10),a.setFont("helvetica","normal"),a.text(`Generated: ${_}`,14,25);const w=document.querySelector("table");if(!w)throw new Error("Table not found");const o=w.cloneNode(!0);o.querySelectorAll(".more-details").forEach(D=>{const T=D.closest("td, th");T&&(T.textContent="")}),a.autoTable({html:o,startY:30,styles:{fontSize:8,cellPadding:2,overflow:"linebreak",halign:"center"},headStyles:{fillColor:[1,75,150],textColor:255,fontSize:8,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:[234,243,252]},margin:{top:30}});const $=new Date,k=$.toISOString().split("T")[0],L=$.toTimeString().split(" ")[0].replace(/:/g,"-"),E=`vehicle_logging_${k}_${L}.pdf`;if("showSaveFilePicker"in window)try{const T=await(await window.showSaveFilePicker({suggestedName:E,types:[{description:"PDF File",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await T.write(a.output("blob")),await T.close()}catch(D){console.error("File save error:",D),ue(a,E)}else ue(a,E);return!0}catch(e){return console.error("PDF generation failed:",e),!1}}function ue(e,a){e.save(a)}function de(e=!1){const a=document.querySelector(".toggle-live");a&&(!e&&Ze()?a.style.display="none":a.style.display="block")}St(async()=>{Qe(),Je(),Et(),console.log("Starting data fetch");try{const a=await $t();console.log("Data fetched:",a),n=a,F(y,[...n]),F(C,Array(n.length).fill(!1))}catch(a){console.error("Failed to load data:",a)}const e=setInterval(Je,1e3);return()=>{clearInterval(e)}}),Dt();var ye=jt();_t(e=>{var a=Ft();mt.title="Vehicle Logging",Oe(12),j(e,a)});var Z=oe(ye),ve=r(Z),fe=s(r(ve),2),he=r(fe);wt(he,`      background: url(${u??""}/svg/Vector_1.svg) no-repeat left center; mask-image: url(${u??""}/svg/Vector_1.svg'); -webkit-mask-image: url(${u??""}/svg/Vector_1.svg);`);var pe=s(he,4);f(pe,"href",`${u??""}/home`);var me=s(pe,2);f(me,"href",`${u??""}/inventory`);var ge=s(me,2);f(ge,"href",`${u??""}/cross-drops`);var be=s(ge,2);f(be,"href",`${u??""}/site-data`);var _e=s(be,2);f(_e,"href",`${u??""}/analytics`);var tt=s(_e,4);f(tt,"src",`${u??""}/images/Midas_Link_logo.png`),i(fe),i(ve),i(Z);var K=s(Z,2),we=r(K);f(we,"href",`${u??""}/home`);var De=s(we,2);f(De,"href",`${u??""}/vehicle-logging`);var Se=s(De,2);f(Se,"href",`${u??""}/cross-drops`);var ke=s(Se,2);f(ke,"href",`${u??""}/site-data`);var Te=s(ke,2);f(Te,"href",`${u??""}/inventory`);var at=s(Te,2);f(at,"href",`${u??""}/analytics`),i(K);var Q=s(K,4),xe=s(r(Q),2),st=r(xe);f(st,"href",`${u??""}/home`),Oe(2),i(xe),i(Q);var ee=s(Q,2),Ce=r(ee),te=s(r(Ce),2),R=s(r(te),2);V(R);var B=s(R,4);V(B);var H=s(B,4);V(H);var O=s(H,4);V(O);var z=s(O,4);V(z);var $e=s(z,4);V($e),i(te);var ae=s(te,2),Le=r(ae),lt=s(Le,2);i(ae);var se=s(ae,2),Ee=s(r(se),2),Fe=r(Ee),Ae=s(Fe,2),Ne=r(Ae),rt=s(Ne,2);i(Ae),i(Ee),i(se);var Pe=s(se,2),je=s(r(Pe)),it=r(je);{var ot=e=>{var a=ft(),_=oe(a);gt(_,1,()=>t(y),bt,(w,o,m)=>{var $=Nt(),k=oe($),L=r(k),E=r(L,!0);i(L);var D=s(L),T=r(D,!0);i(D);var U=s(D),X=r(U,!0);i(U);var P=s(U),d=r(P,!0);i(P);var x=s(P),q=r(x,!0);i(x),i(k);var le=s(k,2);{var re=Y=>{var N=At(),ie=r(N),Ie=s(r(ie),2),qe=r(Ie),Ye=s(qe,4),Re=s(Ye,4),Be=s(Re,4),ut=s(Be,2);i(Ie),i(ie);var He=s(ie),dt=r(He);i(He),i(N),ze(yt=>{Ge(N,1,`details-row ${yt??""}`,"svelte-1uyilyu"),S(qe,`${t(o).Date??""} | ${(t(o).Time||"")??""} `),S(Ye,` ${(t(o)["Trailer No."]||"")??""} `),S(Re,` ${(t(o).Address||"")??""} , ${t(o).City??""} ${t(o).State??""} `),S(Be,` ${(t(o)["Prevented Delivery "]||"")??""} | `),S(ut,` T${(t(o)["Tank No. "]||"")??""}`)},[()=>A(m)],Ue),h("click",dt,()=>p(t(o))),h("click",N,()=>ce(m)),j(Y,N)};Xe(le,Y=>{t(C)[m]&&Y(re)})}ze((Y,N)=>{Ge(k,1,`main-row ${Y??""} ${t(C)[m]?"hover-row":""}`,"svelte-1uyilyu"),S(E,N),S(T,t(o).Time),S(X,t(o).City),S(d,t(o)["Trailer No."]),S(q,t(o)["Prevented Delivery "])},[()=>A(m),()=>Lt(t(o).Date)],Ue),h("click",k,()=>ce(m)),j(w,$)}),j(e,a)},nt=e=>{var a=Pt();j(e,a)};Xe(it,e=>{t(y).length>0?e(ot):e(nt,!1)})}i(je),i(Pe),i(Ce),i(ee);var Me=s(ee,2),Ve=r(Me),ct=s(r(Ve),2);f(ct,"src",`${u??""}/images/logo.png`),i(Ve),i(Me),I(R,()=>t(l).address,e=>M(l,t(l).address=e)),h("keydown",R,e=>{e.key==="Enter"&&b()}),I(B,()=>t(l).state,e=>M(l,t(l).state=e)),h("keydown",B,e=>{e.key==="Enter"&&b()}),I(H,()=>t(l).city,e=>M(l,t(l).city=e)),h("keydown",H,e=>{e.key==="Enter"&&b()}),I(O,()=>t(l).trailer,e=>M(l,t(l).trailer=e)),h("keydown",O,e=>{e.key==="Enter"&&b()}),I(z,()=>t(l).date,e=>M(l,t(l).date=e)),h("keydown",z,e=>{e.key==="Enter"&&b()}),I($e,()=>t(l).fuel,e=>M(l,t(l).fuel=e)),h("click",Le,b),h("click",lt,W),h("click",Fe,We),h("click",Ne,Ke),h("click",rt,et),j(v,ye),pt()}export{Qt as component,Kt as universal};
