import{t as J,a as P,c as lt,d as ot}from"../chunks/BH13Z9z8.js";import"../chunks/DNyCRkWS.js";import{_ as it,ap as oe,a as t,a0 as nt,au as ct,ar as s,c as l,aw as M,m as ie,s as F,av as Ie,r as o,aq as qe,A as Ye}from"../chunks/bqrR2dOs.js";import{s as w}from"../chunks/C93Zg23q.js";import{i as Re}from"../chunks/B8PK6R75.js";import{e as dt,i as vt}from"../chunks/BCehYjPx.js";import{h as gt}from"../chunks/CeRXAMUy.js";import{a as bt,s as A,r as V,b as He}from"../chunks/DnL43C8x.js";import{e as b}from"../chunks/C5hrIerT.js";import{b as I}from"../chunks/DaeiHhzB.js";import{i as ut}from"../chunks/0IjRvDC7.js";import{o as ft}from"../chunks/BUq4umeo.js";import{g as pt}from"../chunks/0KinHf2G.js";import{b as p}from"../chunks/C4oNzKWp.js";import{g as ht}from"../chunks/BSVGX1ij.js";import{p as mt}from"../chunks/D-Jgd-h0.js";const yt=!0,Ot=Object.freeze(Object.defineProperty({__proto__:null,prerender:yt},Symbol.toStringTag,{value:"Module"}));let G=[];async function _t(){if(G.length>0)return G;try{const g=await fetch("/table_data/vehicle_logging.json");if(!g.ok)throw new Error(`HTTP error! status: ${g.status}`);const c=await g.json();return G=c,c}catch(g){return console.error("Error fetching vehicleData data:",g),new Promise((c,h)=>{const u=new XMLHttpRequest;u.open("GET","table_data/vehicle_logging.json",!0),u.onload=function(){if(u.status===200)try{const i=JSON.parse(u.responseText);G=i,c(i)}catch(i){console.error("Error parsing JSON:",i),h(i)}else console.error("XHR error:",u.status),h(new Error(`XHR error: ${u.status}`))},u.onerror=function(){console.error("XHR error occurred"),h(new Error("XHR error occurred"))},u.send()})}}function wt(g){if(!g)return"";const[c,h,u]=g.split("."),i=new Date(u,c-1,h);if(isNaN(i.getTime()))return g;const v=new Date;if((v-i)/(1e3*60)<=30)return"Just now";if(i.getDate()===v.getDate()&&i.getMonth()===v.getMonth()&&i.getFullYear()===v.getFullYear())return"Today";const L=new Date(v);if(L.setDate(v.getDate()-1),i.getDate()===L.getDate()&&i.getMonth()===L.getMonth()&&i.getFullYear()===L.getFullYear())return"Yesterday";const m=new Date(v);if(m.setDate(v.getDate()-2),i.getDate()===m.getDate()&&i.getMonth()===m.getMonth()&&i.getFullYear()===m.getFullYear())return"Two days ago";const W={year:"numeric",month:"long",day:"numeric"};return i.toLocaleDateString("en-US",W)}function Be(){const g=document.getElementById("current-datetime");if(g){const c=new Date,h={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};g.textContent=c.toLocaleDateString("en-US",h)}}function Dt(){document.querySelectorAll(".search-fields input").forEach(c=>{const h=c.id+"_"+Math.random().toString(36).substring(2,9);c.setAttribute("name",h),(c.id==="State"||c.id==="Zip"||c.id==="Date"||c.id==="ST-address"||c.id==="City"||c.id==="Fuel")&&(c.setAttribute("autocomplete","new-password"),c.setAttribute("data-lpignore","true"),c.setAttribute("data-form-type","other"))})}var St=lt('<meta charset="UTF-8" class="svelte-6bgr30"> <meta name="viewport" content="width=device-width, initial-scale=1.0" class="svelte-6bgr30"> <link href="https://fonts.googleapis.com/css?family=Mulish" rel="stylesheet" class="svelte-6bgr30"> <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet" class="svelte-6bgr30"> <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js" class="svelte-6bgr30"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" class="svelte-6bgr30"><\/script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js" class="svelte-6bgr30"><\/script>',1),Tt=J('<tr><td colspan="4" class="details-cell svelte-6bgr30"><div class="details-header svelte-6bgr30">Details:</div> <div class="details-content svelte-6bgr30"> <br class="svelte-6bgr30"> <span class="label svelte-6bgr30">Trailer No.:</span> <br class="svelte-6bgr30"> <span class="label svelte-6bgr30">Full Address:</span> <br class="svelte-6bgr30"> <span class="label svelte-6bgr30">Delivered:</span> <span class="label svelte-6bgr30">Tank:</span> </div></td><td class="svelte-6bgr30"><button class="more-details svelte-6bgr30">View Vehicle Timeline</button></td></tr>'),kt=J('<tr><td class="svelte-6bgr30"> </td><td class="svelte-6bgr30"> </td><td class="svelte-6bgr30"> </td><td class="svelte-6bgr30"> </td><td class="svelte-6bgr30"> </td></tr> <!>',1),xt=J('<tr class="svelte-6bgr30"><td colspan="4" style="text-align: center; padding: 20px;" class="svelte-6bgr30">No results found</td></tr>'),Ct=J(`<header class="svelte-6bgr30"><div class="header-container svelte-6bgr30"><div class="top-header svelte-6bgr30"><a class="top-header-link svelte-6bgr30" href="https://berrys.com">berrys.com</a> <a class="top-header-link svelte-6bgr30" href=" ">Contact Us</a></div> <div class="header svelte-6bgr30"><div class="header-background svelte-6bgr30"></div> <a class="svelte-6bgr30">Home</a> <a class="svelte-6bgr30">Inventory</a> <a class="svelte-6bgr30">Cross-Drop Prevention</a> <a class="svelte-6bgr30">Site Data</a> <a class="svelte-6bgr30">Analytics</a> <input type="text" placeholder="Search..." class="svelte-6bgr30"> <img alt="Berrys Logo" class="svelte-6bgr30"></div></div></header> <div class="sub-header-container svelte-6bgr30"><div class="sub-header svelte-6bgr30"><h1 class="svelte-6bgr30">Vehicle Logging</h1> <span class="svelte-6bgr30">Access key information on each trailer, with real-time access to
      deliveries, focusing on trailer ID. See where trailers are located, what
      they are delivering or a full log on delivery history.</span></div> <div class="breadcrumb svelte-6bgr30"><a class="svelte-6bgr30">Home</a> / <span class="svelte-6bgr30">Vehicle Logging</span></div></div> <main class="svelte-6bgr30"><div class="main-container svelte-6bgr30"><label for="search-fields" class="search-label svelte-6bgr30">Search</label> <div class="search-fields svelte-6bgr30"><label for="ST-address" class="svelte-6bgr30">Address</label> <input type="text" id="ST-address" name="ST-address" class="svelte-6bgr30"> <label for="State" class="svelte-6bgr30">State</label> <input type="text" id="State" name="State" class="svelte-6bgr30"> <label for="City" class="svelte-6bgr30">City</label> <input type="text" id="City" name="City" class="svelte-6bgr30"> <label for="Trailer_No" class="svelte-6bgr30">Trailer No</label> <input type="text" id="Trailer_No" name="Trailer_No" class="svelte-6bgr30"> <label for="Date" class="svelte-6bgr30">Date</label> <input type="text" id="Date" name="Date" placeholder="DD/MM/YYYY" class="svelte-6bgr30"> <label for="Fuel" class="svelte-6bgr30">Fuel</label> <input type="text" id="Fuel" name="Fuel" class="svelte-6bgr30"></div> <div class="button-container svelte-6bgr30"><button class="search-button svelte-6bgr30">Search</button> <button class="clear-button svelte-6bgr30">Clear</button></div> <div class="table-header svelte-6bgr30"><div class="live-status svelte-6bgr30"><div class="toggle-live svelte-6bgr30"><label for="table-type" class="table-type svelte-6bgr30">LIVE <span class="live-indicator svelte-6bgr30"></span></label></div> <label for="table-type" class="table-type svelte-6bgr30"><span id="current-datetime" class="current-time svelte-6bgr30"></span></label></div> <div class="export-dropdown svelte-6bgr30"><button class="export-button svelte-6bgr30">Export As â–¼</button> <div class="dropdown-content svelte-6bgr30" id="exportDropdown"><a href=" " class="svelte-6bgr30">CSV</a> <a href=" " class="svelte-6bgr30">PDF</a></div></div></div> <table class="svelte-6bgr30"><thead class="svelte-6bgr30"><tr class="svelte-6bgr30"><th class="svelte-6bgr30">Date</th><th class="svelte-6bgr30">Time</th><th class="svelte-6bgr30">City</th><th class="svelte-6bgr30">Vehicle ID</th><th class="svelte-6bgr30">Prevented Delivery</th></tr></thead><tbody class="svelte-6bgr30"><!></tbody></table></div></main> <footer class="svelte-6bgr30"><div style="display: flex; justify-content: space-between; align-items: center; padding: 0 20px;" class="svelte-6bgr30"><span style="font-size: 1rem; font-family: Mulish;" class="svelte-6bgr30">@copyrights Berrys Global Innovations</span> <img alt="Berrys Logo" class="svelte-6bgr30"></div></footer>`,1);function zt(g,c){it(c,!1);const h=pt(mt).url.pathname;function u(e){ht(`${p}/vehicle/${e["Trailer No."]}`,{state:{from:h,trailer:e["Trailer No."]}})}let i=[],v=ie([]),k=ie([]),r=ie({address:"",state:"",city:"",trailer:"",date:"",fuel:""});function L(e){return e%2===0?"row-even":"row-odd"}function m(){F(v,i.filter(e=>{const a=!t(r).address||e.Address&&e.Address.toLowerCase().includes(t(r).address.toLowerCase()),N=!t(r).state||e.State&&e.State.toLowerCase().includes(t(r).state.toLowerCase()),y=!t(r).city||e.City&&e.City.toLowerCase().includes(t(r).city.toLowerCase()),n=!t(r).trailer||e["Trailer No."]&&e["Trailer No."].toLowerCase().includes(t(r).trailer.toLowerCase()),f=!t(r).date||e.Date&&e.Date.includes(t(r).date),x=!t(r).fuel||e["Prevented Delivery "]&&e["Prevented Delivery "].toLowerCase().includes(t(r).fuel.toLowerCase());return a&&N&&y&&n&&f&&x})),F(k,Array(t(v).length).fill(!1)),de()}function W(){console.log("clearing"),F(r,{address:"",state:"",city:"",trailer:"",date:"",fuel:""}),console.log(t(r)),F(v,[...i]),F(k,Array(t(v).length).fill(!1)),de(!0)}function Oe(){document.getElementById("exportDropdown").classList.toggle("show")}function ze(){const e=document.querySelectorAll(".search-fields input");return Array.from(e).some(a=>a.value.trim()!=="")}function ne(e){let a=[...t(k)];a[e]=!a[e],F(k,a)}function Ue(){const a=document.querySelector("table").cloneNode(!0);a.querySelectorAll(".more-details").forEach(d=>{d.parentNode.textContent=""});const y=a.querySelectorAll("tr");let n=[];const f=[];y[0].querySelectorAll("th").forEach(d=>{f.push(d.textContent.trim())}),n.push(f.join(","));for(let d=1;d<y.length;d++){const T=[];y[d].querySelectorAll("td").forEach(se=>{let re=se.textContent.trim().replace(/"/g,'""');T.push(`"${re}"`)}),T.length>0&&n.push(T.join(","))}const D=n.join(`
`),C=new Blob([D],{type:"text/csv;charset=utf-8;"}),$=new Date,_=$.toISOString().split("T")[0],S=$.toTimeString().split(" ")[0].replace(/:/g,"-"),X=`${document.location.pathname.includes("vehicle-logging")?"vehicle_logging":"site_data"}_${_}_${S}.csv`;if("showSaveFilePicker"in window){async function d(){try{const q=await(await window.showSaveFilePicker({suggestedName:X,types:[{description:"CSV File",accept:{"text/csv":[".csv"]}}]})).createWritable();await q.write(C),await q.close()}catch(T){T.name!=="AbortError"&&j()}}d()}else j();function j(){const d=document.createElement("a");d.href=URL.createObjectURL(C),d.setAttribute("download",X),document.body.appendChild(d),d.click(),document.body.removeChild(d)}}async function Xe(){try{const{jsPDF:e}=window.jspdf;if(!e)throw new Error("jsPDF library not found");const a=new e;a.setFont("helvetica","bold"),a.setFontSize(16),a.text("Vehicle Logging Data",14,15);const N=new Date().toLocaleString();a.setFontSize(10),a.setFont("helvetica","normal"),a.text(`Generated: ${N}`,14,25);const y=document.querySelector("table");if(!y)throw new Error("Table not found");const n=y.cloneNode(!0);n.querySelectorAll(".more-details").forEach(_=>{const S=_.closest("td, th");S&&(S.textContent="")}),a.autoTable({html:n,startY:30,styles:{fontSize:8,cellPadding:2,overflow:"linebreak",halign:"center"},headStyles:{fillColor:[1,75,150],textColor:255,fontSize:8,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:[234,243,252]},margin:{top:30}});const x=new Date,D=x.toISOString().split("T")[0],C=x.toTimeString().split(" ")[0].replace(/:/g,"-"),$=`vehicle_logging_${D}_${C}.pdf`;if("showSaveFilePicker"in window)try{const S=await(await window.showSaveFilePicker({suggestedName:$,types:[{description:"PDF File",accept:{"application/pdf":[".pdf"]}}]})).createWritable();await S.write(a.output("blob")),await S.close()}catch(_){console.error("File save error:",_),ce(a,$)}else ce(a,$);return!0}catch(e){return console.error("PDF generation failed:",e),!1}}function ce(e,a){e.save(a)}function de(e=!1){const a=document.querySelector(".toggle-live");a&&(!e&&ze()?a.style.display="none":a.style.display="block")}ft(async()=>{Be(),Dt(),console.log("Starting data fetch");try{const a=await _t();console.log("Data fetched:",a),i=a,F(v,[...i]),F(k,Array(i.length).fill(!1))}catch(a){console.error("Failed to load data:",a)}const e=setInterval(Be,1e3);return()=>{clearInterval(e)}}),ut();var ve=Ct();gt(e=>{var a=St();ct.title="Vehicle Logging",Ie(12),P(e,a)});var Z=oe(ve),ge=l(Z),be=s(l(ge),2),ue=l(be);bt(ue,`      background: url(${p??""}/svg/Vector_1.svg) no-repeat left center; mask-image: url(${p??""}/svg/Vector_1.svg'); -webkit-mask-image: url(${p??""}/svg/Vector_1.svg);`);var fe=s(ue,2);A(fe,"href",`${p??""}/home`);var pe=s(fe,2);A(pe,"href",`${p??""}/inventory`);var he=s(pe,2);A(he,"href",`${p??""}/cross-drops`);var me=s(he,2);A(me,"href",`${p??""}/site-data`);var ye=s(me,2);A(ye,"href",`${p??""}/analytics`);var Ge=s(ye,4);A(Ge,"src",`${p??""}/images/Midas_Link_logo.png`),o(be),o(ge),o(Z);var K=s(Z,2),_e=s(l(K),2),Je=l(_e);A(Je,"href",`${p??""}/home`),Ie(2),o(_e),o(K);var Q=s(K,2),we=l(Q),ee=s(l(we),2),R=s(l(ee),2);V(R);var H=s(R,4);V(H);var B=s(H,4);V(B);var O=s(B,4);V(O);var z=s(O,4);V(z);var De=s(z,4);V(De),o(ee);var te=s(ee,2),Se=l(te),We=s(Se,2);o(te);var ae=s(te,2),Te=s(l(ae),2),ke=l(Te),xe=s(ke,2),Ce=l(xe),Ze=s(Ce,2);o(xe),o(Te),o(ae);var $e=s(ae,2),Fe=s(l($e)),Ke=l(Fe);{var Qe=e=>{var a=ot(),N=oe(a);dt(N,1,()=>t(v),vt,(y,n,f)=>{var x=kt(),D=oe(x),C=l(D),$=l(C,!0);o(C);var _=s(C),S=l(_,!0);o(_);var U=s(_),X=l(U,!0);o(U);var j=s(U),d=l(j,!0);o(j);var T=s(j),q=l(T,!0);o(T),o(D);var se=s(D,2);{var re=Y=>{var E=Tt(),le=l(E),Ee=s(l(le),2),Ne=l(Ee),je=s(Ne,4),Pe=s(je,4),Me=s(Pe,4),at=s(Me,2);o(Ee),o(le);var Ve=s(le),st=l(Ve);o(Ve),o(E),qe(rt=>{He(E,1,`details-row ${rt??""}`,"svelte-6bgr30"),w(Ne,`${t(n).Date??""} | ${(t(n).Time||"")??""} `),w(je,` ${(t(n)["Trailer No."]||"")??""} `),w(Pe,` ${(t(n).Address||"")??""} , ${t(n).City??""} ${t(n).State??""} `),w(Me,` ${(t(n)["Prevented Delivery "]||"")??""} | `),w(at,` T${(t(n)["Tank No. "]||"")??""}`)},[()=>L(f)],Ye),b("click",st,()=>u(t(n))),b("click",E,()=>ne(f)),P(Y,E)};Re(se,Y=>{t(k)[f]&&Y(re)})}qe((Y,E)=>{He(D,1,`main-row ${Y??""} ${t(k)[f]?"hover-row":""}`,"svelte-6bgr30"),w($,E),w(S,t(n).Time),w(X,t(n).City),w(d,t(n)["Trailer No."]),w(q,t(n)["Prevented Delivery "])},[()=>L(f),()=>wt(t(n).Date)],Ye),b("click",D,()=>ne(f)),P(y,x)}),P(e,a)},et=e=>{var a=xt();P(e,a)};Re(Ke,e=>{t(v).length>0?e(Qe):e(et,!1)})}o(Fe),o($e),o(we),o(Q);var Ae=s(Q,2),Le=l(Ae),tt=s(l(Le),2);A(tt,"src",`${p??""}/images/logo.png`),o(Le),o(Ae),I(R,()=>t(r).address,e=>M(r,t(r).address=e)),b("keydown",R,e=>{e.key==="Enter"&&m()}),I(H,()=>t(r).state,e=>M(r,t(r).state=e)),b("keydown",H,e=>{e.key==="Enter"&&m()}),I(B,()=>t(r).city,e=>M(r,t(r).city=e)),b("keydown",B,e=>{e.key==="Enter"&&m()}),I(O,()=>t(r).trailer,e=>M(r,t(r).trailer=e)),b("keydown",O,e=>{e.key==="Enter"&&m()}),I(z,()=>t(r).date,e=>M(r,t(r).date=e)),b("keydown",z,e=>{e.key==="Enter"&&m()}),I(De,()=>t(r).fuel,e=>M(r,t(r).fuel=e)),b("click",Se,m),b("click",We,W),b("click",ke,Oe),b("click",Ce,Ue),b("click",Ze,Xe),P(g,ve),nt()}export{zt as component,Ot as universal};
